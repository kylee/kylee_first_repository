/**
 * FillThat Commenting System
 * - CORE
 * @package app.plugin
 */
/*!
 * jQuery JavaScript Library v1.4.2
 * http://jquery.com/
 *
 * Copyright 2010, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 * Copyright 2010, The Dojo Foundation
 * Released under the MIT, BSD, and GPL Licenses.
 *
 * Date: Sat Feb 13 22:33:48 2010 -0500
 */
(function(A,w){function ma(){if(!c.isReady){try{s.documentElement.doScroll("left")}catch(a){setTimeout(ma,1);return}c.ready()}}function Qa(a,b){b.src?c.ajax({url:b.src,async:false,dataType:"script"}):c.globalEval(b.text||b.textContent||b.innerHTML||"");b.parentNode&&b.parentNode.removeChild(b)}function X(a,b,d,f,e,j){var i=a.length;if(typeof b==="object"){for(var o in b)X(a,o,b[o],f,e,d);return a}if(d!==w){f=!j&&f&&c.isFunction(d);for(o=0;o<i;o++)e(a[o],b,f?d.call(a[o],o,e(a[o],b)):d,j);return a}return i?
e(a[0],b):w}function J(){return(new Date).getTime()}function Y(){return false}function Z(){return true}function na(a,b,d){d[0].type=a;return c.event.handle.apply(b,d)}function oa(a){var b,d=[],f=[],e=arguments,j,i,o,k,n,r;i=c.data(this,"events");if(!(a.liveFired===this||!i||!i.live||a.button&&a.type==="click")){a.liveFired=this;var u=i.live.slice(0);for(k=0;k<u.length;k++){i=u[k];i.origType.replace(O,"")===a.type?f.push(i.selector):u.splice(k--,1)}j=c(a.target).closest(f,a.currentTarget);n=0;for(r=
j.length;n<r;n++)for(k=0;k<u.length;k++){i=u[k];if(j[n].selector===i.selector){o=j[n].elem;f=null;if(i.preType==="mouseenter"||i.preType==="mouseleave")f=c(a.relatedTarget).closest(i.selector)[0];if(!f||f!==o)d.push({elem:o,handleObj:i})}}n=0;for(r=d.length;n<r;n++){j=d[n];a.currentTarget=j.elem;a.data=j.handleObj.data;a.handleObj=j.handleObj;if(j.handleObj.origHandler.apply(j.elem,e)===false){b=false;break}}return b}}function pa(a,b){return"live."+(a&&a!=="*"?a+".":"")+b.replace(/\./g,"`").replace(/ /g,
"&")}function qa(a){return!a||!a.parentNode||a.parentNode.nodeType===11}function ra(a,b){var d=0;b.each(function(){if(this.nodeName===(a[d]&&a[d].nodeName)){var f=c.data(a[d++]),e=c.data(this,f);if(f=f&&f.events){delete e.handle;e.events={};for(var j in f)for(var i in f[j])c.event.add(this,j,f[j][i],f[j][i].data)}}})}function sa(a,b,d){var f,e,j;b=b&&b[0]?b[0].ownerDocument||b[0]:s;if(a.length===1&&typeof a[0]==="string"&&a[0].length<512&&b===s&&!ta.test(a[0])&&(c.support.checkClone||!ua.test(a[0]))){e=
true;if(j=c.fragments[a[0]])if(j!==1)f=j}if(!f){f=b.createDocumentFragment();c.clean(a,b,f,d)}if(e)c.fragments[a[0]]=j?f:1;return{fragment:f,cacheable:e}}function K(a,b){var d={};c.each(va.concat.apply([],va.slice(0,b)),function(){d[this]=a});return d}function wa(a){return"scrollTo"in a&&a.document?a:a.nodeType===9?a.defaultView||a.parentWindow:false}var c=function(a,b){return new c.fn.init(a,b)},Ra=A.jQuery,Sa=A.$,s=A.document,T,Ta=/^[^<]*(<[\w\W]+>)[^>]*$|^#([\w-]+)$/,Ua=/^.[^:#\[\.,]*$/,Va=/\S/,
Wa=/^(\s|\u00A0)+|(\s|\u00A0)+$/g,Xa=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,P=navigator.userAgent,xa=false,Q=[],L,$=Object.prototype.toString,aa=Object.prototype.hasOwnProperty,ba=Array.prototype.push,R=Array.prototype.slice,ya=Array.prototype.indexOf;c.fn=c.prototype={init:function(a,b){var d,f;if(!a)return this;if(a.nodeType){this.context=this[0]=a;this.length=1;return this}if(a==="body"&&!b){this.context=s;this[0]=s.body;this.selector="body";this.length=1;return this}if(typeof a==="string")if((d=Ta.exec(a))&&
(d[1]||!b))if(d[1]){f=b?b.ownerDocument||b:s;if(a=Xa.exec(a))if(c.isPlainObject(b)){a=[s.createElement(a[1])];c.fn.attr.call(a,b,true)}else a=[f.createElement(a[1])];else{a=sa([d[1]],[f]);a=(a.cacheable?a.fragment.cloneNode(true):a.fragment).childNodes}return c.merge(this,a)}else{if(b=s.getElementById(d[2])){if(b.id!==d[2])return T.find(a);this.length=1;this[0]=b}this.context=s;this.selector=a;return this}else if(!b&&/^\w+$/.test(a)){this.selector=a;this.context=s;a=s.getElementsByTagName(a);return c.merge(this,
a)}else return!b||b.jquery?(b||T).find(a):c(b).find(a);else if(c.isFunction(a))return T.ready(a);if(a.selector!==w){this.selector=a.selector;this.context=a.context}return c.makeArray(a,this)},selector:"",jquery:"1.4.2",length:0,size:function(){return this.length},toArray:function(){return R.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this.slice(a)[0]:this[a]},pushStack:function(a,b,d){var f=c();c.isArray(a)?ba.apply(f,a):c.merge(f,a);f.prevObject=this;f.context=this.context;if(b===
"find")f.selector=this.selector+(this.selector?" ":"")+d;else if(b)f.selector=this.selector+"."+b+"("+d+")";return f},each:function(a,b){return c.each(this,a,b)},ready:function(a){c.bindReady();if(c.isReady)a.call(s,c);else Q&&Q.push(a);return this},eq:function(a){return a===-1?this.slice(a):this.slice(a,+a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(R.apply(this,arguments),"slice",R.call(arguments).join(","))},map:function(a){return this.pushStack(c.map(this,
function(b,d){return a.call(b,d,b)}))},end:function(){return this.prevObject||c(null)},push:ba,sort:[].sort,splice:[].splice};c.fn.init.prototype=c.fn;c.extend=c.fn.extend=function(){var a=arguments[0]||{},b=1,d=arguments.length,f=false,e,j,i,o;if(typeof a==="boolean"){f=a;a=arguments[1]||{};b=2}if(typeof a!=="object"&&!c.isFunction(a))a={};if(d===b){a=this;--b}for(;b<d;b++)if((e=arguments[b])!=null)for(j in e){i=a[j];o=e[j];if(a!==o)if(f&&o&&(c.isPlainObject(o)||c.isArray(o))){i=i&&(c.isPlainObject(i)||
c.isArray(i))?i:c.isArray(o)?[]:{};a[j]=c.extend(f,i,o)}else if(o!==w)a[j]=o}return a};c.extend({noConflict:function(a){A.$=Sa;if(a)A.jQuery=Ra;return c},isReady:false,ready:function(){if(!c.isReady){if(!s.body)return setTimeout(c.ready,13);c.isReady=true;if(Q){for(var a,b=0;a=Q[b++];)a.call(s,c);Q=null}c.fn.triggerHandler&&c(s).triggerHandler("ready")}},bindReady:function(){if(!xa){xa=true;if(s.readyState==="complete")return c.ready();if(s.addEventListener){s.addEventListener("DOMContentLoaded",
L,false);A.addEventListener("load",c.ready,false)}else if(s.attachEvent){s.attachEvent("onreadystatechange",L);A.attachEvent("onload",c.ready);var a=false;try{a=A.frameElement==null}catch(b){}s.documentElement.doScroll&&a&&ma()}}},isFunction:function(a){return $.call(a)==="[object Function]"},isArray:function(a){return $.call(a)==="[object Array]"},isPlainObject:function(a){if(!a||$.call(a)!=="[object Object]"||a.nodeType||a.setInterval)return false;if(a.constructor&&!aa.call(a,"constructor")&&!aa.call(a.constructor.prototype,
"isPrototypeOf"))return false;var b;for(b in a);return b===w||aa.call(a,b)},isEmptyObject:function(a){for(var b in a)return false;return true},error:function(a){throw a;},parseJSON:function(a){if(typeof a!=="string"||!a)return null;a=c.trim(a);if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return A.JSON&&A.JSON.parse?A.JSON.parse(a):(new Function("return "+
a))();else c.error("Invalid JSON: "+a)},noop:function(){},globalEval:function(a){if(a&&Va.test(a)){var b=s.getElementsByTagName("head")[0]||s.documentElement,d=s.createElement("script");d.type="text/javascript";if(c.support.scriptEval)d.appendChild(s.createTextNode(a));else d.text=a;b.insertBefore(d,b.firstChild);b.removeChild(d)}},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,b,d){var f,e=0,j=a.length,i=j===w||c.isFunction(a);if(d)if(i)for(f in a){if(b.apply(a[f],
d)===false)break}else for(;e<j;){if(b.apply(a[e++],d)===false)break}else if(i)for(f in a){if(b.call(a[f],f,a[f])===false)break}else for(d=a[0];e<j&&b.call(d,e,d)!==false;d=a[++e]);return a},trim:function(a){return(a||"").replace(Wa,"")},makeArray:function(a,b){b=b||[];if(a!=null)a.length==null||typeof a==="string"||c.isFunction(a)||typeof a!=="function"&&a.setInterval?ba.call(b,a):c.merge(b,a);return b},inArray:function(a,b){if(b.indexOf)return b.indexOf(a);for(var d=0,f=b.length;d<f;d++)if(b[d]===
a)return d;return-1},merge:function(a,b){var d=a.length,f=0;if(typeof b.length==="number")for(var e=b.length;f<e;f++)a[d++]=b[f];else for(;b[f]!==w;)a[d++]=b[f++];a.length=d;return a},grep:function(a,b,d){for(var f=[],e=0,j=a.length;e<j;e++)!d!==!b(a[e],e)&&f.push(a[e]);return f},map:function(a,b,d){for(var f=[],e,j=0,i=a.length;j<i;j++){e=b(a[j],j,d);if(e!=null)f[f.length]=e}return f.concat.apply([],f)},guid:1,proxy:function(a,b,d){if(arguments.length===2)if(typeof b==="string"){d=a;a=d[b];b=w}else if(b&&
!c.isFunction(b)){d=b;b=w}if(!b&&a)b=function(){return a.apply(d||this,arguments)};if(a)b.guid=a.guid=a.guid||b.guid||c.guid++;return b},uaMatch:function(a){a=a.toLowerCase();a=/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version)?[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||!/compatible/.test(a)&&/(mozilla)(?:.*? rv:([\w.]+))?/.exec(a)||[];return{browser:a[1]||"",version:a[2]||"0"}},browser:{}});P=c.uaMatch(P);if(P.browser){c.browser[P.browser]=true;c.browser.version=P.version}if(c.browser.webkit)c.browser.safari=
true;if(ya)c.inArray=function(a,b){return ya.call(b,a)};T=c(s);if(s.addEventListener)L=function(){s.removeEventListener("DOMContentLoaded",L,false);c.ready()};else if(s.attachEvent)L=function(){if(s.readyState==="complete"){s.detachEvent("onreadystatechange",L);c.ready()}};(function(){c.support={};var a=s.documentElement,b=s.createElement("script"),d=s.createElement("div"),f="script"+J();d.style.display="none";d.innerHTML="   <link/><table></table><a href='/a' style='color:red;float:left;opacity:.55;'>a</a><input type='checkbox'/>";
var e=d.getElementsByTagName("*"),j=d.getElementsByTagName("a")[0];if(!(!e||!e.length||!j)){c.support={leadingWhitespace:d.firstChild.nodeType===3,tbody:!d.getElementsByTagName("tbody").length,htmlSerialize:!!d.getElementsByTagName("link").length,style:/red/.test(j.getAttribute("style")),hrefNormalized:j.getAttribute("href")==="/a",opacity:/^0.55$/.test(j.style.opacity),cssFloat:!!j.style.cssFloat,checkOn:d.getElementsByTagName("input")[0].value==="on",optSelected:s.createElement("select").appendChild(s.createElement("option")).selected,
parentNode:d.removeChild(d.appendChild(s.createElement("div"))).parentNode===null,deleteExpando:true,checkClone:false,scriptEval:false,noCloneEvent:true,boxModel:null};b.type="text/javascript";try{b.appendChild(s.createTextNode("window."+f+"=1;"))}catch(i){}a.insertBefore(b,a.firstChild);if(A[f]){c.support.scriptEval=true;delete A[f]}try{delete b.test}catch(o){c.support.deleteExpando=false}a.removeChild(b);if(d.attachEvent&&d.fireEvent){d.attachEvent("onclick",function k(){c.support.noCloneEvent=
false;d.detachEvent("onclick",k)});d.cloneNode(true).fireEvent("onclick")}d=s.createElement("div");d.innerHTML="<input type='radio' name='radiotest' checked='checked'/>";a=s.createDocumentFragment();a.appendChild(d.firstChild);c.support.checkClone=a.cloneNode(true).cloneNode(true).lastChild.checked;c(function(){var k=s.createElement("div");k.style.width=k.style.paddingLeft="1px";s.body.appendChild(k);c.boxModel=c.support.boxModel=k.offsetWidth===2;s.body.removeChild(k).style.display="none"});a=function(k){var n=
s.createElement("div");k="on"+k;var r=k in n;if(!r){n.setAttribute(k,"return;");r=typeof n[k]==="function"}return r};c.support.submitBubbles=a("submit");c.support.changeBubbles=a("change");a=b=d=e=j=null}})();c.props={"for":"htmlFor","class":"className",readonly:"readOnly",maxlength:"maxLength",cellspacing:"cellSpacing",rowspan:"rowSpan",colspan:"colSpan",tabindex:"tabIndex",usemap:"useMap",frameborder:"frameBorder"};var G="jQuery"+J(),Ya=0,za={};c.extend({cache:{},expando:G,noData:{embed:true,object:true,
applet:true},data:function(a,b,d){if(!(a.nodeName&&c.noData[a.nodeName.toLowerCase()])){a=a==A?za:a;var f=a[G],e=c.cache;if(!f&&typeof b==="string"&&d===w)return null;f||(f=++Ya);if(typeof b==="object"){a[G]=f;e[f]=c.extend(true,{},b)}else if(!e[f]){a[G]=f;e[f]={}}a=e[f];if(d!==w)a[b]=d;return typeof b==="string"?a[b]:a}},removeData:function(a,b){if(!(a.nodeName&&c.noData[a.nodeName.toLowerCase()])){a=a==A?za:a;var d=a[G],f=c.cache,e=f[d];if(b){if(e){delete e[b];c.isEmptyObject(e)&&c.removeData(a)}}else{if(c.support.deleteExpando)delete a[c.expando];
else a.removeAttribute&&a.removeAttribute(c.expando);delete f[d]}}}});c.fn.extend({data:function(a,b){if(typeof a==="undefined"&&this.length)return c.data(this[0]);else if(typeof a==="object")return this.each(function(){c.data(this,a)});var d=a.split(".");d[1]=d[1]?"."+d[1]:"";if(b===w){var f=this.triggerHandler("getData"+d[1]+"!",[d[0]]);if(f===w&&this.length)f=c.data(this[0],a);return f===w&&d[1]?this.data(d[0]):f}else return this.trigger("setData"+d[1]+"!",[d[0],b]).each(function(){c.data(this,
a,b)})},removeData:function(a){return this.each(function(){c.removeData(this,a)})}});c.extend({queue:function(a,b,d){if(a){b=(b||"fx")+"queue";var f=c.data(a,b);if(!d)return f||[];if(!f||c.isArray(d))f=c.data(a,b,c.makeArray(d));else f.push(d);return f}},dequeue:function(a,b){b=b||"fx";var d=c.queue(a,b),f=d.shift();if(f==="inprogress")f=d.shift();if(f){b==="fx"&&d.unshift("inprogress");f.call(a,function(){c.dequeue(a,b)})}}});c.fn.extend({queue:function(a,b){if(typeof a!=="string"){b=a;a="fx"}if(b===
w)return c.queue(this[0],a);return this.each(function(){var d=c.queue(this,a,b);a==="fx"&&d[0]!=="inprogress"&&c.dequeue(this,a)})},dequeue:function(a){return this.each(function(){c.dequeue(this,a)})},delay:function(a,b){a=c.fx?c.fx.speeds[a]||a:a;b=b||"fx";return this.queue(b,function(){var d=this;setTimeout(function(){c.dequeue(d,b)},a)})},clearQueue:function(a){return this.queue(a||"fx",[])}});var Aa=/[\n\t]/g,ca=/\s+/,Za=/\r/g,$a=/href|src|style/,ab=/(button|input)/i,bb=/(button|input|object|select|textarea)/i,
cb=/^(a|area)$/i,Ba=/radio|checkbox/;c.fn.extend({attr:function(a,b){return X(this,a,b,true,c.attr)},removeAttr:function(a){return this.each(function(){c.attr(this,a,"");this.nodeType===1&&this.removeAttribute(a)})},addClass:function(a){if(c.isFunction(a))return this.each(function(n){var r=c(this);r.addClass(a.call(this,n,r.attr("class")))});if(a&&typeof a==="string")for(var b=(a||"").split(ca),d=0,f=this.length;d<f;d++){var e=this[d];if(e.nodeType===1)if(e.className){for(var j=" "+e.className+" ",
i=e.className,o=0,k=b.length;o<k;o++)if(j.indexOf(" "+b[o]+" ")<0)i+=" "+b[o];e.className=c.trim(i)}else e.className=a}return this},removeClass:function(a){if(c.isFunction(a))return this.each(function(k){var n=c(this);n.removeClass(a.call(this,k,n.attr("class")))});if(a&&typeof a==="string"||a===w)for(var b=(a||"").split(ca),d=0,f=this.length;d<f;d++){var e=this[d];if(e.nodeType===1&&e.className)if(a){for(var j=(" "+e.className+" ").replace(Aa," "),i=0,o=b.length;i<o;i++)j=j.replace(" "+b[i]+" ",
" ");e.className=c.trim(j)}else e.className=""}return this},toggleClass:function(a,b){var d=typeof a,f=typeof b==="boolean";if(c.isFunction(a))return this.each(function(e){var j=c(this);j.toggleClass(a.call(this,e,j.attr("class"),b),b)});return this.each(function(){if(d==="string")for(var e,j=0,i=c(this),o=b,k=a.split(ca);e=k[j++];){o=f?o:!i.hasClass(e);i[o?"addClass":"removeClass"](e)}else if(d==="undefined"||d==="boolean"){this.className&&c.data(this,"__className__",this.className);this.className=
this.className||a===false?"":c.data(this,"__className__")||""}})},hasClass:function(a){a=" "+a+" ";for(var b=0,d=this.length;b<d;b++)if((" "+this[b].className+" ").replace(Aa," ").indexOf(a)>-1)return true;return false},val:function(a){if(a===w){var b=this[0];if(b){if(c.nodeName(b,"option"))return(b.attributes.value||{}).specified?b.value:b.text;if(c.nodeName(b,"select")){var d=b.selectedIndex,f=[],e=b.options;b=b.type==="select-one";if(d<0)return null;var j=b?d:0;for(d=b?d+1:e.length;j<d;j++){var i=
e[j];if(i.selected){a=c(i).val();if(b)return a;f.push(a)}}return f}if(Ba.test(b.type)&&!c.support.checkOn)return b.getAttribute("value")===null?"on":b.value;return(b.value||"").replace(Za,"")}return w}var o=c.isFunction(a);return this.each(function(k){var n=c(this),r=a;if(this.nodeType===1){if(o)r=a.call(this,k,n.val());if(typeof r==="number")r+="";if(c.isArray(r)&&Ba.test(this.type))this.checked=c.inArray(n.val(),r)>=0;else if(c.nodeName(this,"select")){var u=c.makeArray(r);c("option",this).each(function(){this.selected=
c.inArray(c(this).val(),u)>=0});if(!u.length)this.selectedIndex=-1}else this.value=r}})}});c.extend({attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},attr:function(a,b,d,f){if(!a||a.nodeType===3||a.nodeType===8)return w;if(f&&b in c.attrFn)return c(a)[b](d);f=a.nodeType!==1||!c.isXMLDoc(a);var e=d!==w;b=f&&c.props[b]||b;if(a.nodeType===1){var j=$a.test(b);if(b in a&&f&&!j){if(e){b==="type"&&ab.test(a.nodeName)&&a.parentNode&&c.error("type property can't be changed");
a[b]=d}if(c.nodeName(a,"form")&&a.getAttributeNode(b))return a.getAttributeNode(b).nodeValue;if(b==="tabIndex")return(b=a.getAttributeNode("tabIndex"))&&b.specified?b.value:bb.test(a.nodeName)||cb.test(a.nodeName)&&a.href?0:w;return a[b]}if(!c.support.style&&f&&b==="style"){if(e)a.style.cssText=""+d;return a.style.cssText}e&&a.setAttribute(b,""+d);a=!c.support.hrefNormalized&&f&&j?a.getAttribute(b,2):a.getAttribute(b);return a===null?w:a}return c.style(a,b,d)}});var O=/\.(.*)$/,db=function(a){return a.replace(/[^\w\s\.\|`]/g,
function(b){return"\\"+b})};c.event={add:function(a,b,d,f){if(!(a.nodeType===3||a.nodeType===8)){if(a.setInterval&&a!==A&&!a.frameElement)a=A;var e,j;if(d.handler){e=d;d=e.handler}if(!d.guid)d.guid=c.guid++;if(j=c.data(a)){var i=j.events=j.events||{},o=j.handle;if(!o)j.handle=o=function(){return typeof c!=="undefined"&&!c.event.triggered?c.event.handle.apply(o.elem,arguments):w};o.elem=a;b=b.split(" ");for(var k,n=0,r;k=b[n++];){j=e?c.extend({},e):{handler:d,data:f};if(k.indexOf(".")>-1){r=k.split(".");
k=r.shift();j.namespace=r.slice(0).sort().join(".")}else{r=[];j.namespace=""}j.type=k;j.guid=d.guid;var u=i[k],z=c.event.special[k]||{};if(!u){u=i[k]=[];if(!z.setup||z.setup.call(a,f,r,o)===false)if(a.addEventListener)a.addEventListener(k,o,false);else a.attachEvent&&a.attachEvent("on"+k,o)}if(z.add){z.add.call(a,j);if(!j.handler.guid)j.handler.guid=d.guid}u.push(j);c.event.global[k]=true}a=null}}},global:{},remove:function(a,b,d,f){if(!(a.nodeType===3||a.nodeType===8)){var e,j=0,i,o,k,n,r,u,z=c.data(a),
C=z&&z.events;if(z&&C){if(b&&b.type){d=b.handler;b=b.type}if(!b||typeof b==="string"&&b.charAt(0)==="."){b=b||"";for(e in C)c.event.remove(a,e+b)}else{for(b=b.split(" ");e=b[j++];){n=e;i=e.indexOf(".")<0;o=[];if(!i){o=e.split(".");e=o.shift();k=new RegExp("(^|\\.)"+c.map(o.slice(0).sort(),db).join("\\.(?:.*\\.)?")+"(\\.|$)")}if(r=C[e])if(d){n=c.event.special[e]||{};for(B=f||0;B<r.length;B++){u=r[B];if(d.guid===u.guid){if(i||k.test(u.namespace)){f==null&&r.splice(B--,1);n.remove&&n.remove.call(a,u)}if(f!=
null)break}}if(r.length===0||f!=null&&r.length===1){if(!n.teardown||n.teardown.call(a,o)===false)Ca(a,e,z.handle);delete C[e]}}else for(var B=0;B<r.length;B++){u=r[B];if(i||k.test(u.namespace)){c.event.remove(a,n,u.handler,B);r.splice(B--,1)}}}if(c.isEmptyObject(C)){if(b=z.handle)b.elem=null;delete z.events;delete z.handle;c.isEmptyObject(z)&&c.removeData(a)}}}}},trigger:function(a,b,d,f){var e=a.type||a;if(!f){a=typeof a==="object"?a[G]?a:c.extend(c.Event(e),a):c.Event(e);if(e.indexOf("!")>=0){a.type=
e=e.slice(0,-1);a.exclusive=true}if(!d){a.stopPropagation();c.event.global[e]&&c.each(c.cache,function(){this.events&&this.events[e]&&c.event.trigger(a,b,this.handle.elem)})}if(!d||d.nodeType===3||d.nodeType===8)return w;a.result=w;a.target=d;b=c.makeArray(b);b.unshift(a)}a.currentTarget=d;(f=c.data(d,"handle"))&&f.apply(d,b);f=d.parentNode||d.ownerDocument;try{if(!(d&&d.nodeName&&c.noData[d.nodeName.toLowerCase()]))if(d["on"+e]&&d["on"+e].apply(d,b)===false)a.result=false}catch(j){}if(!a.isPropagationStopped()&&
f)c.event.trigger(a,b,f,true);else if(!a.isDefaultPrevented()){f=a.target;var i,o=c.nodeName(f,"a")&&e==="click",k=c.event.special[e]||{};if((!k._default||k._default.call(d,a)===false)&&!o&&!(f&&f.nodeName&&c.noData[f.nodeName.toLowerCase()])){try{if(f[e]){if(i=f["on"+e])f["on"+e]=null;c.event.triggered=true;f[e]()}}catch(n){}if(i)f["on"+e]=i;c.event.triggered=false}}},handle:function(a){var b,d,f,e;a=arguments[0]=c.event.fix(a||A.event);a.currentTarget=this;b=a.type.indexOf(".")<0&&!a.exclusive;
if(!b){d=a.type.split(".");a.type=d.shift();f=new RegExp("(^|\\.)"+d.slice(0).sort().join("\\.(?:.*\\.)?")+"(\\.|$)")}e=c.data(this,"events");d=e[a.type];if(e&&d){d=d.slice(0);e=0;for(var j=d.length;e<j;e++){var i=d[e];if(b||f.test(i.namespace)){a.handler=i.handler;a.data=i.data;a.handleObj=i;i=i.handler.apply(this,arguments);if(i!==w){a.result=i;if(i===false){a.preventDefault();a.stopPropagation()}}if(a.isImmediatePropagationStopped())break}}}return a.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),
fix:function(a){if(a[G])return a;var b=a;a=c.Event(b);for(var d=this.props.length,f;d;){f=this.props[--d];a[f]=b[f]}if(!a.target)a.target=a.srcElement||s;if(a.target.nodeType===3)a.target=a.target.parentNode;if(!a.relatedTarget&&a.fromElement)a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement;if(a.pageX==null&&a.clientX!=null){b=s.documentElement;d=s.body;a.pageX=a.clientX+(b&&b.scrollLeft||d&&d.scrollLeft||0)-(b&&b.clientLeft||d&&d.clientLeft||0);a.pageY=a.clientY+(b&&b.scrollTop||
d&&d.scrollTop||0)-(b&&b.clientTop||d&&d.clientTop||0)}if(!a.which&&(a.charCode||a.charCode===0?a.charCode:a.keyCode))a.which=a.charCode||a.keyCode;if(!a.metaKey&&a.ctrlKey)a.metaKey=a.ctrlKey;if(!a.which&&a.button!==w)a.which=a.button&1?1:a.button&2?3:a.button&4?2:0;return a},guid:1E8,proxy:c.proxy,special:{ready:{setup:c.bindReady,teardown:c.noop},live:{add:function(a){c.event.add(this,a.origType,c.extend({},a,{handler:oa}))},remove:function(a){var b=true,d=a.origType.replace(O,"");c.each(c.data(this,
"events").live||[],function(){if(d===this.origType.replace(O,""))return b=false});b&&c.event.remove(this,a.origType,oa)}},beforeunload:{setup:function(a,b,d){if(this.setInterval)this.onbeforeunload=d;return false},teardown:function(a,b){if(this.onbeforeunload===b)this.onbeforeunload=null}}}};var Ca=s.removeEventListener?function(a,b,d){a.removeEventListener(b,d,false)}:function(a,b,d){a.detachEvent("on"+b,d)};c.Event=function(a){if(!this.preventDefault)return new c.Event(a);if(a&&a.type){this.originalEvent=
a;this.type=a.type}else this.type=a;this.timeStamp=J();this[G]=true};c.Event.prototype={preventDefault:function(){this.isDefaultPrevented=Z;var a=this.originalEvent;if(a){a.preventDefault&&a.preventDefault();a.returnValue=false}},stopPropagation:function(){this.isPropagationStopped=Z;var a=this.originalEvent;if(a){a.stopPropagation&&a.stopPropagation();a.cancelBubble=true}},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Z;this.stopPropagation()},isDefaultPrevented:Y,isPropagationStopped:Y,
isImmediatePropagationStopped:Y};var Da=function(a){var b=a.relatedTarget;try{for(;b&&b!==this;)b=b.parentNode;if(b!==this){a.type=a.data;c.event.handle.apply(this,arguments)}}catch(d){}},Ea=function(a){a.type=a.data;c.event.handle.apply(this,arguments)};c.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){c.event.special[a]={setup:function(d){c.event.add(this,b,d&&d.selector?Ea:Da,a)},teardown:function(d){c.event.remove(this,b,d&&d.selector?Ea:Da)}}});if(!c.support.submitBubbles)c.event.special.submit=
{setup:function(){if(this.nodeName.toLowerCase()!=="form"){c.event.add(this,"click.specialSubmit",function(a){var b=a.target,d=b.type;if((d==="submit"||d==="image")&&c(b).closest("form").length)return na("submit",this,arguments)});c.event.add(this,"keypress.specialSubmit",function(a){var b=a.target,d=b.type;if((d==="text"||d==="password")&&c(b).closest("form").length&&a.keyCode===13)return na("submit",this,arguments)})}else return false},teardown:function(){c.event.remove(this,".specialSubmit")}};
if(!c.support.changeBubbles){var da=/textarea|input|select/i,ea,Fa=function(a){var b=a.type,d=a.value;if(b==="radio"||b==="checkbox")d=a.checked;else if(b==="select-multiple")d=a.selectedIndex>-1?c.map(a.options,function(f){return f.selected}).join("-"):"";else if(a.nodeName.toLowerCase()==="select")d=a.selectedIndex;return d},fa=function(a,b){var d=a.target,f,e;if(!(!da.test(d.nodeName)||d.readOnly)){f=c.data(d,"_change_data");e=Fa(d);if(a.type!=="focusout"||d.type!=="radio")c.data(d,"_change_data",
e);if(!(f===w||e===f))if(f!=null||e){a.type="change";return c.event.trigger(a,b,d)}}};c.event.special.change={filters:{focusout:fa,click:function(a){var b=a.target,d=b.type;if(d==="radio"||d==="checkbox"||b.nodeName.toLowerCase()==="select")return fa.call(this,a)},keydown:function(a){var b=a.target,d=b.type;if(a.keyCode===13&&b.nodeName.toLowerCase()!=="textarea"||a.keyCode===32&&(d==="checkbox"||d==="radio")||d==="select-multiple")return fa.call(this,a)},beforeactivate:function(a){a=a.target;c.data(a,
"_change_data",Fa(a))}},setup:function(){if(this.type==="file")return false;for(var a in ea)c.event.add(this,a+".specialChange",ea[a]);return da.test(this.nodeName)},teardown:function(){c.event.remove(this,".specialChange");return da.test(this.nodeName)}};ea=c.event.special.change.filters}s.addEventListener&&c.each({focus:"focusin",blur:"focusout"},function(a,b){function d(f){f=c.event.fix(f);f.type=b;return c.event.handle.call(this,f)}c.event.special[b]={setup:function(){this.addEventListener(a,
d,true)},teardown:function(){this.removeEventListener(a,d,true)}}});c.each(["bind","one"],function(a,b){c.fn[b]=function(d,f,e){if(typeof d==="object"){for(var j in d)this[b](j,f,d[j],e);return this}if(c.isFunction(f)){e=f;f=w}var i=b==="one"?c.proxy(e,function(k){c(this).unbind(k,i);return e.apply(this,arguments)}):e;if(d==="unload"&&b!=="one")this.one(d,f,e);else{j=0;for(var o=this.length;j<o;j++)c.event.add(this[j],d,i,f)}return this}});c.fn.extend({unbind:function(a,b){if(typeof a==="object"&&
!a.preventDefault)for(var d in a)this.unbind(d,a[d]);else{d=0;for(var f=this.length;d<f;d++)c.event.remove(this[d],a,b)}return this},delegate:function(a,b,d,f){return this.live(b,d,f,a)},undelegate:function(a,b,d){return arguments.length===0?this.unbind("live"):this.die(b,null,d,a)},trigger:function(a,b){return this.each(function(){c.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0]){a=c.Event(a);a.preventDefault();a.stopPropagation();c.event.trigger(a,b,this[0]);return a.result}},
toggle:function(a){for(var b=arguments,d=1;d<b.length;)c.proxy(a,b[d++]);return this.click(c.proxy(a,function(f){var e=(c.data(this,"lastToggle"+a.guid)||0)%d;c.data(this,"lastToggle"+a.guid,e+1);f.preventDefault();return b[e].apply(this,arguments)||false}))},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}});var Ga={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};c.each(["live","die"],function(a,b){c.fn[b]=function(d,f,e,j){var i,o=0,k,n,r=j||this.selector,
u=j?this:c(this.context);if(c.isFunction(f)){e=f;f=w}for(d=(d||"").split(" ");(i=d[o++])!=null;){j=O.exec(i);k="";if(j){k=j[0];i=i.replace(O,"")}if(i==="hover")d.push("mouseenter"+k,"mouseleave"+k);else{n=i;if(i==="focus"||i==="blur"){d.push(Ga[i]+k);i+=k}else i=(Ga[i]||i)+k;b==="live"?u.each(function(){c.event.add(this,pa(i,r),{data:f,selector:r,handler:e,origType:i,origHandler:e,preType:n})}):u.unbind(pa(i,r),e)}}return this}});c.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),
function(a,b){c.fn[b]=function(d){return d?this.bind(b,d):this.trigger(b)};if(c.attrFn)c.attrFn[b]=true});A.attachEvent&&!A.addEventListener&&A.attachEvent("onunload",function(){for(var a in c.cache)if(c.cache[a].handle)try{c.event.remove(c.cache[a].handle.elem)}catch(b){}});(function(){function a(g){for(var h="",l,m=0;g[m];m++){l=g[m];if(l.nodeType===3||l.nodeType===4)h+=l.nodeValue;else if(l.nodeType!==8)h+=a(l.childNodes)}return h}function b(g,h,l,m,q,p){q=0;for(var v=m.length;q<v;q++){var t=m[q];
if(t){t=t[g];for(var y=false;t;){if(t.sizcache===l){y=m[t.sizset];break}if(t.nodeType===1&&!p){t.sizcache=l;t.sizset=q}if(t.nodeName.toLowerCase()===h){y=t;break}t=t[g]}m[q]=y}}}function d(g,h,l,m,q,p){q=0;for(var v=m.length;q<v;q++){var t=m[q];if(t){t=t[g];for(var y=false;t;){if(t.sizcache===l){y=m[t.sizset];break}if(t.nodeType===1){if(!p){t.sizcache=l;t.sizset=q}if(typeof h!=="string"){if(t===h){y=true;break}}else if(k.filter(h,[t]).length>0){y=t;break}}t=t[g]}m[q]=y}}}var f=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^[\]]*\]|['"][^'"]*['"]|[^[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,
e=0,j=Object.prototype.toString,i=false,o=true;[0,0].sort(function(){o=false;return 0});var k=function(g,h,l,m){l=l||[];var q=h=h||s;if(h.nodeType!==1&&h.nodeType!==9)return[];if(!g||typeof g!=="string")return l;for(var p=[],v,t,y,S,H=true,M=x(h),I=g;(f.exec(""),v=f.exec(I))!==null;){I=v[3];p.push(v[1]);if(v[2]){S=v[3];break}}if(p.length>1&&r.exec(g))if(p.length===2&&n.relative[p[0]])t=ga(p[0]+p[1],h);else for(t=n.relative[p[0]]?[h]:k(p.shift(),h);p.length;){g=p.shift();if(n.relative[g])g+=p.shift();
t=ga(g,t)}else{if(!m&&p.length>1&&h.nodeType===9&&!M&&n.match.ID.test(p[0])&&!n.match.ID.test(p[p.length-1])){v=k.find(p.shift(),h,M);h=v.expr?k.filter(v.expr,v.set)[0]:v.set[0]}if(h){v=m?{expr:p.pop(),set:z(m)}:k.find(p.pop(),p.length===1&&(p[0]==="~"||p[0]==="+")&&h.parentNode?h.parentNode:h,M);t=v.expr?k.filter(v.expr,v.set):v.set;if(p.length>0)y=z(t);else H=false;for(;p.length;){var D=p.pop();v=D;if(n.relative[D])v=p.pop();else D="";if(v==null)v=h;n.relative[D](y,v,M)}}else y=[]}y||(y=t);y||k.error(D||
g);if(j.call(y)==="[object Array]")if(H)if(h&&h.nodeType===1)for(g=0;y[g]!=null;g++){if(y[g]&&(y[g]===true||y[g].nodeType===1&&E(h,y[g])))l.push(t[g])}else for(g=0;y[g]!=null;g++)y[g]&&y[g].nodeType===1&&l.push(t[g]);else l.push.apply(l,y);else z(y,l);if(S){k(S,q,l,m);k.uniqueSort(l)}return l};k.uniqueSort=function(g){if(B){i=o;g.sort(B);if(i)for(var h=1;h<g.length;h++)g[h]===g[h-1]&&g.splice(h--,1)}return g};k.matches=function(g,h){return k(g,null,null,h)};k.find=function(g,h,l){var m,q;if(!g)return[];
for(var p=0,v=n.order.length;p<v;p++){var t=n.order[p];if(q=n.leftMatch[t].exec(g)){var y=q[1];q.splice(1,1);if(y.substr(y.length-1)!=="\\"){q[1]=(q[1]||"").replace(/\\/g,"");m=n.find[t](q,h,l);if(m!=null){g=g.replace(n.match[t],"");break}}}}m||(m=h.getElementsByTagName("*"));return{set:m,expr:g}};k.filter=function(g,h,l,m){for(var q=g,p=[],v=h,t,y,S=h&&h[0]&&x(h[0]);g&&h.length;){for(var H in n.filter)if((t=n.leftMatch[H].exec(g))!=null&&t[2]){var M=n.filter[H],I,D;D=t[1];y=false;t.splice(1,1);if(D.substr(D.length-
1)!=="\\"){if(v===p)p=[];if(n.preFilter[H])if(t=n.preFilter[H](t,v,l,p,m,S)){if(t===true)continue}else y=I=true;if(t)for(var U=0;(D=v[U])!=null;U++)if(D){I=M(D,t,U,v);var Ha=m^!!I;if(l&&I!=null)if(Ha)y=true;else v[U]=false;else if(Ha){p.push(D);y=true}}if(I!==w){l||(v=p);g=g.replace(n.match[H],"");if(!y)return[];break}}}if(g===q)if(y==null)k.error(g);else break;q=g}return v};k.error=function(g){throw"Syntax error, unrecognized expression: "+g;};var n=k.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF-]|\\.)+)/,
CLASS:/\.((?:[\w\u00c0-\uFFFF-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(g){return g.getAttribute("href")}},
relative:{"+":function(g,h){var l=typeof h==="string",m=l&&!/\W/.test(h);l=l&&!m;if(m)h=h.toLowerCase();m=0;for(var q=g.length,p;m<q;m++)if(p=g[m]){for(;(p=p.previousSibling)&&p.nodeType!==1;);g[m]=l||p&&p.nodeName.toLowerCase()===h?p||false:p===h}l&&k.filter(h,g,true)},">":function(g,h){var l=typeof h==="string";if(l&&!/\W/.test(h)){h=h.toLowerCase();for(var m=0,q=g.length;m<q;m++){var p=g[m];if(p){l=p.parentNode;g[m]=l.nodeName.toLowerCase()===h?l:false}}}else{m=0;for(q=g.length;m<q;m++)if(p=g[m])g[m]=
l?p.parentNode:p.parentNode===h;l&&k.filter(h,g,true)}},"":function(g,h,l){var m=e++,q=d;if(typeof h==="string"&&!/\W/.test(h)){var p=h=h.toLowerCase();q=b}q("parentNode",h,m,g,p,l)},"~":function(g,h,l){var m=e++,q=d;if(typeof h==="string"&&!/\W/.test(h)){var p=h=h.toLowerCase();q=b}q("previousSibling",h,m,g,p,l)}},find:{ID:function(g,h,l){if(typeof h.getElementById!=="undefined"&&!l)return(g=h.getElementById(g[1]))?[g]:[]},NAME:function(g,h){if(typeof h.getElementsByName!=="undefined"){var l=[];
h=h.getElementsByName(g[1]);for(var m=0,q=h.length;m<q;m++)h[m].getAttribute("name")===g[1]&&l.push(h[m]);return l.length===0?null:l}},TAG:function(g,h){return h.getElementsByTagName(g[1])}},preFilter:{CLASS:function(g,h,l,m,q,p){g=" "+g[1].replace(/\\/g,"")+" ";if(p)return g;p=0;for(var v;(v=h[p])!=null;p++)if(v)if(q^(v.className&&(" "+v.className+" ").replace(/[\t\n]/g," ").indexOf(g)>=0))l||m.push(v);else if(l)h[p]=false;return false},ID:function(g){return g[1].replace(/\\/g,"")},TAG:function(g){return g[1].toLowerCase()},
CHILD:function(g){if(g[1]==="nth"){var h=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(g[2]==="even"&&"2n"||g[2]==="odd"&&"2n+1"||!/\D/.test(g[2])&&"0n+"+g[2]||g[2]);g[2]=h[1]+(h[2]||1)-0;g[3]=h[3]-0}g[0]=e++;return g},ATTR:function(g,h,l,m,q,p){h=g[1].replace(/\\/g,"");if(!p&&n.attrMap[h])g[1]=n.attrMap[h];if(g[2]==="~=")g[4]=" "+g[4]+" ";return g},PSEUDO:function(g,h,l,m,q){if(g[1]==="not")if((f.exec(g[3])||"").length>1||/^\w/.test(g[3]))g[3]=k(g[3],null,null,h);else{g=k.filter(g[3],h,l,true^q);l||m.push.apply(m,
g);return false}else if(n.match.POS.test(g[0])||n.match.CHILD.test(g[0]))return true;return g},POS:function(g){g.unshift(true);return g}},filters:{enabled:function(g){return g.disabled===false&&g.type!=="hidden"},disabled:function(g){return g.disabled===true},checked:function(g){return g.checked===true},selected:function(g){return g.selected===true},parent:function(g){return!!g.firstChild},empty:function(g){return!g.firstChild},has:function(g,h,l){return!!k(l[3],g).length},header:function(g){return/h\d/i.test(g.nodeName)},
text:function(g){return"text"===g.type},radio:function(g){return"radio"===g.type},checkbox:function(g){return"checkbox"===g.type},file:function(g){return"file"===g.type},password:function(g){return"password"===g.type},submit:function(g){return"submit"===g.type},image:function(g){return"image"===g.type},reset:function(g){return"reset"===g.type},button:function(g){return"button"===g.type||g.nodeName.toLowerCase()==="button"},input:function(g){return/input|select|textarea|button/i.test(g.nodeName)}},
setFilters:{first:function(g,h){return h===0},last:function(g,h,l,m){return h===m.length-1},even:function(g,h){return h%2===0},odd:function(g,h){return h%2===1},lt:function(g,h,l){return h<l[3]-0},gt:function(g,h,l){return h>l[3]-0},nth:function(g,h,l){return l[3]-0===h},eq:function(g,h,l){return l[3]-0===h}},filter:{PSEUDO:function(g,h,l,m){var q=h[1],p=n.filters[q];if(p)return p(g,l,h,m);else if(q==="contains")return(g.textContent||g.innerText||a([g])||"").indexOf(h[3])>=0;else if(q==="not"){h=
h[3];l=0;for(m=h.length;l<m;l++)if(h[l]===g)return false;return true}else k.error("Syntax error, unrecognized expression: "+q)},CHILD:function(g,h){var l=h[1],m=g;switch(l){case "only":case "first":for(;m=m.previousSibling;)if(m.nodeType===1)return false;if(l==="first")return true;m=g;case "last":for(;m=m.nextSibling;)if(m.nodeType===1)return false;return true;case "nth":l=h[2];var q=h[3];if(l===1&&q===0)return true;h=h[0];var p=g.parentNode;if(p&&(p.sizcache!==h||!g.nodeIndex)){var v=0;for(m=p.firstChild;m;m=
m.nextSibling)if(m.nodeType===1)m.nodeIndex=++v;p.sizcache=h}g=g.nodeIndex-q;return l===0?g===0:g%l===0&&g/l>=0}},ID:function(g,h){return g.nodeType===1&&g.getAttribute("id")===h},TAG:function(g,h){return h==="*"&&g.nodeType===1||g.nodeName.toLowerCase()===h},CLASS:function(g,h){return(" "+(g.className||g.getAttribute("class"))+" ").indexOf(h)>-1},ATTR:function(g,h){var l=h[1];g=n.attrHandle[l]?n.attrHandle[l](g):g[l]!=null?g[l]:g.getAttribute(l);l=g+"";var m=h[2];h=h[4];return g==null?m==="!=":m===
"="?l===h:m==="*="?l.indexOf(h)>=0:m==="~="?(" "+l+" ").indexOf(h)>=0:!h?l&&g!==false:m==="!="?l!==h:m==="^="?l.indexOf(h)===0:m==="$="?l.substr(l.length-h.length)===h:m==="|="?l===h||l.substr(0,h.length+1)===h+"-":false},POS:function(g,h,l,m){var q=n.setFilters[h[2]];if(q)return q(g,l,h,m)}}},r=n.match.POS;for(var u in n.match){n.match[u]=new RegExp(n.match[u].source+/(?![^\[]*\])(?![^\(]*\))/.source);n.leftMatch[u]=new RegExp(/(^(?:.|\r|\n)*?)/.source+n.match[u].source.replace(/\\(\d+)/g,function(g,
h){return"\\"+(h-0+1)}))}var z=function(g,h){g=Array.prototype.slice.call(g,0);if(h){h.push.apply(h,g);return h}return g};try{Array.prototype.slice.call(s.documentElement.childNodes,0)}catch(C){z=function(g,h){h=h||[];if(j.call(g)==="[object Array]")Array.prototype.push.apply(h,g);else if(typeof g.length==="number")for(var l=0,m=g.length;l<m;l++)h.push(g[l]);else for(l=0;g[l];l++)h.push(g[l]);return h}}var B;if(s.documentElement.compareDocumentPosition)B=function(g,h){if(!g.compareDocumentPosition||
!h.compareDocumentPosition){if(g==h)i=true;return g.compareDocumentPosition?-1:1}g=g.compareDocumentPosition(h)&4?-1:g===h?0:1;if(g===0)i=true;return g};else if("sourceIndex"in s.documentElement)B=function(g,h){if(!g.sourceIndex||!h.sourceIndex){if(g==h)i=true;return g.sourceIndex?-1:1}g=g.sourceIndex-h.sourceIndex;if(g===0)i=true;return g};else if(s.createRange)B=function(g,h){if(!g.ownerDocument||!h.ownerDocument){if(g==h)i=true;return g.ownerDocument?-1:1}var l=g.ownerDocument.createRange(),m=
h.ownerDocument.createRange();l.setStart(g,0);l.setEnd(g,0);m.setStart(h,0);m.setEnd(h,0);g=l.compareBoundaryPoints(Range.START_TO_END,m);if(g===0)i=true;return g};(function(){var g=s.createElement("div"),h="script"+(new Date).getTime();g.innerHTML="<a name='"+h+"'/>";var l=s.documentElement;l.insertBefore(g,l.firstChild);if(s.getElementById(h)){n.find.ID=function(m,q,p){if(typeof q.getElementById!=="undefined"&&!p)return(q=q.getElementById(m[1]))?q.id===m[1]||typeof q.getAttributeNode!=="undefined"&&
q.getAttributeNode("id").nodeValue===m[1]?[q]:w:[]};n.filter.ID=function(m,q){var p=typeof m.getAttributeNode!=="undefined"&&m.getAttributeNode("id");return m.nodeType===1&&p&&p.nodeValue===q}}l.removeChild(g);l=g=null})();(function(){var g=s.createElement("div");g.appendChild(s.createComment(""));if(g.getElementsByTagName("*").length>0)n.find.TAG=function(h,l){l=l.getElementsByTagName(h[1]);if(h[1]==="*"){h=[];for(var m=0;l[m];m++)l[m].nodeType===1&&h.push(l[m]);l=h}return l};g.innerHTML="<a href='#'></a>";
if(g.firstChild&&typeof g.firstChild.getAttribute!=="undefined"&&g.firstChild.getAttribute("href")!=="#")n.attrHandle.href=function(h){return h.getAttribute("href",2)};g=null})();s.querySelectorAll&&function(){var g=k,h=s.createElement("div");h.innerHTML="<p class='TEST'></p>";if(!(h.querySelectorAll&&h.querySelectorAll(".TEST").length===0)){k=function(m,q,p,v){q=q||s;if(!v&&q.nodeType===9&&!x(q))try{return z(q.querySelectorAll(m),p)}catch(t){}return g(m,q,p,v)};for(var l in g)k[l]=g[l];h=null}}();
(function(){var g=s.createElement("div");g.innerHTML="<div class='test e'></div><div class='test'></div>";if(!(!g.getElementsByClassName||g.getElementsByClassName("e").length===0)){g.lastChild.className="e";if(g.getElementsByClassName("e").length!==1){n.order.splice(1,0,"CLASS");n.find.CLASS=function(h,l,m){if(typeof l.getElementsByClassName!=="undefined"&&!m)return l.getElementsByClassName(h[1])};g=null}}})();var E=s.compareDocumentPosition?function(g,h){return!!(g.compareDocumentPosition(h)&16)}:
function(g,h){return g!==h&&(g.contains?g.contains(h):true)},x=function(g){return(g=(g?g.ownerDocument||g:0).documentElement)?g.nodeName!=="HTML":false},ga=function(g,h){var l=[],m="",q;for(h=h.nodeType?[h]:h;q=n.match.PSEUDO.exec(g);){m+=q[0];g=g.replace(n.match.PSEUDO,"")}g=n.relative[g]?g+"*":g;q=0;for(var p=h.length;q<p;q++)k(g,h[q],l);return k.filter(m,l)};c.find=k;c.expr=k.selectors;c.expr[":"]=c.expr.filters;c.unique=k.uniqueSort;c.text=a;c.isXMLDoc=x;c.contains=E})();var eb=/Until$/,fb=/^(?:parents|prevUntil|prevAll)/,
gb=/,/;R=Array.prototype.slice;var Ia=function(a,b,d){if(c.isFunction(b))return c.grep(a,function(e,j){return!!b.call(e,j,e)===d});else if(b.nodeType)return c.grep(a,function(e){return e===b===d});else if(typeof b==="string"){var f=c.grep(a,function(e){return e.nodeType===1});if(Ua.test(b))return c.filter(b,f,!d);else b=c.filter(b,f)}return c.grep(a,function(e){return c.inArray(e,b)>=0===d})};c.fn.extend({find:function(a){for(var b=this.pushStack("","find",a),d=0,f=0,e=this.length;f<e;f++){d=b.length;
c.find(a,this[f],b);if(f>0)for(var j=d;j<b.length;j++)for(var i=0;i<d;i++)if(b[i]===b[j]){b.splice(j--,1);break}}return b},has:function(a){var b=c(a);return this.filter(function(){for(var d=0,f=b.length;d<f;d++)if(c.contains(this,b[d]))return true})},not:function(a){return this.pushStack(Ia(this,a,false),"not",a)},filter:function(a){return this.pushStack(Ia(this,a,true),"filter",a)},is:function(a){return!!a&&c.filter(a,this).length>0},closest:function(a,b){if(c.isArray(a)){var d=[],f=this[0],e,j=
{},i;if(f&&a.length){e=0;for(var o=a.length;e<o;e++){i=a[e];j[i]||(j[i]=c.expr.match.POS.test(i)?c(i,b||this.context):i)}for(;f&&f.ownerDocument&&f!==b;){for(i in j){e=j[i];if(e.jquery?e.index(f)>-1:c(f).is(e)){d.push({selector:i,elem:f});delete j[i]}}f=f.parentNode}}return d}var k=c.expr.match.POS.test(a)?c(a,b||this.context):null;return this.map(function(n,r){for(;r&&r.ownerDocument&&r!==b;){if(k?k.index(r)>-1:c(r).is(a))return r;r=r.parentNode}return null})},index:function(a){if(!a||typeof a===
"string")return c.inArray(this[0],a?c(a):this.parent().children());return c.inArray(a.jquery?a[0]:a,this)},add:function(a,b){a=typeof a==="string"?c(a,b||this.context):c.makeArray(a);b=c.merge(this.get(),a);return this.pushStack(qa(a[0])||qa(b[0])?b:c.unique(b))},andSelf:function(){return this.add(this.prevObject)}});c.each({parent:function(a){return(a=a.parentNode)&&a.nodeType!==11?a:null},parents:function(a){return c.dir(a,"parentNode")},parentsUntil:function(a,b,d){return c.dir(a,"parentNode",
d)},next:function(a){return c.nth(a,2,"nextSibling")},prev:function(a){return c.nth(a,2,"previousSibling")},nextAll:function(a){return c.dir(a,"nextSibling")},prevAll:function(a){return c.dir(a,"previousSibling")},nextUntil:function(a,b,d){return c.dir(a,"nextSibling",d)},prevUntil:function(a,b,d){return c.dir(a,"previousSibling",d)},siblings:function(a){return c.sibling(a.parentNode.firstChild,a)},children:function(a){return c.sibling(a.firstChild)},contents:function(a){return c.nodeName(a,"iframe")?
a.contentDocument||a.contentWindow.document:c.makeArray(a.childNodes)}},function(a,b){c.fn[a]=function(d,f){var e=c.map(this,b,d);eb.test(a)||(f=d);if(f&&typeof f==="string")e=c.filter(f,e);e=this.length>1?c.unique(e):e;if((this.length>1||gb.test(f))&&fb.test(a))e=e.reverse();return this.pushStack(e,a,R.call(arguments).join(","))}});c.extend({filter:function(a,b,d){if(d)a=":not("+a+")";return c.find.matches(a,b)},dir:function(a,b,d){var f=[];for(a=a[b];a&&a.nodeType!==9&&(d===w||a.nodeType!==1||!c(a).is(d));){a.nodeType===
1&&f.push(a);a=a[b]}return f},nth:function(a,b,d){b=b||1;for(var f=0;a;a=a[d])if(a.nodeType===1&&++f===b)break;return a},sibling:function(a,b){for(var d=[];a;a=a.nextSibling)a.nodeType===1&&a!==b&&d.push(a);return d}});var Ja=/ jQuery\d+="(?:\d+|null)"/g,V=/^\s+/,Ka=/(<([\w:]+)[^>]*?)\/>/g,hb=/^(?:area|br|col|embed|hr|img|input|link|meta|param)$/i,La=/<([\w:]+)/,ib=/<tbody/i,jb=/<|&#?\w+;/,ta=/<script|<object|<embed|<option|<style/i,ua=/checked\s*(?:[^=]|=\s*.checked.)/i,Ma=function(a,b,d){return hb.test(d)?
a:b+"></"+d+">"},F={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};F.optgroup=F.option;F.tbody=F.tfoot=F.colgroup=F.caption=F.thead;F.th=F.td;if(!c.support.htmlSerialize)F._default=[1,"div<div>","</div>"];c.fn.extend({text:function(a){if(c.isFunction(a))return this.each(function(b){var d=
c(this);d.text(a.call(this,b,d.text()))});if(typeof a!=="object"&&a!==w)return this.empty().append((this[0]&&this[0].ownerDocument||s).createTextNode(a));return c.text(this)},wrapAll:function(a){if(c.isFunction(a))return this.each(function(d){c(this).wrapAll(a.call(this,d))});if(this[0]){var b=c(a,this[0].ownerDocument).eq(0).clone(true);this[0].parentNode&&b.insertBefore(this[0]);b.map(function(){for(var d=this;d.firstChild&&d.firstChild.nodeType===1;)d=d.firstChild;return d}).append(this)}return this},
wrapInner:function(a){if(c.isFunction(a))return this.each(function(b){c(this).wrapInner(a.call(this,b))});return this.each(function(){var b=c(this),d=b.contents();d.length?d.wrapAll(a):b.append(a)})},wrap:function(a){return this.each(function(){c(this).wrapAll(a)})},unwrap:function(){return this.parent().each(function(){c.nodeName(this,"body")||c(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,true,function(a){this.nodeType===1&&this.appendChild(a)})},
prepend:function(){return this.domManip(arguments,true,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,false,function(b){this.parentNode.insertBefore(b,this)});else if(arguments.length){var a=c(arguments[0]);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,false,function(b){this.parentNode.insertBefore(b,
this.nextSibling)});else if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,c(arguments[0]).toArray());return a}},remove:function(a,b){for(var d=0,f;(f=this[d])!=null;d++)if(!a||c.filter(a,[f]).length){if(!b&&f.nodeType===1){c.cleanData(f.getElementsByTagName("*"));c.cleanData([f])}f.parentNode&&f.parentNode.removeChild(f)}return this},empty:function(){for(var a=0,b;(b=this[a])!=null;a++)for(b.nodeType===1&&c.cleanData(b.getElementsByTagName("*"));b.firstChild;)b.removeChild(b.firstChild);
return this},clone:function(a){var b=this.map(function(){if(!c.support.noCloneEvent&&!c.isXMLDoc(this)){var d=this.outerHTML,f=this.ownerDocument;if(!d){d=f.createElement("div");d.appendChild(this.cloneNode(true));d=d.innerHTML}return c.clean([d.replace(Ja,"").replace(/=([^="'>\s]+\/)>/g,'="$1">').replace(V,"")],f)[0]}else return this.cloneNode(true)});if(a===true){ra(this,b);ra(this.find("*"),b.find("*"))}return b},html:function(a){if(a===w)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(Ja,
""):null;else if(typeof a==="string"&&!ta.test(a)&&(c.support.leadingWhitespace||!V.test(a))&&!F[(La.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Ka,Ma);try{for(var b=0,d=this.length;b<d;b++)if(this[b].nodeType===1){c.cleanData(this[b].getElementsByTagName("*"));this[b].innerHTML=a}}catch(f){this.empty().append(a)}}else c.isFunction(a)?this.each(function(e){var j=c(this),i=j.html();j.empty().append(function(){return a.call(this,e,i)})}):this.empty().append(a);return this},replaceWith:function(a){if(this[0]&&
this[0].parentNode){if(c.isFunction(a))return this.each(function(b){var d=c(this),f=d.html();d.replaceWith(a.call(this,b,f))});if(typeof a!=="string")a=c(a).detach();return this.each(function(){var b=this.nextSibling,d=this.parentNode;c(this).remove();b?c(b).before(a):c(d).append(a)})}else return this.pushStack(c(c.isFunction(a)?a():a),"replaceWith",a)},detach:function(a){return this.remove(a,true)},domManip:function(a,b,d){function f(u){return c.nodeName(u,"table")?u.getElementsByTagName("tbody")[0]||
u.appendChild(u.ownerDocument.createElement("tbody")):u}var e,j,i=a[0],o=[],k;if(!c.support.checkClone&&arguments.length===3&&typeof i==="string"&&ua.test(i))return this.each(function(){c(this).domManip(a,b,d,true)});if(c.isFunction(i))return this.each(function(u){var z=c(this);a[0]=i.call(this,u,b?z.html():w);z.domManip(a,b,d)});if(this[0]){e=i&&i.parentNode;e=c.support.parentNode&&e&&e.nodeType===11&&e.childNodes.length===this.length?{fragment:e}:sa(a,this,o);k=e.fragment;if(j=k.childNodes.length===
1?(k=k.firstChild):k.firstChild){b=b&&c.nodeName(j,"tr");for(var n=0,r=this.length;n<r;n++)d.call(b?f(this[n],j):this[n],n>0||e.cacheable||this.length>1?k.cloneNode(true):k)}o.length&&c.each(o,Qa)}return this}});c.fragments={};c.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){c.fn[a]=function(d){var f=[];d=c(d);var e=this.length===1&&this[0].parentNode;if(e&&e.nodeType===11&&e.childNodes.length===1&&d.length===1){d[b](this[0]);
return this}else{e=0;for(var j=d.length;e<j;e++){var i=(e>0?this.clone(true):this).get();c.fn[b].apply(c(d[e]),i);f=f.concat(i)}return this.pushStack(f,a,d.selector)}}});c.extend({clean:function(a,b,d,f){b=b||s;if(typeof b.createElement==="undefined")b=b.ownerDocument||b[0]&&b[0].ownerDocument||s;for(var e=[],j=0,i;(i=a[j])!=null;j++){if(typeof i==="number")i+="";if(i){if(typeof i==="string"&&!jb.test(i))i=b.createTextNode(i);else if(typeof i==="string"){i=i.replace(Ka,Ma);var o=(La.exec(i)||["",
""])[1].toLowerCase(),k=F[o]||F._default,n=k[0],r=b.createElement("div");for(r.innerHTML=k[1]+i+k[2];n--;)r=r.lastChild;if(!c.support.tbody){n=ib.test(i);o=o==="table"&&!n?r.firstChild&&r.firstChild.childNodes:k[1]==="<table>"&&!n?r.childNodes:[];for(k=o.length-1;k>=0;--k)c.nodeName(o[k],"tbody")&&!o[k].childNodes.length&&o[k].parentNode.removeChild(o[k])}!c.support.leadingWhitespace&&V.test(i)&&r.insertBefore(b.createTextNode(V.exec(i)[0]),r.firstChild);i=r.childNodes}if(i.nodeType)e.push(i);else e=
c.merge(e,i)}}if(d)for(j=0;e[j];j++)if(f&&c.nodeName(e[j],"script")&&(!e[j].type||e[j].type.toLowerCase()==="text/javascript"))f.push(e[j].parentNode?e[j].parentNode.removeChild(e[j]):e[j]);else{e[j].nodeType===1&&e.splice.apply(e,[j+1,0].concat(c.makeArray(e[j].getElementsByTagName("script"))));d.appendChild(e[j])}return e},cleanData:function(a){for(var b,d,f=c.cache,e=c.event.special,j=c.support.deleteExpando,i=0,o;(o=a[i])!=null;i++)if(d=o[c.expando]){b=f[d];if(b.events)for(var k in b.events)e[k]?
c.event.remove(o,k):Ca(o,k,b.handle);if(j)delete o[c.expando];else o.removeAttribute&&o.removeAttribute(c.expando);delete f[d]}}});var kb=/z-?index|font-?weight|opacity|zoom|line-?height/i,Na=/alpha\([^)]*\)/,Oa=/opacity=([^)]*)/,ha=/float/i,ia=/-([a-z])/ig,lb=/([A-Z])/g,mb=/^-?\d+(?:px)?$/i,nb=/^-?\d/,ob={position:"absolute",visibility:"hidden",display:"block"},pb=["Left","Right"],qb=["Top","Bottom"],rb=s.defaultView&&s.defaultView.getComputedStyle,Pa=c.support.cssFloat?"cssFloat":"styleFloat",ja=
function(a,b){return b.toUpperCase()};c.fn.css=function(a,b){return X(this,a,b,true,function(d,f,e){if(e===w)return c.curCSS(d,f);if(typeof e==="number"&&!kb.test(f))e+="px";c.style(d,f,e)})};c.extend({style:function(a,b,d){if(!a||a.nodeType===3||a.nodeType===8)return w;if((b==="width"||b==="height")&&parseFloat(d)<0)d=w;var f=a.style||a,e=d!==w;if(!c.support.opacity&&b==="opacity"){if(e){f.zoom=1;b=parseInt(d,10)+""==="NaN"?"":"alpha(opacity="+d*100+")";a=f.filter||c.curCSS(a,"filter")||"";f.filter=
Na.test(a)?a.replace(Na,b):b}return f.filter&&f.filter.indexOf("opacity=")>=0?parseFloat(Oa.exec(f.filter)[1])/100+"":""}if(ha.test(b))b=Pa;b=b.replace(ia,ja);if(e)f[b]=d;return f[b]},css:function(a,b,d,f){if(b==="width"||b==="height"){var e,j=b==="width"?pb:qb;function i(){e=b==="width"?a.offsetWidth:a.offsetHeight;f!=="border"&&c.each(j,function(){f||(e-=parseFloat(c.curCSS(a,"padding"+this,true))||0);if(f==="margin")e+=parseFloat(c.curCSS(a,"margin"+this,true))||0;else e-=parseFloat(c.curCSS(a,
"border"+this+"Width",true))||0})}a.offsetWidth!==0?i():c.swap(a,ob,i);return Math.max(0,Math.round(e))}return c.curCSS(a,b,d)},curCSS:function(a,b,d){var f,e=a.style;if(!c.support.opacity&&b==="opacity"&&a.currentStyle){f=Oa.test(a.currentStyle.filter||"")?parseFloat(RegExp.$1)/100+"":"";return f===""?"1":f}if(ha.test(b))b=Pa;if(!d&&e&&e[b])f=e[b];else if(rb){if(ha.test(b))b="float";b=b.replace(lb,"-$1").toLowerCase();e=a.ownerDocument.defaultView;if(!e)return null;if(a=e.getComputedStyle(a,null))f=
a.getPropertyValue(b);if(b==="opacity"&&f==="")f="1"}else if(a.currentStyle){d=b.replace(ia,ja);f=a.currentStyle[b]||a.currentStyle[d];if(!mb.test(f)&&nb.test(f)){b=e.left;var j=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;e.left=d==="fontSize"?"1em":f||0;f=e.pixelLeft+"px";e.left=b;a.runtimeStyle.left=j}}return f},swap:function(a,b,d){var f={};for(var e in b){f[e]=a.style[e];a.style[e]=b[e]}d.call(a);for(e in b)a.style[e]=f[e]}});if(c.expr&&c.expr.filters){c.expr.filters.hidden=function(a){var b=
a.offsetWidth,d=a.offsetHeight,f=a.nodeName.toLowerCase()==="tr";return b===0&&d===0&&!f?true:b>0&&d>0&&!f?false:c.curCSS(a,"display")==="none"};c.expr.filters.visible=function(a){return!c.expr.filters.hidden(a)}}var sb=J(),tb=/<script(.|\s)*?\/script>/gi,ub=/select|textarea/i,vb=/color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week/i,N=/=\?(&|$)/,ka=/\?/,wb=/(\?|&)_=.*?(&|$)/,xb=/^(\w+:)?\/\/([^\/?#]+)/,yb=/%20/g,zb=c.fn.load;c.fn.extend({load:function(a,b,d){if(typeof a!==
"string")return zb.call(this,a);else if(!this.length)return this;var f=a.indexOf(" ");if(f>=0){var e=a.slice(f,a.length);a=a.slice(0,f)}f="GET";if(b)if(c.isFunction(b)){d=b;b=null}else if(typeof b==="object"){b=c.param(b,c.ajaxSettings.traditional);f="POST"}var j=this;c.ajax({url:a,type:f,dataType:"html",data:b,complete:function(i,o){if(o==="success"||o==="notmodified")j.html(e?c("<div />").append(i.responseText.replace(tb,"")).find(e):i.responseText);d&&j.each(d,[i.responseText,o,i])}});return this},
serialize:function(){return c.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?c.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||ub.test(this.nodeName)||vb.test(this.type))}).map(function(a,b){a=c(this).val();return a==null?null:c.isArray(a)?c.map(a,function(d){return{name:b.name,value:d}}):{name:b.name,value:a}}).get()}});c.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),
function(a,b){c.fn[b]=function(d){return this.bind(b,d)}});c.extend({get:function(a,b,d,f){if(c.isFunction(b)){f=f||d;d=b;b=null}return c.ajax({type:"GET",url:a,data:b,success:d,dataType:f})},getScript:function(a,b){return c.get(a,null,b,"script")},getJSON:function(a,b,d){return c.get(a,b,d,"json")},post:function(a,b,d,f){if(c.isFunction(b)){f=f||d;d=b;b={}}return c.ajax({type:"POST",url:a,data:b,success:d,dataType:f})},ajaxSetup:function(a){c.extend(c.ajaxSettings,a)},ajaxSettings:{url:location.href,
global:true,type:"GET",contentType:"application/x-www-form-urlencoded",processData:true,async:true,xhr:A.XMLHttpRequest&&(A.location.protocol!=="file:"||!A.ActiveXObject)?function(){return new A.XMLHttpRequest}:function(){try{return new A.ActiveXObject("Microsoft.XMLHTTP")}catch(a){}},accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}},lastModified:{},etag:{},ajax:function(a){function b(){e.success&&
e.success.call(k,o,i,x);e.global&&f("ajaxSuccess",[x,e])}function d(){e.complete&&e.complete.call(k,x,i);e.global&&f("ajaxComplete",[x,e]);e.global&&!--c.active&&c.event.trigger("ajaxStop")}function f(q,p){(e.context?c(e.context):c.event).trigger(q,p)}var e=c.extend(true,{},c.ajaxSettings,a),j,i,o,k=a&&a.context||e,n=e.type.toUpperCase();if(e.data&&e.processData&&typeof e.data!=="string")e.data=c.param(e.data,e.traditional);if(e.dataType==="jsonp"){if(n==="GET")N.test(e.url)||(e.url+=(ka.test(e.url)?
"&":"?")+(e.jsonp||"callback")+"=?");else if(!e.data||!N.test(e.data))e.data=(e.data?e.data+"&":"")+(e.jsonp||"callback")+"=?";e.dataType="json"}if(e.dataType==="json"&&(e.data&&N.test(e.data)||N.test(e.url))){j=e.jsonpCallback||"jsonp"+sb++;if(e.data)e.data=(e.data+"").replace(N,"="+j+"$1");e.url=e.url.replace(N,"="+j+"$1");e.dataType="script";A[j]=A[j]||function(q){o=q;b();d();A[j]=w;try{delete A[j]}catch(p){}z&&z.removeChild(C)}}if(e.dataType==="script"&&e.cache===null)e.cache=false;if(e.cache===
false&&n==="GET"){var r=J(),u=e.url.replace(wb,"$1_="+r+"$2");e.url=u+(u===e.url?(ka.test(e.url)?"&":"?")+"_="+r:"")}if(e.data&&n==="GET")e.url+=(ka.test(e.url)?"&":"?")+e.data;e.global&&!c.active++&&c.event.trigger("ajaxStart");r=(r=xb.exec(e.url))&&(r[1]&&r[1]!==location.protocol||r[2]!==location.host);if(e.dataType==="script"&&n==="GET"&&r){var z=s.getElementsByTagName("head")[0]||s.documentElement,C=s.createElement("script");C.src=e.url;if(e.scriptCharset)C.charset=e.scriptCharset;if(!j){var B=
false;C.onload=C.onreadystatechange=function(){if(!B&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){B=true;b();d();C.onload=C.onreadystatechange=null;z&&C.parentNode&&z.removeChild(C)}}}z.insertBefore(C,z.firstChild);return w}var E=false,x=e.xhr();if(x){e.username?x.open(n,e.url,e.async,e.username,e.password):x.open(n,e.url,e.async);try{if(e.data||a&&a.contentType)x.setRequestHeader("Content-Type",e.contentType);if(e.ifModified){c.lastModified[e.url]&&x.setRequestHeader("If-Modified-Since",
c.lastModified[e.url]);c.etag[e.url]&&x.setRequestHeader("If-None-Match",c.etag[e.url])}r||x.setRequestHeader("X-Requested-With","XMLHttpRequest");x.setRequestHeader("Accept",e.dataType&&e.accepts[e.dataType]?e.accepts[e.dataType]+", */*":e.accepts._default)}catch(ga){}if(e.beforeSend&&e.beforeSend.call(k,x,e)===false){e.global&&!--c.active&&c.event.trigger("ajaxStop");x.abort();return false}e.global&&f("ajaxSend",[x,e]);var g=x.onreadystatechange=function(q){if(!x||x.readyState===0||q==="abort"){E||
d();E=true;if(x)x.onreadystatechange=c.noop}else if(!E&&x&&(x.readyState===4||q==="timeout")){E=true;x.onreadystatechange=c.noop;i=q==="timeout"?"timeout":!c.httpSuccess(x)?"error":e.ifModified&&c.httpNotModified(x,e.url)?"notmodified":"success";var p;if(i==="success")try{o=c.httpData(x,e.dataType,e)}catch(v){i="parsererror";p=v}if(i==="success"||i==="notmodified")j||b();else c.handleError(e,x,i,p);d();q==="timeout"&&x.abort();if(e.async)x=null}};try{var h=x.abort;x.abort=function(){x&&h.call(x);
g("abort")}}catch(l){}e.async&&e.timeout>0&&setTimeout(function(){x&&!E&&g("timeout")},e.timeout);try{x.send(n==="POST"||n==="PUT"||n==="DELETE"?e.data:null)}catch(m){c.handleError(e,x,null,m);d()}e.async||g();return x}},handleError:function(a,b,d,f){if(a.error)a.error.call(a.context||a,b,d,f);if(a.global)(a.context?c(a.context):c.event).trigger("ajaxError",[b,a,f])},active:0,httpSuccess:function(a){try{return!a.status&&location.protocol==="file:"||a.status>=200&&a.status<300||a.status===304||a.status===
1223||a.status===0}catch(b){}return false},httpNotModified:function(a,b){var d=a.getResponseHeader("Last-Modified"),f=a.getResponseHeader("Etag");if(d)c.lastModified[b]=d;if(f)c.etag[b]=f;return a.status===304||a.status===0},httpData:function(a,b,d){var f=a.getResponseHeader("content-type")||"",e=b==="xml"||!b&&f.indexOf("xml")>=0;a=e?a.responseXML:a.responseText;e&&a.documentElement.nodeName==="parsererror"&&c.error("parsererror");if(d&&d.dataFilter)a=d.dataFilter(a,b);if(typeof a==="string")if(b===
"json"||!b&&f.indexOf("json")>=0)a=c.parseJSON(a);else if(b==="script"||!b&&f.indexOf("javascript")>=0)c.globalEval(a);return a},param:function(a,b){function d(i,o){if(c.isArray(o))c.each(o,function(k,n){b||/\[\]$/.test(i)?f(i,n):d(i+"["+(typeof n==="object"||c.isArray(n)?k:"")+"]",n)});else!b&&o!=null&&typeof o==="object"?c.each(o,function(k,n){d(i+"["+k+"]",n)}):f(i,o)}function f(i,o){o=c.isFunction(o)?o():o;e[e.length]=encodeURIComponent(i)+"="+encodeURIComponent(o)}var e=[];if(b===w)b=c.ajaxSettings.traditional;
if(c.isArray(a)||a.jquery)c.each(a,function(){f(this.name,this.value)});else for(var j in a)d(j,a[j]);return e.join("&").replace(yb,"+")}});var la={},Ab=/toggle|show|hide/,Bb=/^([+-]=)?([\d+-.]+)(.*)$/,W,va=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];c.fn.extend({show:function(a,b){if(a||a===0)return this.animate(K("show",3),a,b);else{a=0;for(b=this.length;a<b;a++){var d=c.data(this[a],"olddisplay");
this[a].style.display=d||"";if(c.css(this[a],"display")==="none"){d=this[a].nodeName;var f;if(la[d])f=la[d];else{var e=c("<"+d+" />").appendTo("body");f=e.css("display");if(f==="none")f="block";e.remove();la[d]=f}c.data(this[a],"olddisplay",f)}}a=0;for(b=this.length;a<b;a++)this[a].style.display=c.data(this[a],"olddisplay")||"";return this}},hide:function(a,b){if(a||a===0)return this.animate(K("hide",3),a,b);else{a=0;for(b=this.length;a<b;a++){var d=c.data(this[a],"olddisplay");!d&&d!=="none"&&c.data(this[a],
"olddisplay",c.css(this[a],"display"))}a=0;for(b=this.length;a<b;a++)this[a].style.display="none";return this}},_toggle:c.fn.toggle,toggle:function(a,b){var d=typeof a==="boolean";if(c.isFunction(a)&&c.isFunction(b))this._toggle.apply(this,arguments);else a==null||d?this.each(function(){var f=d?a:c(this).is(":hidden");c(this)[f?"show":"hide"]()}):this.animate(K("toggle",3),a,b);return this},fadeTo:function(a,b,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,d)},
animate:function(a,b,d,f){var e=c.speed(b,d,f);if(c.isEmptyObject(a))return this.each(e.complete);return this[e.queue===false?"each":"queue"](function(){var j=c.extend({},e),i,o=this.nodeType===1&&c(this).is(":hidden"),k=this;for(i in a){var n=i.replace(ia,ja);if(i!==n){a[n]=a[i];delete a[i];i=n}if(a[i]==="hide"&&o||a[i]==="show"&&!o)return j.complete.call(this);if((i==="height"||i==="width")&&this.style){j.display=c.css(this,"display");j.overflow=this.style.overflow}if(c.isArray(a[i])){(j.specialEasing=
j.specialEasing||{})[i]=a[i][1];a[i]=a[i][0]}}if(j.overflow!=null)this.style.overflow="hidden";j.curAnim=c.extend({},a);c.each(a,function(r,u){var z=new c.fx(k,j,r);if(Ab.test(u))z[u==="toggle"?o?"show":"hide":u](a);else{var C=Bb.exec(u),B=z.cur(true)||0;if(C){u=parseFloat(C[2]);var E=C[3]||"px";if(E!=="px"){k.style[r]=(u||1)+E;B=(u||1)/z.cur(true)*B;k.style[r]=B+E}if(C[1])u=(C[1]==="-="?-1:1)*u+B;z.custom(B,u,E)}else z.custom(B,u,"")}});return true})},stop:function(a,b){var d=c.timers;a&&this.queue([]);
this.each(function(){for(var f=d.length-1;f>=0;f--)if(d[f].elem===this){b&&d[f](true);d.splice(f,1)}});b||this.dequeue();return this}});c.each({slideDown:K("show",1),slideUp:K("hide",1),slideToggle:K("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"}},function(a,b){c.fn[a]=function(d,f){return this.animate(b,d,f)}});c.extend({speed:function(a,b,d){var f=a&&typeof a==="object"?a:{complete:d||!d&&b||c.isFunction(a)&&a,duration:a,easing:d&&b||b&&!c.isFunction(b)&&b};f.duration=c.fx.off?0:typeof f.duration===
"number"?f.duration:c.fx.speeds[f.duration]||c.fx.speeds._default;f.old=f.complete;f.complete=function(){f.queue!==false&&c(this).dequeue();c.isFunction(f.old)&&f.old.call(this)};return f},easing:{linear:function(a,b,d,f){return d+f*a},swing:function(a,b,d,f){return(-Math.cos(a*Math.PI)/2+0.5)*f+d}},timers:[],fx:function(a,b,d){this.options=b;this.elem=a;this.prop=d;if(!b.orig)b.orig={}}});c.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this);(c.fx.step[this.prop]||
c.fx.step._default)(this);if((this.prop==="height"||this.prop==="width")&&this.elem.style)this.elem.style.display="block"},cur:function(a){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];return(a=parseFloat(c.css(this.elem,this.prop,a)))&&a>-10000?a:parseFloat(c.curCSS(this.elem,this.prop))||0},custom:function(a,b,d){function f(j){return e.step(j)}this.startTime=J();this.start=a;this.end=b;this.unit=d||this.unit||"px";this.now=this.start;
this.pos=this.state=0;var e=this;f.elem=this.elem;if(f()&&c.timers.push(f)&&!W)W=setInterval(c.fx.tick,13)},show:function(){this.options.orig[this.prop]=c.style(this.elem,this.prop);this.options.show=true;this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur());c(this.elem).show()},hide:function(){this.options.orig[this.prop]=c.style(this.elem,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(a){var b=J(),d=true;if(a||b>=this.options.duration+this.startTime){this.now=
this.end;this.pos=this.state=1;this.update();this.options.curAnim[this.prop]=true;for(var f in this.options.curAnim)if(this.options.curAnim[f]!==true)d=false;if(d){if(this.options.display!=null){this.elem.style.overflow=this.options.overflow;a=c.data(this.elem,"olddisplay");this.elem.style.display=a?a:this.options.display;if(c.css(this.elem,"display")==="none")this.elem.style.display="block"}this.options.hide&&c(this.elem).hide();if(this.options.hide||this.options.show)for(var e in this.options.curAnim)c.style(this.elem,
e,this.options.orig[e]);this.options.complete.call(this.elem)}return false}else{e=b-this.startTime;this.state=e/this.options.duration;a=this.options.easing||(c.easing.swing?"swing":"linear");this.pos=c.easing[this.options.specialEasing&&this.options.specialEasing[this.prop]||a](this.state,e,0,1,this.options.duration);this.now=this.start+(this.end-this.start)*this.pos;this.update()}return true}};c.extend(c.fx,{tick:function(){for(var a=c.timers,b=0;b<a.length;b++)a[b]()||a.splice(b--,1);a.length||
c.fx.stop()},stop:function(){clearInterval(W);W=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){c.style(a.elem,"opacity",a.now)},_default:function(a){if(a.elem.style&&a.elem.style[a.prop]!=null)a.elem.style[a.prop]=(a.prop==="width"||a.prop==="height"?Math.max(0,a.now):a.now)+a.unit;else a.elem[a.prop]=a.now}}});if(c.expr&&c.expr.filters)c.expr.filters.animated=function(a){return c.grep(c.timers,function(b){return a===b.elem}).length};c.fn.offset="getBoundingClientRect"in s.documentElement?
function(a){var b=this[0];if(a)return this.each(function(e){c.offset.setOffset(this,a,e)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return c.offset.bodyOffset(b);var d=b.getBoundingClientRect(),f=b.ownerDocument;b=f.body;f=f.documentElement;return{top:d.top+(self.pageYOffset||c.support.boxModel&&f.scrollTop||b.scrollTop)-(f.clientTop||b.clientTop||0),left:d.left+(self.pageXOffset||c.support.boxModel&&f.scrollLeft||b.scrollLeft)-(f.clientLeft||b.clientLeft||0)}}:function(a){var b=
this[0];if(a)return this.each(function(r){c.offset.setOffset(this,a,r)});if(!b||!b.ownerDocument)return null;if(b===b.ownerDocument.body)return c.offset.bodyOffset(b);c.offset.initialize();var d=b.offsetParent,f=b,e=b.ownerDocument,j,i=e.documentElement,o=e.body;f=(e=e.defaultView)?e.getComputedStyle(b,null):b.currentStyle;for(var k=b.offsetTop,n=b.offsetLeft;(b=b.parentNode)&&b!==o&&b!==i;){if(c.offset.supportsFixedPosition&&f.position==="fixed")break;j=e?e.getComputedStyle(b,null):b.currentStyle;
k-=b.scrollTop;n-=b.scrollLeft;if(b===d){k+=b.offsetTop;n+=b.offsetLeft;if(c.offset.doesNotAddBorder&&!(c.offset.doesAddBorderForTableAndCells&&/^t(able|d|h)$/i.test(b.nodeName))){k+=parseFloat(j.borderTopWidth)||0;n+=parseFloat(j.borderLeftWidth)||0}f=d;d=b.offsetParent}if(c.offset.subtractsBorderForOverflowNotVisible&&j.overflow!=="visible"){k+=parseFloat(j.borderTopWidth)||0;n+=parseFloat(j.borderLeftWidth)||0}f=j}if(f.position==="relative"||f.position==="static"){k+=o.offsetTop;n+=o.offsetLeft}if(c.offset.supportsFixedPosition&&
f.position==="fixed"){k+=Math.max(i.scrollTop,o.scrollTop);n+=Math.max(i.scrollLeft,o.scrollLeft)}return{top:k,left:n}};c.offset={initialize:function(){var a=s.body,b=s.createElement("div"),d,f,e,j=parseFloat(c.curCSS(a,"marginTop",true))||0;c.extend(b.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"});b.innerHTML="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";
a.insertBefore(b,a.firstChild);d=b.firstChild;f=d.firstChild;e=d.nextSibling.firstChild.firstChild;this.doesNotAddBorder=f.offsetTop!==5;this.doesAddBorderForTableAndCells=e.offsetTop===5;f.style.position="fixed";f.style.top="20px";this.supportsFixedPosition=f.offsetTop===20||f.offsetTop===15;f.style.position=f.style.top="";d.style.overflow="hidden";d.style.position="relative";this.subtractsBorderForOverflowNotVisible=f.offsetTop===-5;this.doesNotIncludeMarginInBodyOffset=a.offsetTop!==j;a.removeChild(b);
c.offset.initialize=c.noop},bodyOffset:function(a){var b=a.offsetTop,d=a.offsetLeft;c.offset.initialize();if(c.offset.doesNotIncludeMarginInBodyOffset){b+=parseFloat(c.curCSS(a,"marginTop",true))||0;d+=parseFloat(c.curCSS(a,"marginLeft",true))||0}return{top:b,left:d}},setOffset:function(a,b,d){if(/static/.test(c.curCSS(a,"position")))a.style.position="relative";var f=c(a),e=f.offset(),j=parseInt(c.curCSS(a,"top",true),10)||0,i=parseInt(c.curCSS(a,"left",true),10)||0;if(c.isFunction(b))b=b.call(a,
d,e);d={top:b.top-e.top+j,left:b.left-e.left+i};"using"in b?b.using.call(a,d):f.css(d)}};c.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),d=this.offset(),f=/^body|html$/i.test(b[0].nodeName)?{top:0,left:0}:b.offset();d.top-=parseFloat(c.curCSS(a,"marginTop",true))||0;d.left-=parseFloat(c.curCSS(a,"marginLeft",true))||0;f.top+=parseFloat(c.curCSS(b[0],"borderTopWidth",true))||0;f.left+=parseFloat(c.curCSS(b[0],"borderLeftWidth",true))||0;return{top:d.top-
f.top,left:d.left-f.left}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||s.body;a&&!/^body|html$/i.test(a.nodeName)&&c.css(a,"position")==="static";)a=a.offsetParent;return a})}});c.each(["Left","Top"],function(a,b){var d="scroll"+b;c.fn[d]=function(f){var e=this[0],j;if(!e)return null;if(f!==w)return this.each(function(){if(j=wa(this))j.scrollTo(!a?f:c(j).scrollLeft(),a?f:c(j).scrollTop());else this[d]=f});else return(j=wa(e))?"pageXOffset"in j?j[a?"pageYOffset":
"pageXOffset"]:c.support.boxModel&&j.document.documentElement[d]||j.document.body[d]:e[d]}});c.each(["Height","Width"],function(a,b){var d=b.toLowerCase();c.fn["inner"+b]=function(){return this[0]?c.css(this[0],d,false,"padding"):null};c.fn["outer"+b]=function(f){return this[0]?c.css(this[0],d,false,f?"margin":"border"):null};c.fn[d]=function(f){var e=this[0];if(!e)return f==null?null:this;if(c.isFunction(f))return this.each(function(j){var i=c(this);i[d](f.call(this,j,i[d]()))});return"scrollTo"in
e&&e.document?e.document.compatMode==="CSS1Compat"&&e.document.documentElement["client"+b]||e.document.body["client"+b]:e.nodeType===9?Math.max(e.documentElement["client"+b],e.body["scroll"+b],e.documentElement["scroll"+b],e.body["offset"+b],e.documentElement["offset"+b]):f===w?c.css(e,d):this.css(d,typeof f==="string"?f:f+"px")}});A.jQuery=A.$=c})(window);/*!
 * jQuery UI 1.8rc3
 *
 * Copyright (c) 2010 AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT (MIT-LICENSE.txt)
 * and GPL (GPL-LICENSE.txt) licenses.
 *
 * http://docs.jquery.com/UI
 */
/*
 * jQuery UI 1.8rc3
 *
 * Copyright (c) 2010 AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT (MIT-LICENSE.txt)
 * and GPL (GPL-LICENSE.txt) licenses.
 *
 * http://docs.jquery.com/UI
 */
jQuery.ui||(function(b){var a=b.browser.mozilla&&(parseFloat(b.browser.version)<1.9);b.ui={version:"1.8rc3",plugin:{add:function(d,e,g){var f=b.ui[d].prototype;for(var c in g){f.plugins[c]=f.plugins[c]||[];f.plugins[c].push([e,g[c]])}},call:function(c,e,d){var g=c.plugins[e];if(!g||!c.element[0].parentNode){return}for(var f=0;f<g.length;f++){if(c.options[g[f][0]]){g[f][1].apply(c.element,d)}}}},contains:function(d,c){return document.compareDocumentPosition?d.compareDocumentPosition(c)&16:d!==c&&d.contains(c)},hasScroll:function(f,d){if(b(f).css("overflow")=="hidden"){return false}var c=(d&&d=="left")?"scrollLeft":"scrollTop",e=false;if(f[c]>0){return true}f[c]=1;e=(f[c]>0);f[c]=0;return e},isOverAxis:function(d,c,e){return(d>c)&&(d<(c+e))},isOver:function(h,d,g,f,c,e){return b.ui.isOverAxis(h,g,c)&&b.ui.isOverAxis(d,f,e)},keyCode:{BACKSPACE:8,CAPS_LOCK:20,COMMA:188,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38}};b.fn.extend({_focus:b.fn.focus,focus:function(c,d){return typeof c==="number"?this.each(function(){var e=this;setTimeout(function(){b(e).focus();(d&&d.call(e))},c)}):this._focus.apply(this,arguments)},enableSelection:function(){return this.attr("unselectable","off").css("MozUserSelect","").unbind("selectstart.ui")},disableSelection:function(){return this.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return false})},scrollParent:function(){var c;if((b.browser.msie&&(/(static|relative)/).test(this.css("position")))||(/absolute/).test(this.css("position"))){c=this.parents().filter(function(){return(/(relative|absolute|fixed)/).test(b.curCSS(this,"position",1))&&(/(auto|scroll)/).test(b.curCSS(this,"overflow",1)+b.curCSS(this,"overflow-y",1)+b.curCSS(this,"overflow-x",1))}).eq(0)}else{c=this.parents().filter(function(){return(/(auto|scroll)/).test(b.curCSS(this,"overflow",1)+b.curCSS(this,"overflow-y",1)+b.curCSS(this,"overflow-x",1))}).eq(0)}return(/fixed/).test(this.css("position"))||!c.length?b(document):c},zIndex:function(f){if(f!==undefined){return this.css("zIndex",f)}if(this.length){var d=b(this[0]),c,e;while(d.length&&d[0]!==document){c=d.css("position");if(c=="absolute"||c=="relative"||c=="fixed"){e=parseInt(d.css("zIndex"));if(!isNaN(e)&&e!=0){return e}}d=d.parent()}}return 0}});b.extend(b.expr[":"],{data:function(e,d,c){return !!b.data(e,c[3])},focusable:function(d){var e=d.nodeName.toLowerCase(),c=b.attr(d,"tabindex");return(/input|select|textarea|button|object/.test(e)?!d.disabled:"a"==e||"area"==e?d.href||!isNaN(c):!isNaN(c))&&!b(d)["area"==e?"parents":"closest"](":hidden").length},tabbable:function(d){var c=b.attr(d,"tabindex");return(isNaN(c)||c>=0)&&b(d).is(":focusable")}})})(jQuery);;/*!
 * jQuery UI Widget 1.8rc3
 *
 * Copyright (c) 2010 AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT (MIT-LICENSE.txt)
 * and GPL (GPL-LICENSE.txt) licenses.
 *
 * http://docs.jquery.com/UI/Widget
 */
/*
 * jQuery UI Widget 1.8rc3
 *
 * Copyright (c) 2010 AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT (MIT-LICENSE.txt)
 * and GPL (GPL-LICENSE.txt) licenses.
 *
 * http://docs.jquery.com/UI/Widget
 */
(function(b){var a=b.fn.remove;b.fn.remove=function(c,d){return this.each(function(){if(!d){if(!c||b.filter(c,[this]).length){b("*",this).add(this).each(function(){b(this).triggerHandler("remove")})}}return a.call(b(this),c,d)})};b.widget=function(d,f,c){var e=d.split(".")[0],h;d=d.split(".")[1];h=e+"-"+d;if(!c){c=f;f=b.Widget}b.expr[":"][h]=function(i){return !!b.data(i,d)};b[e]=b[e]||{};b[e][d]=function(i,j){if(arguments.length){this._createWidget(i,j)}};var g=new f();g.options=b.extend({},g.options);b[e][d].prototype=b.extend(true,g,{namespace:e,widgetName:d,widgetEventPrefix:b[e][d].prototype.widgetEventPrefix||d,widgetBaseClass:h},c);b.widget.bridge(d,b[e][d])};b.widget.bridge=function(d,c){b.fn[d]=function(g){var e=typeof g==="string",f=Array.prototype.slice.call(arguments,1),h=this;g=!e&&f.length?b.extend.apply(null,[true,g].concat(f)):g;if(e&&g.substring(0,1)==="_"){return h}if(e){this.each(function(){var i=b.data(this,d),j=i&&b.isFunction(i[g])?i[g].apply(i,f):i;if(j!==i&&j!==undefined){h=j;return false}})}else{this.each(function(){var i=b.data(this,d);if(i){if(g){i.option(g)}i._init()}else{b.data(this,d,new c(g,this))}})}return h}};b.Widget=function(c,d){if(arguments.length){this._createWidget(c,d)}};b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(d,e){this.element=b(e).data(this.widgetName,this);this.options=b.extend(true,{},this.options,b.metadata&&b.metadata.get(e)[this.widgetName],d);var c=this;this.element.bind("remove."+this.widgetName,function(){c.destroy()});this._create();this._init()},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled "+this.namespace+"-state-disabled")},widget:function(){return this.element},option:function(e,f){var d=e,c=this;if(arguments.length===0){return b.extend({},c.options)}if(typeof e==="string"){if(f===undefined){return this.options[e]}d={};d[e]=f}b.each(d,function(g,h){c._setOption(g,h)});return c},_setOption:function(c,d){this.options[c]=d;if(c==="disabled"){this.widget()[d?"addClass":"removeClass"](this.widgetBaseClass+"-disabled "+this.namespace+"-state-disabled").attr("aria-disabled",d)}return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(d,e,f){var h=this.options[d];e=b.Event(e);e.type=(d===this.widgetEventPrefix?d:this.widgetEventPrefix+d).toLowerCase();f=f||{};if(e.originalEvent){for(var c=b.event.props.length,g;c;){g=b.event.props[--c];e[g]=e.originalEvent[g]}}this.element.trigger(e,f);return !(b.isFunction(h)&&h.call(this.element[0],e,f)===false||e.isDefaultPrevented())}}})(jQuery);;/*!
 * jQuery UI Mouse 1.8rc3
 *
 * Copyright (c) 2010 AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT (MIT-LICENSE.txt)
 * and GPL (GPL-LICENSE.txt) licenses.
 *
 * http://docs.jquery.com/UI/Mouse
 *
 * Depends:
 *	jquery.ui.widget.js
 */
/*
 * jQuery UI Mouse 1.8rc3
 *
 * Copyright (c) 2010 AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT (MIT-LICENSE.txt)
 * and GPL (GPL-LICENSE.txt) licenses.
 *
 * http://docs.jquery.com/UI/Mouse
 *
 * Depends:
 *	jquery.ui.widget.js
 */
(function(a){a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(c){return b._mouseDown(c)}).bind("click."+this.widgetName,function(c){if(b._preventClickEvent){b._preventClickEvent=false;c.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(d){d.originalEvent=d.originalEvent||{};if(d.originalEvent.mouseHandled){return}(this._mouseStarted&&this._mouseUp(d));this._mouseDownEvent=d;var c=this,e=(d.which==1),b=(typeof this.options.cancel=="string"?a(d.target).parents().add(d.target).filter(this.options.cancel).length:false);if(!e||b||!this._mouseCapture(d)){return true}this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){c.mouseDelayMet=true},this.options.delay)}if(this._mouseDistanceMet(d)&&this._mouseDelayMet(d)){this._mouseStarted=(this._mouseStart(d)!==false);if(!this._mouseStarted){d.preventDefault();return true}}this._mouseMoveDelegate=function(f){return c._mouseMove(f)};this._mouseUpDelegate=function(f){return c._mouseUp(f)};a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);(a.browser.safari||d.preventDefault());d.originalEvent.mouseHandled=true;return true},_mouseMove:function(b){if(a.browser.msie&&!b.button){return this._mouseUp(b)}if(this._mouseStarted){this._mouseDrag(b);return b.preventDefault()}if(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)){this._mouseStarted=(this._mouseStart(this._mouseDownEvent,b)!==false);(this._mouseStarted?this._mouseDrag(b):this._mouseUp(b))}return !this._mouseStarted},_mouseUp:function(b){a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;this._preventClickEvent=(b.target==this._mouseDownEvent.target);this._mouseStop(b)}return false},_mouseDistanceMet:function(b){return(Math.max(Math.abs(this._mouseDownEvent.pageX-b.pageX),Math.abs(this._mouseDownEvent.pageY-b.pageY))>=this.options.distance)},_mouseDelayMet:function(b){return this.mouseDelayMet},_mouseStart:function(b){},_mouseDrag:function(b){},_mouseStop:function(b){},_mouseCapture:function(b){return true}})})(jQuery);;/*
 * jQuery UI Slider 1.8rc3
 *
 * Copyright (c) 2010 AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT (MIT-LICENSE.txt)
 * and GPL (GPL-LICENSE.txt) licenses.
 *
 * http://docs.jquery.com/UI/Slider
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
(function(b){var a=5;b.widget("ui.slider",b.ui.mouse,{widgetEventPrefix:"slide",options:{animate:false,distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null},_create:function(){var c=this,d=this.options;this._keySliding=false;this._mouseSliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all");if(d.disabled){this.element.addClass("ui-slider-disabled ui-disabled")}this.range=b([]);if(d.range){if(d.range===true){this.range=b("<div></div>");if(!d.values){d.values=[this._valueMin(),this._valueMin()]}if(d.values.length&&d.values.length!=2){d.values=[d.values[0],d.values[0]]}}else{this.range=b("<div></div>")}this.range.appendTo(this.element).addClass("ui-slider-range");if(d.range=="min"||d.range=="max"){this.range.addClass("ui-slider-range-"+d.range)}this.range.addClass("ui-widget-header")}if(b(".ui-slider-handle",this.element).length==0){b('<a href="#"></a>').appendTo(this.element).addClass("ui-slider-handle")}if(d.values&&d.values.length){while(b(".ui-slider-handle",this.element).length<d.values.length){b('<a href="#"></a>').appendTo(this.element).addClass("ui-slider-handle")}}this.handles=b(".ui-slider-handle",this.element).addClass("ui-state-default ui-corner-all");this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(e){e.preventDefault()}).hover(function(){if(!d.disabled){b(this).addClass("ui-state-hover")}},function(){b(this).removeClass("ui-state-hover")}).focus(function(){if(!d.disabled){b(".ui-slider .ui-state-focus").removeClass("ui-state-focus");b(this).addClass("ui-state-focus")}else{b(this).blur()}}).blur(function(){b(this).removeClass("ui-state-focus")});this.handles.each(function(e){b(this).data("index.ui-slider-handle",e)});this.handles.keydown(function(j){var g=true;var f=b(this).data("index.ui-slider-handle");if(c.options.disabled){return}switch(j.keyCode){case b.ui.keyCode.HOME:case b.ui.keyCode.END:case b.ui.keyCode.PAGE_UP:case b.ui.keyCode.PAGE_DOWN:case b.ui.keyCode.UP:case b.ui.keyCode.RIGHT:case b.ui.keyCode.DOWN:case b.ui.keyCode.LEFT:g=false;if(!c._keySliding){c._keySliding=true;b(this).addClass("ui-state-active");c._start(j,f)}break}var h,e,i=c._step();if(c.options.values&&c.options.values.length){h=e=c.values(f)}else{h=e=c.value()}switch(j.keyCode){case b.ui.keyCode.HOME:e=c._valueMin();break;case b.ui.keyCode.END:e=c._valueMax();break;case b.ui.keyCode.PAGE_UP:e=h+((c._valueMax()-c._valueMin())/a);break;case b.ui.keyCode.PAGE_DOWN:e=h-((c._valueMax()-c._valueMin())/a);break;case b.ui.keyCode.UP:case b.ui.keyCode.RIGHT:if(h==c._valueMax()){return}e=h+i;break;case b.ui.keyCode.DOWN:case b.ui.keyCode.LEFT:if(h==c._valueMin()){return}e=h-i;break}c._slide(j,f,e);return g}).keyup(function(f){var e=b(this).data("index.ui-slider-handle");if(c._keySliding){c._stop(f,e);c._change(f,e);c._keySliding=false;b(this).removeClass("ui-state-active")}});this._refreshValue();this._animateOff=false},destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider");this._mouseDestroy();return this},_mouseCapture:function(e){var f=this.options;if(f.disabled){return false}this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();var i={x:e.pageX,y:e.pageY};var k=this._normValueFromMouse(i);var d=this._valueMax()-this._valueMin()+1,g;var l=this,j;this.handles.each(function(m){var n=Math.abs(k-l.values(m));if(d>n){d=n;g=b(this);j=m}});if(f.range==true&&this.values(1)==f.min){g=b(this.handles[++j])}this._start(e,j);this._mouseSliding=true;l._handleIndex=j;g.addClass("ui-state-active").focus();var h=g.offset();var c=!b(e.target).parents().andSelf().is(".ui-slider-handle");this._clickOffset=c?{left:0,top:0}:{left:e.pageX-h.left-(g.width()/2),top:e.pageY-h.top-(g.height()/2)-(parseInt(g.css("borderTopWidth"),10)||0)-(parseInt(g.css("borderBottomWidth"),10)||0)+(parseInt(g.css("marginTop"),10)||0)};k=this._normValueFromMouse(i);this._slide(e,j,k);this._animateOff=true;return true},_mouseStart:function(c){return true},_mouseDrag:function(e){var c={x:e.pageX,y:e.pageY};var d=this._normValueFromMouse(c);this._slide(e,this._handleIndex,d);return false},_mouseStop:function(c){this.handles.removeClass("ui-state-active");this._mouseSliding=false;this._stop(c,this._handleIndex);this._change(c,this._handleIndex);this._handleIndex=null;this._clickOffset=null;this._animateOff=false;return false},_detectOrientation:function(){this.orientation=this.options.orientation=="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(e){var d,i;if("horizontal"==this.orientation){d=this.elementSize.width;i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else{d=this.elementSize.height;i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)}var g=(i/d);if(g>1){g=1}if(g<0){g=0}if("vertical"==this.orientation){g=1-g}var f=this._valueMax()-this._valueMin(),j=g*f,c=j%this.options.step,h=this._valueMin()+j-c;if(c>(this.options.step/2)){h+=this.options.step}return parseFloat(h.toFixed(5))},_start:function(e,d){var c={handle:this.handles[d],value:this.value()};if(this.options.values&&this.options.values.length){c.value=this.values(d);c.values=this.values()}this._trigger("start",e,c)},_slide:function(g,f,e){var h=this.handles[f];if(this.options.values&&this.options.values.length){var c=this.values(f?0:1);if((this.options.values.length==2&&this.options.range===true)&&((f==0&&e>c)||(f==1&&e<c))){e=c}if(e!=this.values(f)){var d=this.values();d[f]=e;var i=this._trigger("slide",g,{handle:this.handles[f],value:e,values:d});var c=this.values(f?0:1);if(i!==false){this.values(f,e,true)}}}else{if(e!=this.value()){var i=this._trigger("slide",g,{handle:this.handles[f],value:e});if(i!==false){this.value(e)}}}},_stop:function(e,d){var c={handle:this.handles[d],value:this.value()};if(this.options.values&&this.options.values.length){c.value=this.values(d);c.values=this.values()}this._trigger("stop",e,c)},_change:function(e,d){if(!this._keySliding&&!this._mouseSliding){var c={handle:this.handles[d],value:this.value()};if(this.options.values&&this.options.values.length){c.value=this.values(d);c.values=this.values()}this._trigger("change",e,c)}},value:function(c){if(arguments.length){this.options.value=this._trimValue(c);this._refreshValue();this._change(null,0)}return this._value()},values:function(e,h){if(arguments.length>1){this.options.values[e]=this._trimValue(h);this._refreshValue();this._change(null,e)}if(arguments.length){if(b.isArray(arguments[0])){var g=this.options.values,d=arguments[0];for(var f=0,c=g.length;f<c;f++){g[f]=this._trimValue(d[f]);this._change(null,f)}this._refreshValue()}else{if(this.options.values&&this.options.values.length){return this._values(e)}else{return this.value()}}}else{return this._values()}},_setOption:function(c,d){b.Widget.prototype._setOption.apply(this,arguments);switch(c){case"disabled":if(d){this.handles.filter(".ui-state-focus").blur();this.handles.removeClass("ui-state-hover");this.handles.attr("disabled","disabled");this.element.addClass("ui-disabled")}else{this.handles.removeAttr("disabled");this.element.removeClass("ui-disabled")}case"orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue();break;case"value":this._animateOff=true;this._refreshValue();this._animateOff=false;break;case"values":this._animateOff=true;this._refreshValue();this._animateOff=false;break}},_step:function(){var c=this.options.step;return c},_value:function(){var c=this.options.value;c=this._trimValue(c);return c},_values:function(d){if(arguments.length){var g=this.options.values[d];g=this._trimValue(g);return g}else{var f=this.options.values.slice();for(var e=0,c=f.length;e<c;e++){f[e]=this._trimValue(f[e])}return f}},_trimValue:function(c){if(c<this._valueMin()){c=this._valueMin()}if(c>this._valueMax()){c=this._valueMax()}return c},_valueMin:function(){var c=this.options.min;return c},_valueMax:function(){var c=this.options.max;return c},_refreshValue:function(){var g=this.options.range,e=this.options,m=this;var d=(!this._animateOff)?e.animate:false;if(this.options.values&&this.options.values.length){var j,i;this.handles.each(function(q,o){var p=(m.values(q)-m._valueMin())/(m._valueMax()-m._valueMin())*100;var n={};n[m.orientation=="horizontal"?"left":"bottom"]=p+"%";b(this).stop(1,1)[d?"animate":"css"](n,e.animate);if(m.options.range===true){if(m.orientation=="horizontal"){(q==0)&&m.range.stop(1,1)[d?"animate":"css"]({left:p+"%"},e.animate);(q==1)&&m.range[d?"animate":"css"]({width:(p-lastValPercent)+"%"},{queue:false,duration:e.animate})}else{(q==0)&&m.range.stop(1,1)[d?"animate":"css"]({bottom:(p)+"%"},e.animate);(q==1)&&m.range[d?"animate":"css"]({height:(p-lastValPercent)+"%"},{queue:false,duration:e.animate})}}lastValPercent=p})}else{var k=this.value(),h=this._valueMin(),l=this._valueMax(),f=l!=h?(k-h)/(l-h)*100:0;var c={};c[m.orientation=="horizontal"?"left":"bottom"]=f+"%";this.handle.stop(1,1)[d?"animate":"css"](c,e.animate);(g=="min")&&(this.orientation=="horizontal")&&this.range.stop(1,1)[d?"animate":"css"]({width:f+"%"},e.animate);(g=="max")&&(this.orientation=="horizontal")&&this.range[d?"animate":"css"]({width:(100-f)+"%"},{queue:false,duration:e.animate});(g=="min")&&(this.orientation=="vertical")&&this.range.stop(1,1)[d?"animate":"css"]({height:f+"%"},e.animate);(g=="max")&&(this.orientation=="vertical")&&this.range[d?"animate":"css"]({height:(100-f)+"%"},{queue:false,duration:e.animate})}}});b.extend(b.ui.slider,{version:"1.8rc3"})})(jQuery);;/***
@title:
Center

@version:
2.0

@author:
Andreas Lagerkvist

@date:
2008-09-17

@url:
http://andreaslagerkvist.com/jquery/center/

@license:
http://creativecommons.org/licenses/by/3.0/

@copyright:
2008 Andreas Lagerkvist (andreaslagerkvist.com)

@requires:
jquery

@does:
This little pluggy centers an element on the screen using either fixed or absolute positioning. Can be used to display messages, pop up images etc.

@howto:
jQuery('#my-element').center(true); would center the element with ID 'my-element' using absolute position (leave empty for fixed).

@exampleHTML:
<p>I should be fixed centered</p>

<p>The paragraph above and the paragraph beneath this one are centered. They should be in the middle of the viewport.</p>

<p>I should be absolutely centered</p>

@exampleJS:
jQuery('#jquery-center-example p:first-child').center();
jQuery('#jquery-center-example p:last-child').center(true);
***/
jQuery.fn.center = function (absolute) {
	return this.each(function () {
		var t = jQuery(this);

		t.css({
			position:	absolute ? 'absolute' : 'fixed', 
			left:		'50%', 
			top:		'50%'
		}).css({
			marginLeft:	'-' + (t.outerWidth() / 2) + 'px', 
			marginTop:	'-' + (t.outerHeight() / 2) + 'px'
		});

		if (absolute) {
			t.css({
				marginTop:	parseInt(t.css('marginTop'), 10) + jQuery(window).scrollTop(), 
				marginLeft:	parseInt(t.css('marginLeft'), 10) + jQuery(window).scrollLeft()
			});
		}
	});
};/*
Uploadify v2.1.0
Release Date: August 24, 2009

Copyright (c) 2009 Ronnie Garcia, Travis Nickels

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
*/

if(jQuery)(
	function(jQuery){
		jQuery.extend(jQuery.fn,{
			uploadify:function(options) {
				jQuery(this).each(function(){
					settings = jQuery.extend({
					id             : jQuery(this).attr('id'), // The ID of the object being Uploadified
					uploader       : 'uploadify.swf', // The path to the uploadify swf file
					script         : 'uploadify.php', // The path to the uploadify backend upload script
					expressInstall : null, // The path to the express install swf file
					folder         : '', // The path to the upload folder
					height         : 30, // The height of the flash button
					width          : 110, // The width of the flash button
					cancelImg      : 'cancel.png', // The path to the cancel image for the default file queue item container
					wmode          : 'opaque', // The wmode of the flash file
					scriptAccess   : 'sameDomain', // Set to "always" to allow script access across domains
					fileDataName   : 'Filedata', // The name of the file collection object in the backend upload script
					method         : 'POST', // The method for sending variables to the backend upload script
					queueSizeLimit : 999, // The maximum size of the file queue
					simUploadLimit : 1, // The number of simultaneous uploads allowed
					queueID        : false, // The optional ID of the queue container
					displayData    : 'percentage', // Set to "speed" to show the upload speed in the default queue item
					onInit         : function() {}, // Function to run when uploadify is initialized
					onSelect       : function() {}, // Function to run when a file is selected
					onQueueFull    : function() {}, // Function to run when the queue reaches capacity
					onCheck        : function() {}, // Function to run when script checks for duplicate files on the server
					onCancel       : function() {}, // Function to run when an item is cleared from the queue
					onError        : function() {}, // Function to run when an upload item returns an error
					onProgress     : function() {}, // Function to run each time the upload progress is updated
					onComplete     : function() {}, // Function to run when an upload is completed
					onAllComplete  : function() {}  // Functino to run when all uploads are completed
				}, options);
				var pagePath = location.pathname;
				pagePath = pagePath.split('/');
				pagePath.pop();
				pagePath = pagePath.join('/') + '/';
				var data = {};
				data.uploadifyID = settings.id;
				data.pagepath = pagePath;
				if (settings.buttonImg) data.buttonImg = escape(settings.buttonImg);
				if (settings.buttonText) data.buttonText = escape(settings.buttonText);
				if (settings.rollover) data.rollover = true;
				data.script = settings.script;
				data.folder = escape(settings.folder);
				if (settings.scriptData) {
					var scriptDataString = '';
					for (var name in settings.scriptData) {
						scriptDataString += '&' + name + '=' + settings.scriptData[name];
					}
					data.scriptData = escape(scriptDataString.substr(1));
				}
				data.width          = settings.width;
				data.height         = settings.height;
				data.wmode          = settings.wmode;
				data.method         = settings.method;
				data.queueSizeLimit = settings.queueSizeLimit;
				data.simUploadLimit = settings.simUploadLimit;
				if (settings.hideButton)   data.hideButton   = true;
				if (settings.fileDesc)     data.fileDesc     = settings.fileDesc;
				if (settings.fileExt)      data.fileExt      = settings.fileExt;
				if (settings.multi)        data.multi        = true;
				if (settings.auto)         data.auto         = true;
				if (settings.sizeLimit)    data.sizeLimit    = settings.sizeLimit;
				if (settings.checkScript)  data.checkScript  = settings.checkScript;
				if (settings.fileDataName) data.fileDataName = settings.fileDataName;
				if (settings.queueID)      data.queueID      = settings.queueID;
				if (settings.onInit() !== false) {
					jQuery(this).css('display','none');
					jQuery(this).after('<div id="' + jQuery(this).attr('id') + 'Uploader"></div>');
					swfobject.embedSWF(settings.uploader, settings.id + 'Uploader', settings.width, settings.height, '9.0.24', settings.expressInstall, data, {'quality':'high','wmode':settings.wmode,'allowScriptAccess':settings.scriptAccess});
					if (settings.queueID == false) {
						jQuery("#" + jQuery(this).attr('id') + "Uploader").after('<div id="' + jQuery(this).attr('id') + 'Queue" class="uploadifyQueue"></div>');
					}
				}
				if (typeof(settings.onOpen) == 'function') {
					jQuery(this).bind("uploadifyOpen", settings.onOpen);
				}
				jQuery(this).bind("uploadifySelect", {'action': settings.onSelect, 'queueID': settings.queueID}, function(event, ID, fileObj) {
					if (event.data.action(event, ID, fileObj) !== false) {
						var byteSize = Math.round(fileObj.size / 1024 * 100) * .01;
						var suffix = 'KB';
						if (byteSize > 1000) {
							byteSize = Math.round(byteSize *.001 * 100) * .01;
							suffix = 'MB';
						}
						var sizeParts = byteSize.toString().split('.');
						if (sizeParts.length > 1) {
							byteSize = sizeParts[0] + '.' + sizeParts[1].substr(0,2);
						} else {
							byteSize = sizeParts[0];
						}
						if (fileObj.name.length > 20) {
							fileName = fileObj.name.substr(0,20) + '...';
						} else {
							fileName = fileObj.name;
						}
						queue = '#' + jQuery(this).attr('id') + 'Queue';
						if (event.data.queueID) {
							queue = '#' + event.data.queueID;
						}
						jQuery(queue).append('<div id="' + jQuery(this).attr('id') + ID + '" class="uploadifyQueueItem">\
								<div class="cancel">\
									<a href="javascript:jQuery(\'#' + jQuery(this).attr('id') + '\').uploadifyCancel(\'' + ID + '\')"><img src="' + settings.cancelImg + '" border="0" /></a>\
								</div>\
								<span class="fileName">' + fileName + ' (' + byteSize + suffix + ')</span><span class="percentage"></span>\
								<div class="uploadifyProgress">\
									<div id="' + jQuery(this).attr('id') + ID + 'ProgressBar" class="uploadifyProgressBar"><!--Progress Bar--></div>\
								</div>\
							</div>');
					}
				});
				if (typeof(settings.onSelectOnce) == 'function') {
					jQuery(this).bind("uploadifySelectOnce", settings.onSelectOnce);
				}
				jQuery(this).bind("uploadifyQueueFull", {'action': settings.onQueueFull}, function(event, queueSizeLimit) {
					if (event.data.action(event, queueSizeLimit) !== false) {
						alert('The queue is full.  The max size is ' + queueSizeLimit + '.');
					}
				});
				jQuery(this).bind("uploadifyCheckExist", {'action': settings.onCheck}, function(event, checkScript, fileQueueObj, folder, single) {
					var postData = new Object();
					postData = fileQueueObj;
					postData.folder = pagePath + folder;
					if (single) {
						for (var ID in fileQueueObj) {
							var singleFileID = ID;
						}
					}
					jQuery.post(checkScript, postData, function(data) {
						for(var key in data) {
							if (event.data.action(event, checkScript, fileQueueObj, folder, single) !== false) {
								var replaceFile = confirm("Do you want to replace the file " + data[key] + "?");
								if (!replaceFile) {
									document.getElementById(jQuery(event.target).attr('id') + 'Uploader').cancelFileUpload(key, true,true);
								}
							}
						}
						if (single) {
							document.getElementById(jQuery(event.target).attr('id') + 'Uploader').startFileUpload(singleFileID, true);
						} else {
							document.getElementById(jQuery(event.target).attr('id') + 'Uploader').startFileUpload(null, true);
						}
					}, "json");
				});
				jQuery(this).bind("uploadifyCancel", {'action': settings.onCancel}, function(event, ID, fileObj, data, clearFast) {
					if (event.data.action(event, ID, fileObj, data, clearFast) !== false) {
						var fadeSpeed = (clearFast == true) ? 0 : 250;
						jQuery("#" + jQuery(this).attr('id') + ID).fadeOut(fadeSpeed, function() { jQuery(this).remove() });
					}
				});
				if (typeof(settings.onClearQueue) == 'function') {
					jQuery(this).bind("uploadifyClearQueue", settings.onClearQueue);
				}
				var errorArray = [];
				jQuery(this).bind("uploadifyError", {'action': settings.onError}, function(event, ID, fileObj, errorObj) {
					if (event.data.action(event, ID, fileObj, errorObj) !== false) {
						var fileArray = new Array(ID, fileObj, errorObj);
						errorArray.push(fileArray);
						jQuery("#" + jQuery(this).attr('id') + ID + " .percentage").text(" - " + errorObj.type + " Error");
						jQuery("#" + jQuery(this).attr('id') + ID).addClass('uploadifyError');
					}
				});
				jQuery(this).bind("uploadifyProgress", {'action': settings.onProgress, 'toDisplay': settings.displayData}, function(event, ID, fileObj, data) {
					if (event.data.action(event, ID, fileObj, data) !== false) {
						jQuery("#" + jQuery(this).attr('id') + ID + "ProgressBar").css('width', data.percentage + '%');
						if (event.data.toDisplay == 'percentage') displayData = ' - ' + data.percentage + '%';
						if (event.data.toDisplay == 'speed') displayData = ' - ' + data.speed + 'KB/s';
						if (event.data.toDisplay == null) displayData = ' ';
						jQuery("#" + jQuery(this).attr('id') + ID + " .percentage").text(displayData);
					}
				});
				jQuery(this).bind("uploadifyComplete", {'action': settings.onComplete}, function(event, ID, fileObj, response, data) {
					if (event.data.action(event, ID, fileObj, unescape(response), data) !== false) {
						jQuery("#" + jQuery(this).attr('id') + ID + " .percentage").text(' - Completed');
						jQuery("#" + jQuery(this).attr('id') + ID).fadeOut(250, function() { jQuery(this).remove()});
					}
				});
				if (typeof(settings.onAllComplete) == 'function') {
					jQuery(this).bind("uploadifyAllComplete", {'action': settings.onAllComplete}, function(event, uploadObj) {
						if (event.data.action(event, uploadObj) !== false) {
							errorArray = [];
						}
					});
				}
			});
		},
		uploadifySettings:function(settingName, settingValue, resetObject) {
			var returnValue = false;
			jQuery(this).each(function() {
				if (settingName == 'scriptData' && settingValue != null) {
					if (resetObject) {
						var scriptData = settingValue;
					} else {
						var scriptData = jQuery.extend(settings.scriptData, settingValue);
					}
					var scriptDataString = '';
					for (var name in scriptData) {
						scriptDataString += '&' + name + '=' + escape(scriptData[name]);
					}
					settingValue = scriptDataString.substr(1);
				}
				returnValue = document.getElementById(jQuery(this).attr('id') + 'Uploader').updateSettings(settingName, settingValue);
			});
			if (settingValue == null) {
				if (settingName == 'scriptData') {
					var returnSplit = unescape(returnValue).split('&');
					var returnObj   = new Object();
					for (var i = 0; i < returnSplit.length; i++) {
						var iSplit = returnSplit[i].split('=');
						returnObj[iSplit[0]] = iSplit[1];
					}
					returnValue = returnObj;
				}
				return returnValue;
			}
		},
		uploadifyUpload:function(ID) {
			jQuery(this).each(function() {
				document.getElementById(jQuery(this).attr('id') + 'Uploader').startFileUpload(ID, false);
			});
		},
		uploadifyCancel:function(ID) {
			jQuery(this).each(function() {
				document.getElementById(jQuery(this).attr('id') + 'Uploader').cancelFileUpload(ID, true, false);
			});
		},
		uploadifyClearQueue:function() {
			jQuery(this).each(function() {
				document.getElementById(jQuery(this).attr('id') + 'Uploader').clearFileUploadQueue(false);
			});
		}
	})
})(jQuery);/**
 * jQuery.ScrollTo - Easy element scrolling using jQuery.
 * Copyright (c) 2007-2009 Ariel Flesler - aflesler(at)gmail(dot)com | http://flesler.blogspot.com
 * Dual licensed under MIT and GPL.
 * Date: 5/25/2009
 * @author Ariel Flesler
 * @version 1.4.2
 *
 * http://flesler.blogspot.com/2007/10/jqueryscrollto.html
 */
;(function(d){var k=d.scrollTo=function(a,i,e){d(window).scrollTo(a,i,e)};k.defaults={axis:'xy',duration:parseFloat(d.fn.jquery)>=1.3?0:1};k.window=function(a){return d(window)._scrollable()};d.fn._scrollable=function(){return this.map(function(){var a=this,i=!a.nodeName||d.inArray(a.nodeName.toLowerCase(),['iframe','#document','html','body'])!=-1;if(!i)return a;var e=(a.contentWindow||a).document||a.ownerDocument||a;return d.browser.safari||e.compatMode=='BackCompat'?e.body:e.documentElement})};d.fn.scrollTo=function(n,j,b){if(typeof j=='object'){b=j;j=0}if(typeof b=='function')b={onAfter:b};if(n=='max')n=9e9;b=d.extend({},k.defaults,b);j=j||b.speed||b.duration;b.queue=b.queue&&b.axis.length>1;if(b.queue)j/=2;b.offset=p(b.offset);b.over=p(b.over);return this._scrollable().each(function(){var q=this,r=d(q),f=n,s,g={},u=r.is('html,body');switch(typeof f){case'number':case'string':if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(f)){f=p(f);break}f=d(f,this);case'object':if(f.is||f.style)s=(f=d(f)).offset()}d.each(b.axis.split(''),function(a,i){var e=i=='x'?'Left':'Top',h=e.toLowerCase(),c='scroll'+e,l=q[c],m=k.max(q,i);if(s){g[c]=s[h]+(u?0:l-r.offset()[h]);if(b.margin){g[c]-=parseInt(f.css('margin'+e))||0;g[c]-=parseInt(f.css('border'+e+'Width'))||0}g[c]+=b.offset[h]||0;if(b.over[h])g[c]+=f[i=='x'?'width':'height']()*b.over[h]}else{var o=f[h];g[c]=o.slice&&o.slice(-1)=='%'?parseFloat(o)/100*m:o}if(/^\d+$/.test(g[c]))g[c]=g[c]<=0?0:Math.min(g[c],m);if(!a&&b.queue){if(l!=g[c])t(b.onAfterFirst);delete g[c]}});t(b.onAfter);function t(a){r.animate(g,j,b.easing,a&&function(){a.call(this,n,b)})}}).end()};k.max=function(a,i){var e=i=='x'?'Width':'Height',h='scroll'+e;if(!d(a).is('html,body'))return a[h]-d(a)[e.toLowerCase()]();var c='client'+e,l=a.ownerDocument.documentElement,m=a.ownerDocument.body;return Math.max(l[h],m[h])-Math.min(l[c],m[c])};function p(a){return typeof a=='object'?a:{top:a,left:a}}})(jQuery);/*	SWFObject v2.2 <http://code.google.com/p/swfobject/> 
	is released under the MIT License <http://www.opensource.org/licenses/mit-license.php> 
*/
var swfobject=function(){var D="undefined",r="object",S="Shockwave Flash",W="ShockwaveFlash.ShockwaveFlash",q="application/x-shockwave-flash",R="SWFObjectExprInst",x="onreadystatechange",O=window,j=document,t=navigator,T=false,U=[h],o=[],N=[],I=[],l,Q,E,B,J=false,a=false,n,G,m=true,M=function(){var aa=typeof j.getElementById!=D&&typeof j.getElementsByTagName!=D&&typeof j.createElement!=D,ah=t.userAgent.toLowerCase(),Y=t.platform.toLowerCase(),ae=Y?/win/.test(Y):/win/.test(ah),ac=Y?/mac/.test(Y):/mac/.test(ah),af=/webkit/.test(ah)?parseFloat(ah.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,X=!+"\v1",ag=[0,0,0],ab=null;if(typeof t.plugins!=D&&typeof t.plugins[S]==r){ab=t.plugins[S].description;if(ab&&!(typeof t.mimeTypes!=D&&t.mimeTypes[q]&&!t.mimeTypes[q].enabledPlugin)){T=true;X=false;ab=ab.replace(/^.*\s+(\S+\s+\S+$)/,"$1");ag[0]=parseInt(ab.replace(/^(.*)\..*$/,"$1"),10);ag[1]=parseInt(ab.replace(/^.*\.(.*)\s.*$/,"$1"),10);ag[2]=/[a-zA-Z]/.test(ab)?parseInt(ab.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof O.ActiveXObject!=D){try{var ad=new ActiveXObject(W);if(ad){ab=ad.GetVariable("$version");if(ab){X=true;ab=ab.split(" ")[1].split(",");ag=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}}catch(Z){}}}return{w3:aa,pv:ag,wk:af,ie:X,win:ae,mac:ac}}(),k=function(){if(!M.w3){return}if((typeof j.readyState!=D&&j.readyState=="complete")||(typeof j.readyState==D&&(j.getElementsByTagName("body")[0]||j.body))){f()}if(!J){if(typeof j.addEventListener!=D){j.addEventListener("DOMContentLoaded",f,false)}if(M.ie&&M.win){j.attachEvent(x,function(){if(j.readyState=="complete"){j.detachEvent(x,arguments.callee);f()}});if(O==top){(function(){if(J){return}try{j.documentElement.doScroll("left")}catch(X){setTimeout(arguments.callee,0);return}f()})()}}if(M.wk){(function(){if(J){return}if(!/loaded|complete/.test(j.readyState)){setTimeout(arguments.callee,0);return}f()})()}s(f)}}();function f(){if(J){return}try{var Z=j.getElementsByTagName("body")[0].appendChild(C("span"));Z.parentNode.removeChild(Z)}catch(aa){return}J=true;var X=U.length;for(var Y=0;Y<X;Y++){U[Y]()}}function K(X){if(J){X()}else{U[U.length]=X}}function s(Y){if(typeof O.addEventListener!=D){O.addEventListener("load",Y,false)}else{if(typeof j.addEventListener!=D){j.addEventListener("load",Y,false)}else{if(typeof O.attachEvent!=D){i(O,"onload",Y)}else{if(typeof O.onload=="function"){var X=O.onload;O.onload=function(){X();Y()}}else{O.onload=Y}}}}}function h(){if(T){V()}else{H()}}function V(){var X=j.getElementsByTagName("body")[0];var aa=C(r);aa.setAttribute("type",q);var Z=X.appendChild(aa);if(Z){var Y=0;(function(){if(typeof Z.GetVariable!=D){var ab=Z.GetVariable("$version");if(ab){ab=ab.split(" ")[1].split(",");M.pv=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}else{if(Y<10){Y++;setTimeout(arguments.callee,10);return}}X.removeChild(aa);Z=null;H()})()}else{H()}}function H(){var ag=o.length;if(ag>0){for(var af=0;af<ag;af++){var Y=o[af].id;var ab=o[af].callbackFn;var aa={success:false,id:Y};if(M.pv[0]>0){var ae=c(Y);if(ae){if(F(o[af].swfVersion)&&!(M.wk&&M.wk<312)){w(Y,true);if(ab){aa.success=true;aa.ref=z(Y);ab(aa)}}else{if(o[af].expressInstall&&A()){var ai={};ai.data=o[af].expressInstall;ai.width=ae.getAttribute("width")||"0";ai.height=ae.getAttribute("height")||"0";if(ae.getAttribute("class")){ai.styleclass=ae.getAttribute("class")}if(ae.getAttribute("align")){ai.align=ae.getAttribute("align")}var ah={};var X=ae.getElementsByTagName("param");var ac=X.length;for(var ad=0;ad<ac;ad++){if(X[ad].getAttribute("name").toLowerCase()!="movie"){ah[X[ad].getAttribute("name")]=X[ad].getAttribute("value")}}P(ai,ah,Y,ab)}else{p(ae);if(ab){ab(aa)}}}}}else{w(Y,true);if(ab){var Z=z(Y);if(Z&&typeof Z.SetVariable!=D){aa.success=true;aa.ref=Z}ab(aa)}}}}}function z(aa){var X=null;var Y=c(aa);if(Y&&Y.nodeName=="OBJECT"){if(typeof Y.SetVariable!=D){X=Y}else{var Z=Y.getElementsByTagName(r)[0];if(Z){X=Z}}}return X}function A(){return !a&&F("6.0.65")&&(M.win||M.mac)&&!(M.wk&&M.wk<312)}function P(aa,ab,X,Z){a=true;E=Z||null;B={success:false,id:X};var ae=c(X);if(ae){if(ae.nodeName=="OBJECT"){l=g(ae);Q=null}else{l=ae;Q=X}aa.id=R;if(typeof aa.width==D||(!/%$/.test(aa.width)&&parseInt(aa.width,10)<310)){aa.width="310"}if(typeof aa.height==D||(!/%$/.test(aa.height)&&parseInt(aa.height,10)<137)){aa.height="137"}j.title=j.title.slice(0,47)+" - Flash Player Installation";var ad=M.ie&&M.win?"ActiveX":"PlugIn",ac="MMredirectURL="+O.location.toString().replace(/&/g,"%26")+"&MMplayerType="+ad+"&MMdoctitle="+j.title;if(typeof ab.flashvars!=D){ab.flashvars+="&"+ac}else{ab.flashvars=ac}if(M.ie&&M.win&&ae.readyState!=4){var Y=C("div");X+="SWFObjectNew";Y.setAttribute("id",X);ae.parentNode.insertBefore(Y,ae);ae.style.display="none";(function(){if(ae.readyState==4){ae.parentNode.removeChild(ae)}else{setTimeout(arguments.callee,10)}})()}u(aa,ab,X)}}function p(Y){if(M.ie&&M.win&&Y.readyState!=4){var X=C("div");Y.parentNode.insertBefore(X,Y);X.parentNode.replaceChild(g(Y),X);Y.style.display="none";(function(){if(Y.readyState==4){Y.parentNode.removeChild(Y)}else{setTimeout(arguments.callee,10)}})()}else{Y.parentNode.replaceChild(g(Y),Y)}}function g(ab){var aa=C("div");if(M.win&&M.ie){aa.innerHTML=ab.innerHTML}else{var Y=ab.getElementsByTagName(r)[0];if(Y){var ad=Y.childNodes;if(ad){var X=ad.length;for(var Z=0;Z<X;Z++){if(!(ad[Z].nodeType==1&&ad[Z].nodeName=="PARAM")&&!(ad[Z].nodeType==8)){aa.appendChild(ad[Z].cloneNode(true))}}}}}return aa}function u(ai,ag,Y){var X,aa=c(Y);if(M.wk&&M.wk<312){return X}if(aa){if(typeof ai.id==D){ai.id=Y}if(M.ie&&M.win){var ah="";for(var ae in ai){if(ai[ae]!=Object.prototype[ae]){if(ae.toLowerCase()=="data"){ag.movie=ai[ae]}else{if(ae.toLowerCase()=="styleclass"){ah+=' class="'+ai[ae]+'"'}else{if(ae.toLowerCase()!="classid"){ah+=" "+ae+'="'+ai[ae]+'"'}}}}}var af="";for(var ad in ag){if(ag[ad]!=Object.prototype[ad]){af+='<param name="'+ad+'" value="'+ag[ad]+'" />'}}aa.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+ah+">"+af+"</object>";N[N.length]=ai.id;X=c(ai.id)}else{var Z=C(r);Z.setAttribute("type",q);for(var ac in ai){if(ai[ac]!=Object.prototype[ac]){if(ac.toLowerCase()=="styleclass"){Z.setAttribute("class",ai[ac])}else{if(ac.toLowerCase()!="classid"){Z.setAttribute(ac,ai[ac])}}}}for(var ab in ag){if(ag[ab]!=Object.prototype[ab]&&ab.toLowerCase()!="movie"){e(Z,ab,ag[ab])}}aa.parentNode.replaceChild(Z,aa);X=Z}}return X}function e(Z,X,Y){var aa=C("param");aa.setAttribute("name",X);aa.setAttribute("value",Y);Z.appendChild(aa)}function y(Y){var X=c(Y);if(X&&X.nodeName=="OBJECT"){if(M.ie&&M.win){X.style.display="none";(function(){if(X.readyState==4){b(Y)}else{setTimeout(arguments.callee,10)}})()}else{X.parentNode.removeChild(X)}}}function b(Z){var Y=c(Z);if(Y){for(var X in Y){if(typeof Y[X]=="function"){Y[X]=null}}Y.parentNode.removeChild(Y)}}function c(Z){var X=null;try{X=j.getElementById(Z)}catch(Y){}return X}function C(X){return j.createElement(X)}function i(Z,X,Y){Z.attachEvent(X,Y);I[I.length]=[Z,X,Y]}function F(Z){var Y=M.pv,X=Z.split(".");X[0]=parseInt(X[0],10);X[1]=parseInt(X[1],10)||0;X[2]=parseInt(X[2],10)||0;return(Y[0]>X[0]||(Y[0]==X[0]&&Y[1]>X[1])||(Y[0]==X[0]&&Y[1]==X[1]&&Y[2]>=X[2]))?true:false}function v(ac,Y,ad,ab){if(M.ie&&M.mac){return}var aa=j.getElementsByTagName("head")[0];if(!aa){return}var X=(ad&&typeof ad=="string")?ad:"screen";if(ab){n=null;G=null}if(!n||G!=X){var Z=C("style");Z.setAttribute("type","text/css");Z.setAttribute("media",X);n=aa.appendChild(Z);if(M.ie&&M.win&&typeof j.styleSheets!=D&&j.styleSheets.length>0){n=j.styleSheets[j.styleSheets.length-1]}G=X}if(M.ie&&M.win){if(n&&typeof n.addRule==r){n.addRule(ac,Y)}}else{if(n&&typeof j.createTextNode!=D){n.appendChild(j.createTextNode(ac+" {"+Y+"}"))}}}function w(Z,X){if(!m){return}var Y=X?"visible":"hidden";if(J&&c(Z)){c(Z).style.visibility=Y}else{v("#"+Z,"visibility:"+Y)}}function L(Y){var Z=/[\\\"<>\.;]/;var X=Z.exec(Y)!=null;return X&&typeof encodeURIComponent!=D?encodeURIComponent(Y):Y}var d=function(){if(M.ie&&M.win){window.attachEvent("onunload",function(){var ac=I.length;for(var ab=0;ab<ac;ab++){I[ab][0].detachEvent(I[ab][1],I[ab][2])}var Z=N.length;for(var aa=0;aa<Z;aa++){y(N[aa])}for(var Y in M){M[Y]=null}M=null;for(var X in swfobject){swfobject[X]=null}swfobject=null})}}();return{registerObject:function(ab,X,aa,Z){if(M.w3&&ab&&X){var Y={};Y.id=ab;Y.swfVersion=X;Y.expressInstall=aa;Y.callbackFn=Z;o[o.length]=Y;w(ab,false)}else{if(Z){Z({success:false,id:ab})}}},getObjectById:function(X){if(M.w3){return z(X)}},embedSWF:function(ab,ah,ae,ag,Y,aa,Z,ad,af,ac){var X={success:false,id:ah};if(M.w3&&!(M.wk&&M.wk<312)&&ab&&ah&&ae&&ag&&Y){w(ah,false);K(function(){ae+="";ag+="";var aj={};if(af&&typeof af===r){for(var al in af){aj[al]=af[al]}}aj.data=ab;aj.width=ae;aj.height=ag;var am={};if(ad&&typeof ad===r){for(var ak in ad){am[ak]=ad[ak]}}if(Z&&typeof Z===r){for(var ai in Z){if(typeof am.flashvars!=D){am.flashvars+="&"+ai+"="+Z[ai]}else{am.flashvars=ai+"="+Z[ai]}}}if(F(Y)){var an=u(aj,am,ah);if(aj.id==ah){w(ah,true)}X.success=true;X.ref=an}else{if(aa&&A()){aj.data=aa;P(aj,am,ah,ac);return}else{w(ah,true)}}if(ac){ac(X)}})}else{if(ac){ac(X)}}},switchOffAutoHideShow:function(){m=false},ua:M,getFlashPlayerVersion:function(){return{major:M.pv[0],minor:M.pv[1],release:M.pv[2]}},hasFlashPlayerVersion:F,createSWF:function(Z,Y,X){if(M.w3){return u(Z,Y,X)}else{return undefined}},showExpressInstall:function(Z,aa,X,Y){if(M.w3&&A()){P(Z,aa,X,Y)}},removeSWF:function(X){if(M.w3){y(X)}},createCSS:function(aa,Z,Y,X){if(M.w3){v(aa,Z,Y,X)}},addDomLoadEvent:K,addLoadEvent:s,getQueryParamValue:function(aa){var Z=j.location.search||j.location.hash;if(Z){if(/\?/.test(Z)){Z=Z.split("?")[1]}if(aa==null){return L(Z)}var Y=Z.split("&");for(var X=0;X<Y.length;X++){if(Y[X].substring(0,Y[X].indexOf("="))==aa){return L(Y[X].substring((Y[X].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(a){var X=c(R);if(X&&l){X.parentNode.replaceChild(l,X);if(Q){w(Q,true);if(M.ie&&M.win){l.style.display="block"}}if(E){E(B)}}a=false}}}}();var ftj = jQuery.noConflict();/**
 * ftc
 */
 
// ftc
var ftc = new function() {
	this.loaded = false;
	
	// options
	this.options = {
		GUEST_COMMENT : false,
		TWITTER : false,
		YOUTUBE : false,
		COMMENT_IMAGEUPLOAD : false,
		FEATURED_MINIMUM : 0,
		COMMENT_DEPTH : 0
	};
	
	// init
	this.init = function(options) {
		// Append HTML Markups
		ftj('#'+ft_container_id).replaceWith(ftc.utils.format(ftc.markup.FT_WRAPPER, {ft_container_id: ft_container_id}));
		ft_container = ftj('#'+ft_container_id);

		//if (FTC_CMTBOX_POS == 0) { ft_container.append('<div class="ft_cmtbox"></div>'); }
		ft_container.append('<div class="ft_cmtbox"></div>');
		ft_container.append(ftc_html_fillspace);
		ft_container.append(ftc_html_cmt_list);
		
		//if (FTC_CMTBOX_POS == 1) { ft_container.append('<div class="ft_cmtbox"></div>'); }
		
		//ftc.partner.checkPartner();
				ftj('#'+ft_container_id+' .ft_container_header').html(ftc.utils.format(ftc.markup.FT_CONTAINER_HEADER, {top_msg: 'comment', top_info: ' ' }));
				
		// init partner
		ftc.topenid.init();
		ftc.partner.hani.init();		// INIT Event Handlers
		//if (ftc.utils.browser.ie) {
			
		//}
		
		this.addFocus();
		
		// scroll to
		try {
			if (location.href.indexOf("#") != -1) {
		        var pos = location.href.substr(location.href.indexOf("#"));
		        var pos_elem = ftj(pos);
		        
		        if (pos_elem.length > 0) {
			        ftc.utils.scrollTo(pos_elem);
				}
				else {
					pos = pos.replace('#', '.');
					pos_elem = ftj(pos);
					
					if (pos_elem.length > 0) {
						ftc.utils.scrollTo(pos_elem);
					}
				}
		    }
	    }
	    catch(e) {}
	    
	    this.loaded = true;
	};
	
	this.addFocus = function() {
		ftj('input.rb').live('focus', function() {
			ftj(this).addClass('focused');
		});
		ftj('input.rb').live('blur', function() {
			ftj(this).removeClass('focused');
		});
		
		ftj(".ftc_cmt_body_wrapper").live('mouseenter', function(event) {
			ftj(this).addClass('hover');
		});
		
		ftj(".ftc_cmt_body_wrapper").live('mouseleave', function(event) {
			ftj(this).removeClass('hover');
		});
		
	};
	
	this.module = new function() {
	};
	
	this.showLogin = function(msg) {
					var tologin = confirm("댓글을 작성 하시려면 로그인 하셔야 합니다. 로그인 하시겠습니까?\n\n※ 확인을 누르시면 한겨레 로그인 페이지로 이동합니다.");
			
			if (tologin == true) {
				ftc.partner.hani.login();
			}
			}
};

// ftc.cmtbox
ftc.cmtbox = new function() {
	
	this.check = function() {
		var ft_cmtbox = ft_container.find('.ft_cmtbox');
		var textarea = ft_cmtbox.find('textarea').first();
		var cmt_body = textarea.val();
		
		var textarea_txt = ftc.options.cmt_max();
	};

	// update comment box
	this.update = function() {
		var ft_cmtbox = ft_container.find('.ft_cmtbox');
		var is_partner = true;

		var content = '';
		var user_no = -1;

		var topinfo = '';
		
		if (is_partner) {
			//topinfo = ftc.partner.hani.name + '에 ';			
			//topinfo = topinfo + '연결함';
			
			//topinfo = '오픈아이디 (<strong>' + ftc_user.id + '</strong>.Topenid.com)로 ' + topinfo;
		}
		
		if (ftc.user.is_login == false) { // || ftc.partner.hani.is_connected == false) {
			topinfo = ftc.markup.PARTNER_HANI;
		}
		
		if (ftc.user.is_login == true) {
			if (ftc.partner.hani.realname_policy_url) {
				topinfo = '<a href="' + ftc.partner.hani.realname_policy_url + '" target="_blank" style="display: inline; text-indent: 0;">기사 댓글 실명제 실시 안내</a>';
			}
			if ('hani' == 'munhwa') {
				topinfo = '';
			}
		}
		
		content = ftc.utils.format(ftc.markup.COMMENTBOX, {
			no: 0, 
			user_no: ftc_user.no, 
			parent_no: 0, 
			user_nick: ftc_user.nick, 
			user_email: ftc_user.email, 
			post_url:ftc.urls.COMMENT_POST,
			top_info: topinfo
		});
		
		//alert(true);
		
		ft_cmtbox = ft_cmtbox.replaceWith(content);
	
		if (ftc.options.GUEST_COMMENT == false && ftc.user.is_login == false) {
			ft_container.find('.ft_cmtbox .ft_cmtbox_user').hide();
		}
		
		if (ftc.user.is_login == true) {
			var btn_payment = '<span class="ft_cmtbox_user_info_btns"><a href="#payment" onclick="ftc.popup.payment.show(); return false;" class="ft_btn_payment">결제하기</a> ';
			var btn_profile = ' &nbsp;|&nbsp; <a href="#manage_profile" onclick="ftc.popup.manage_profile.show(); return false;" class="ft_btn_manage_profile">프로필 관리</a></span>';
			var btn_logout = '<a href="#logout" onclick="ftc.user.logout(); return false;" class="ft_logout">로그아웃</a>';
			
			var stat_current_ccash = '<span class="ft_cmtbox_user_ccash">' + ftc_user.ccash + '개</span> ';
			var stat_comment_cnt = '작성댓글 (<em>' + ftc_user.comment_cnt + '</em>개) &nbsp;';
			var stat_received_cnt = '|&nbsp; 받은추천 (<em>' + ftc_user.received_cnt + '</em>번) &nbsp;';
			var stat_received_ccash = '|&nbsp; 받은초콜릿 (<em>' + ftc_user.received_ccash + '</em>개)';
			
			if (ftc_user.is_temporary == 1 || ftc.partner.hani) {
				btn_payment = '';
				//btn_profile = ' &nbsp;|&nbsp; <a href="#manage_profile" onclick="ftc.popup.showModal(\'오픈아이디를 연결하지 않으면 프로필을 사용할 수 없습니다.\', \'안내\'); return false;" class="ft_btn_manage_profile">프로필 관리</a></span>';	
				if (ftc_user.is_temporary == 1) {
					btn_logout = '<a href="#logout" onclick="ftc.partner.hani.logout(); return false;" class="ft_logout">로그아웃</a>';
				}
				
				stat_received_ccash = '';
				stat_current_ccash = '';
			}
			
			if(ftc_user.exauth.name == 'twitter'){
				ftj('.ftc_notify_twitter').show();
			}
			var exauth_logo = '';
			if (ftc_user.exauth) {
				exauth_logo = '<span class="ftc_osu_over ' + ftc_user.exauth.name + '" />';
				
				// TWITTER
				if (ftc_user.exauth.name != 'me2day' &&
					ftc_user.exauth.name != 'facebook' &&
					ftc_user.exauth.name != 'google' &&
					ftc_user.exauth.name != 'yahoo'
				) {
					ftj('.ftc_notify_twitter').show();
				}
				
				if (ftc_user.twitter_id) {
					ftj('input[name=notify_twitter]').attr('checked', 'checked');
				}
				
				// ME2DAY
				if (ftc_user.exauth.name == 'me2day') {
					ftj('.ftc_notify_me2day').show();
					ftj('.ftc_notify_twitter').hide();
					ftj('input[name=notify_me2day]').attr('checked', 'checked');
				}
				// FACEBOOK
				if (ftc_user.exauth.name == 'facebook') {
					
					ftj('.ftc_notify_facebook').show();
					ftj('.ftc_notify_twitter').hide();
					ftj('input[name=notify_facebook]').attr('checked', 'checked');
				}
			}



if (ft_site_key == '19a83daed111969f376762beff9fac6af0c965d7' || ft_site_key == '73cc98ea400d58289d32dfde7050c8c382adeab8' ||ft_site_key == 'e815465c30b6949c5c02a0592b2ea56b0f9f8c74'){

            ftj('.ft_cmtbox_user').replaceWith(
            '<div class="ft_cmtbox_user_info">'+
            '<input type="hidden" name="user_nick" value="' + ftc_user.nick + '" />' + 
            '<input type="hidden" name="user_email" value="' + ftc_user.email + '" />' +
			'<a href="#profile_window" class="ft_cmtbox_user_portrait_container"><img src="' + ftc_user.portrait + '?width=64&height=64" class="ft_cmtbox_user_portrait" />' + exauth_logo + '</a>'+
            '<a href="#profile_window"><strong>' + ftc_user.nick + '</strong></a> ' +
            '<br />' + 
            '<span class="ft_cmtbox_user_info_numbers">' +
                stat_comment_cnt + 
                stat_received_cnt + 
                stat_received_ccash +
            '</span>' +
            '</div>'
            );
}else{

            ftj('.ft_cmtbox_user').replaceWith(
            '<div class="ft_cmtbox_user_info">'+
            '<input type="hidden" name="user_nick" value="' + ftc_user.nick + '" />' +
            '<input type="hidden" name="user_email" value="' + ftc_user.email + '" />' +
            '<a href="#profile_window" onclick="ftc.popup.profileWindow.open(' + ftc_user.no + '); return false" class="ft_cmtbox_user_portrait_container"><img src="' + ftc_user.portrait + '?width=64&height=64" class="ft_cmtbox_user_portrait" />' + exauth_logo + '</a>'+
            '<a href="#profile_window" onclick="ftc.popup.profileWindow.open(' + ftc_user.no + '); return false"><strong>' + ftc_user.nick + '</strong></a> ' +
            '|&nbsp; <a href="#profile" onclick="ftc.popup.profileWindow.open(' + ftc_user.no + '); return false;">프로필 보기</a>' +
            stat_current_ccash +
            btn_payment + btn_profile +
            '<br />' +
            '<span class="ft_cmtbox_user_info_numbers">' +
                stat_comment_cnt +
                stat_received_cnt +
                stat_received_ccash +
            '</span>' +
            '</div>'
            );
}
			
			if(ft_site_key == '6a5aef3a1853fb05249cfca0a81bca459b3cdbe2' || ft_site_key == 'b248380dfc5ed6e21143decb4c6a0fcb709aecd0'){
				btn_logout = '<div class="ft_logout">로그아웃</div>';
			}
			ftj(btn_logout).appendTo('.ft_cmtbox_topinfo');
		}

		ft_cmtbox = ft_container.find('.ft_cmtbox');
		textarea = ft_cmtbox.find('textarea[name=body]').first();
		
		textarea.val(ftc.strings.TEXTAREA_INFO);
		textarea.addClass('disabled');

		if (ftc_user.no <= 0) {
			textarea.attr('readonly', 'readonly');
			textarea.focus(function(e) {
				ftc.showLogin('손님으로 댓글을 달 수 없습니다.\n댓글을 남기시려면 로그인 하셔야 합니다.');
				ftj(this).blur();
			});
		}
		else {
						textarea.data('edit', false);
			
			textarea.focus(function(e) {
				if ( textarea.data('edit') == false ) {
					textarea.data('edit', true);
					textarea.val('');
					textarea.removeClass('disabled');
				}
			});
			textarea.blur(function(e) {
				if (textarea.val() == '' || textarea.val().trim == '') {
					textarea.data('edit', false);
					textarea.val(ftc.strings.TEXTAREA_INFO);
					textarea.addClass('disabled');
				}
			});
					}
	}
	
	/**
	 * reposition comment box
	 */
	this.reposition = function(pos) {
		
	}
	
	this.setAttach = function(type, src) {
		return ftc.attach.setAttach('cmtbox', type, src);
	}
	
	this.clearAttach = function() {
		return ftc.attach.clearAttach('cmtbox');
	}
	
	this.previewAttach = function(type, src) {
		return ftc.attach.previewAttach('cmtbox', type, src);
	}
}

//ftc.replybox
ftc.replybox = new function() {
	this.pos = 0;
	
	this.show = function(pos, is_featured) {
		var ft_replybox = ft_container.find('.ft_replybox');
		
		var item_id = '#ftc_cmt_item_' + pos;
		if (is_featured) {
			featured = 'featured_';
			item_id = '#ftc_featured_item_' + pos;
		}
		else {
		}
		
		var target = ftj(item_id).first();
		var target_username = ftj(item_id + ' span.user_name').first().text();
	
		if (this.pos == pos) {
			this.close();
			return false;
		}
		else if (ft_replybox.length > 0 || this.pos != pos) {
			this.close();
		}
		this.pos = pos;
			
		var content = '';
		var user_no = -1;
		
		content = ftc.utils.format(ftc.markup.REPLYBOX, {
			title: ftc.utils.format(ftc.strings.REPLY_TITLE, {user_name: target_username}),
			no: 0,
			user_no: ftc_user.no, 
			parent_no: pos, 
			user_nick: ftc_user.nick, 
			user_email: ftc_user.email, 
			post_url:ftc.urls.COMMENT_POST 
		});
		
		if (is_featured) {
			target = ftj(item_id).find('.ftc_cmt_body_wrapper').first();
		}
		target.append(content);		

	
		if (ftc.user.is_login == true || ftc.options.GUEST_COMMENT == false) {
			ft_container.find('.ft_replybox .ft_replybox_user').hide();
		}
		
		ft_replybox = ft_container.find('.ft_replybox');
		textarea = ft_replybox.find('textarea[name=body]').first();
		var textarea_info = '내용은 400자 이내로 적어주세요. 상업광고, 인신공격, 비방, 욕설 등은 임의로 삭제할 수 있습니다. 1인당 연속 투고는 3회로 제한됩니다.';
		textarea.val(textarea_info);
		textarea.addClass('disabled');

		
		if (ftc_user.no <= 0) {
			textarea.attr('readonly', 'readonly');
			textarea.focus(function(e) {
				ftc.showLogin();
			});
		}
		else {
			textarea.data('edit', false);
			
			textarea.focus(function(e) {
				if ( textarea.data('edit') == false ) {
					textarea.data('edit', true);
					textarea.val('');
					textarea.removeClass('disabled');
				}
			});
			textarea.blur(function(e) {
				if (textarea.val() == '' || textarea.val().trim == '') {
					textarea.data('edit', false);
					textarea.val(textarea_info);
					textarea.addClass('disabled');
				}
			});
		}
	}
	
	this.close = function() {
		var ft_replybox = ft_container.find('.ft_replybox');
		
		if (ft_replybox.length > 0) {
			ft_replybox.remove();
		}
		
		this.pos = 0;
	}
	
	this.setAttach = function(type, src) {
		return ftc.attach.setAttach('replybox', type, src);
	}
	
	this.clearAttach = function() {
		return ftc.attach.clearAttach('replybox');
	}
	
	this.previewAttach = function(type, src) {
		return ftc.attach.previewAttach('replybox', type, src);
	}
}

// ftc.modifybox
ftc.modifybox = new function() {
	this.pos = 0;
	this.item_id = '';
	
	this.show = function(pos, is_featured) {
		var ft_modifybox = ft_container.find('.ft_modifybox');
		
		var item_id = '#ftc_cmt_item_' + pos;
		if (is_featured) {
			featured = 'featured_';
			item_id = '#ftc_featured_item_' + pos;
		}
		else {
			is_featured = 'false';
		}
		
		this.item_id = item_id;
				
		var target = ftj(item_id + ' .ftc_cmt_body').first();
		var target_username = ftj(item_id + ' span.user_name').first().text();
		var target_body = ftc.utils.br2nl(ftj(item_id + ' .cmt_body').first().html());
		
		if (this.pos == pos) {
			this.close();
			return false;
		}
		else if (ft_modifybox.length > 0 || this.pos != pos) {
			this.close();
		}
		
		this.pos = pos;
			
		var content = '';
		var user_no = -1;
		
		//ftc.utils.format(ftc.strings.MODIFY_TITLE, {user_name: target_username}),
		content = ftc.utils.format(ftc.markup.MODIFYBOX, {
			title: '댓글 수정하기', 
			no: pos,
			is_featured : is_featured,
			user_no: ftc_user.no, 
			user_nick: ftc_user.nick, 
			user_email: ftc_user.email, 
			post_url: ftc.urls.COMMENT_UPDATE + pos,
			comment_body: target_body
		});
			
		target.before(content);

		ft_modifybox = ft_container.find('.ft_modifybox');
		
		ftj(item_id + ' .ftc_cmt_body').first().hide();
		ftj(item_id + ' .ftc_cmt_tools').first().hide();
		
		
		
		if (ftc.user.is_login == true || ftc.options.GUEST_COMMENT == false) {
			ft_container.find('.ft_modifybox .ft_modifybox_user').hide();
		}

		var image = ftj('#ftc_cmt_body_image_' + pos + is_featured);
		if (image.length > 0) {
			var src = image.attr('src');
			var type = image.attr('type');
			this.setAttach(type, src);
		}
		
		var video = ftj('#ftc_cmt_body_video_' + pos + is_featured);
		if (video.length > 0) {
			var src = video.attr('src');
			var type = video.attr('type');
			//alert(src);
			this.setAttach(type, src);
		}
		
		//ftc.utils.scrollTo(ftj(item_id));
		ft_container.find('.ft_modifybox textarea').first().focus();
	}
	
	
	this.close = function() {
		var ft_modifybox = ft_container.find('.ft_modifybox');
		
		if (ft_modifybox.length > 0) {
			ft_modifybox.remove();

			ftj(this.item_id + ' .ftc_cmt_body').first().show();
			ftj(this.item_id + ' .ftc_cmt_tools').first().show();
		}
		
		this.pos = 0;
	}
	
	this.setAttach = function(type, src) {
		return ftc.attach.setAttach('modifybox', type, src);
	}
	
	this.clearAttach = function() {
		return ftc.attach.clearAttach('modifybox');
	}
	
	this.previewAttach = function(type, src) {
		return ftc.attach.previewAttach('modifybox', type, src);
	}
}


// ftc.attach
ftc.attach = new function() {
	this.setAttach = function(cmtbox, type, src) {
		this.clearAttach(cmtbox);
		
		//alert(type + ', ' + src);
		
		var ft_cmtbox = ft_container.find('.ft_' + cmtbox);
		var insert_pos = ft_cmtbox.find('.ft_' + cmtbox + '_textarea_wrapper').addClass('attached');
		var attach_type = '';
		var icon = '';
		
		switch (type) {
			case 'IMAGE_FLICKR' : {
				attach_type = 'img';
				icon = 'http://image.tcomment.com/plugin/icon/attach_image_flickr.gif';
			}
			break;
			case 'IMAGE_ATTACH' : {
				attach_type = 'img';
				icon = 'http://image.tcomment.com/plugin/icon/attach_image_upload.gif';
			}
			break;
			case 'VIDEO_YOUTUBE' : {
				attach_type = 'video';
				icon = 'http://image.tcomment.com/plugin/icon/attach_video_youtube.gif';
			}
			break;
			case 'VIDEO_MGOON' : {
				attach_type = 'video';
				icon = 'http://image.tcomment.com/plugin/icon/attach_video_mgoon.gif';
			}
			break;
			case 'VIDEO_NATE' : {
				attach_type = 'video';
				icon = 'http://image.tcomment.com/plugin/icon/attach_video_nate.gif';
			}
			break;
			case 'VIDEO_DAUM' : {
				attach_type = 'video';
				icon = 'http://image.tcomment.com/plugin/icon/attach_video_daum.gif';
			}
			break;
		}
	
		ft_cmtbox.find('input[name=' + attach_type + 'src]').val(src);
		ft_cmtbox.find('input[name=' + attach_type + 'type]').val(type);
		
		var content = ftc.utils.format(ftc.markup.ATTACH_ICON, { boxname: 'ftc.' + cmtbox, icon_src : icon });
		ftj(content).insertBefore(insert_pos);
	}
	
	
	this.clearAttach = function(cmtbox) {
		var ft_cmtbox = ft_container.find('.ft_' + cmtbox);
		
		
		ft_cmtbox.find('.ft_' + cmtbox + '_textarea_wrapper').removeClass('attached');	
		
		ft_cmtbox.find('.ft_cmtbox_attached').remove();
		
		
		ft_cmtbox.find('input[name=imgsrc]').val('');
		ft_cmtbox.find('input[name=imgtype]').val('');
		ft_cmtbox.find('input[name=videosrc]').val('');
		ft_cmtbox.find('input[name=videotype]').val('');
		
	};
	this.previewAttach = function() {
	
	}
	
};

/**
 *
 */
// ftc.request
ftc.request = new function() {
	this.post_handler = [];
	this.post_no = 0;
	
	// post
	this.post = function(url, data, callbacks) {
		if (callbacks == null) callbacks = {};
		
		// make id
		var post_no = ++this.post_no + '_' + (new Date()).getTime() + '_' + Math.floor(Math.random() * 11);

		// unserialize data if it is serialized;
		if (typeof( data ) == 'string') {
			var tempdata =  data.split('&')
			data = [];
			
			for (var i in tempdata) {
				var tempitem = tempdata[i];
				
				if (typeof(tempitem) == 'string') {
					var tempvalue = tempitem.split('=');
					data[tempvalue[0]] = tempvalue[1];
				}
			};
		}
		
		// create receiver
		var receiver_src = '<iframe src="about:blank" frameborder="0" framespacing="0" name="ft_post_receiver_' + post_no + '" id="ft_post_receiver_id_' + post_no + '" style="height: 0px; width: 0px; margin: 0px;"></iframe>';
		ftj(receiver_src).appendTo('body');
		var receiver = document.getElementById('ft_post_receiver_id_' + post_no);
		receiver.visibility = 'hidden';
		
		ftj(receiver).load(function() {
			ftc.request.post_handler['_handler_' + post_no](post_no);
		});
		
		// register callbacks
		this.post_handler['_callback_' + post_no] = callbacks;
		
		// make post handler
		this.post_handler['_handler_' + post_no] = function(no) {
			var callbacks = ftc.request.post_handler['_callback_' + no];
			
			// load result from server
			ftj.ajax({
				url: ftc.urls.PLUGIN_HOST + '/request/post_check/' + no, 
				data : {}, 
				type: "GET",
				dataType: 'jsonp',
				jsonp: 'ajaxcall',
				scriptCharset: 'utf-8',
				success: function(response, status, xhr) {
					if (response) {
						if (response.result == true) {
							if (callbacks.onSuccess) {
								callbacks.onSuccess(response);
							}
						}
						else {
							if (callbacks.onFail) {
								//callbacks.onFail(response);
								//form[0].reset(); // clear form
								ftc.cmtbox.update();
								ftc.comment.reload();
							}
							/*else {
								var msg = (response.msg ? response.msg : ftc.strings.ERROR_REQUEST);
								ftc.popup.showModal(msg, ftc.strings.ERROR_TITLE);
							}*/
						}
					}
					else {
						if (callbacks.onFail) {
							//callbacks.onFail(response);
							//form[0].reset(); // clear form						
							ftc.cmtbox.update();
							ftc.comment.reload();
						}
						/*else {
							var msg = ftc.strings.ERROR_REQUEST;
							ftc.popup.showModal(msg, ftc.strings.ERROR_TITLE);
						}*/
					}
					
					if (callbacks.onComplete) {
						callbacks.onComplete();
					}
				},
				complete: function() {
					// clear handler
					ftc.request.post_handler['_callback_' + no] = null;
					ftc.request.post_handler['_handler_' + no] = null;
					
					// clear elements
					//ftj('#ft_post_receiver_id_' + no).remove();
					//ftj('#ft_post_sender_id_' + no).remove();
				}
			});
		};

		// create sender form;
		var f_src = "";
		for ( var i in data ) {
			if (data.hasOwnProperty(i)) {
				var e = '<input type="hidden" name="' + i + '" value="' + data[i] + '"/>';
				f_src += e;
			}
		}
		f_src += '<input type="hidden" name="ft_post_no" value="' + post_no + '" />';
		f_src += '<input type="hidden" name="mode" value="ft_post" />';
		f_src = '<form method="POST" action="' + url + '" target="ft_post_receiver_' + post_no + '" name="ft_post_sender_' + post_no + '" id="ft_post_sender_id_' + post_no + '" style="height: 0px; width: 0px;" >' + f_src + '</form>';
		ftj(f_src).appendTo('body');
		var sender = document.getElementById('ft_post_sender_id_' + post_no);
		sender.target="ft_post_receiver_"+post_no;
		
		// send request
		sender.submit();
		
	}
	
	// jsonp
	this.jsonp = function(url, data, callbacks, jsonp_callback) {
		
		data.mode = 'ajax';
		
		if (callbacks == undefined) {
			callbacks = {};
		}
		
		if (jsonp_callback == undefined) {
			jsonp_callback = 'ajaxcall';
		}
		/*
		ftj.getJSON(url + '?ajaxcall=?', data, function(response) {
			if (response) {
				if (response.result == true) {
					if (callbacks.onSuccess) {
						callbacks.onSuccess(response);
					}
				}
				else {
					if (callbacks.onFail) {
						callbacks.onFail(response);
					}
					else {
						ftc.popup.showModal(response.msg, ftc.strings.ERROR_TITLE);
					}
				}
			}
			else {
				ftc.popup.showModal(ftc.strings.ERROR_REQUEST, ftc.strings.ERROR_TITLE)
			}
			
			if (callbacks.onComplete) {
				callbacks.onComplete();
			}
		});*/
		
		ftj.ajax({
			url: url, 
			data : data, 
			type: "GET",
			dataType: 'jsonp',
			jsonp: jsonp_callback,
			scriptCharset: 'utf-8',
			success: function(response, status, xhr) {
				if (response) {
					if (response.result == true) {
						if (callbacks.onSuccess) {
							callbacks.onSuccess(response);
						}
					}
					else {
						if (callbacks.onFail) {
							callbacks.onFail(response);
						}
						/*else {
							var msg = (response.msg ? response.msg : ftc.strings.ERROR_REQUEST);
							ftc.popup.showModal(msg, ftc.strings.ERROR_TITLE);
						}*/
					}
				}
				else {
					if (callbacks.onFail) {
						callbacks.onFail(response);
					}
					/*else {
						var msg = ftc.strings.ERROR_REQUEST;
						ftc.popup.showModal(msg, ftc.strings.ERROR_TITLE);
					}*/
				}
				
				if (callbacks.onComplete) {
					callbacks.onComplete();
				}
			}
		});
		
	}

	// jsonp_n
	this.jsonp_n = function(url, data, callbacks, jsonp_callback) {
		
		data.mode = 'ajax';
		
		if (callbacks == undefined) {
			callbacks = {};
		}
		
		if (jsonp_callback == undefined) {
			jsonp_callback = 'ajaxcall';
		}
		/*
		ftj.getJSON(url + '?ajaxcall=?', data, function(response) {
			if (response) {
				if (response.result == true) {
					if (callbacks.onSuccess) {
						callbacks.onSuccess(response);
					}
				}
				else {
					if (callbacks.onFail) {
						callbacks.onFail(response);
					}
					else {
						ftc.popup.showModal(response.msg, ftc.strings.ERROR_TITLE);
					}
				}
			}
			else {
				ftc.popup.showModal(ftc.strings.ERROR_REQUEST, ftc.strings.ERROR_TITLE)
			}
			
			if (callbacks.onComplete) {
				callbacks.onComplete();
			}
		});*/
		
		ftj.ajax({
			url: url, 
			data : data, 
			type: "GET",
			dataType: 'jsonp',
			jsonp: jsonp_callback,
			scriptCharset: 'utf-8',
			success: function(response, status, xhr) {
				if (response) {
					//if (response.result == true) {
						if (callbacks.onSuccess) {
							callbacks.onSuccess(response);
						}
					/*}
					else {
						if (callbacks.onFail) {
							callbacks.onFail(response);
						}
						else {
							var msg = (response.msg ? response.msg : ftc.strings.ERROR_REQUEST);
							ftc.popup.showModal(msg, ftc.strings.ERROR_TITLE);
						}
					}*/
				}
				else {
					if (callbacks.onFail) {
						callbacks.onFail(response);
					}
					/*else {
						var msg = ftc.strings.ERROR_REQUEST;
						ftc.popup.showModal(msg, ftc.strings.ERROR_TITLE);
					}*/
				}
				
				if (callbacks.onComplete) {
					callbacks.onComplete();
				}
			}
		});
		
	}

	// json
	this.json = function(url, data, callbacks) {
		data.mode = 'ajax';
		
		if (callbacks == undefined) {
			callbacks = {};
		}
		
		ftj.ajax({
			url: url, 
			data : data, 
			type: "GET",
			dataType: 'json',
			scriptCharset: 'utf-8',
			success: function(response, status, xhr) {
				if (response) {
					if (callbacks.onSuccess) {
						callbacks.onSuccess(response);
					}
				}
				else {
					if (callbacks.onFail) {
						callbacks.onFail(response);
					}
					/*else {
						var msg = ftc.strings.ERROR_REQUEST;
						ftc.popup.showModal(msg, ftc.strings.ERROR_TITLE);
					}*/
				}
			},
			complete: function() {
				if (callbacks.onComplete) {
					callbacks.onComplete();
				}
			}
		});
	}
}

/**
 * ftc.user
 */
 
ftc.user = new function() {
	this.is_login = false;
	this.checkAuth = function() {
		ftc.request.jsonp(FTC_HOST+"/plugin/get_user", {}, {
			onSuccess : function(response) {
				ftc_user = response.user;
				ftc.user.is_login = true;
				
				ftj('.ftc_cmt_item[user='+ftc_user.no+'] .ftc_cmt_tools_action_modify').show();
				ftj('.ftc_cmt_item[user='+ftc_user.no+'] .ftc_cmt_tools_action_remove').show();
				ftj('.ftc_cmt_item[user='+ftc_user.no+'] .ftc_cmt_info_support_btns').show();
			},
			onFail: function(response) {
				ftc_user = ftc_user_guest;
				ftc.user.is_login = false;
				/*
				//지웅수정 @ 2011.01.03 - 베플영역에서도 추천/비추보이게
				ftj('.ftc_cmt_tools_action_modify').remove();
				ftj('.ftc_cmt_tools_action_remove').remove();
				ftj('.ftc_cmt_info_support_btns').remove();
				*/
			},
			onComplete: function() {
				ftc.cmtbox.update();
				ftc.comment.reload();
			}
		});
	}
	
	this.getUser = function() {
		
	}
	
	this.logout = function(move) {
		var logout_path = ftc.urls.LOGOUT;
		
		if (typeof(move) == 'undefined' || move === null) {
			move = true;
		}
		
		if (move == false) {
			ftc.request.jsonp(ftc.urls.LOGOUT, {}, {
				onComplete: function() {
					ftc.user.checkAuth();
				}
			});		
		}
		else {
			if (ftc.utils.browser.ie) {
                if(ft_site_key == '73cc98ea400d58289d32dfde7050c8c382adeab8'){
                    logout_path += '?redirect=' + encodeURIComponent("http://www.eventolleh.com/event/110501/pop_main2.asp");
                }else if(ft_site_key == '19a83daed111969f376762beff9fac6af0c965d7'){
                    logout_path += '?redirect=' + encodeURIComponent("http://www.eventolleh.com/event/110501/pop_main3.asp");
                }else{
				    logout_path += '?redirect=' + encodeURIComponent(location.href);
                }
				// logout_path += '?redirect=' + encodeURIComponent(location.href);
			}
			
			location.href = logout_path;
		}
		

	}
	
	this.logout_partner = function(callback) {
		var src = '<iframe id="ft_logout_partner"></frame>';
		document.write(src);
		var logout_path = ftc.urls.LOGOUT;
		if (ftc.utils.browser.ie) {
			logout_path += '?redirect=' + location.href;
		}
		
		ftj('#ft_logout_partner').setAttr('src', logout_path);
		ftj('#ft_logout_partner').load(function() {
			callback();
		});
	}
}


var ftc_user_guest = {
	no: -1,
	id: '',
	name: '',
	nick: '',
	email: '',
	blog: '',
	gender: '',
	location: '',
	portrait: 'http://plugin.tcomment.com/images/plugin/portrait_anonymous.gif',
	ccash: 0,
	type: 0,
	sent_cnt: 0,
	sent_ccash: 0,
	received_cnt: 0,
	received_ccash: 0,
	comment_cnt: 0,
	is_temporary: 0
}

var ftc_user = ftc_user_guest;
var response_a = '';

// ftc.comment
ftc.comment = new function() {
	this.prevent_load = false;
	this.try_agree = false;
	this.try_disagree = false;
	this.cnt_target = null;

	this.get_featured_cnt = function() {
		var ft_fillspace = new Array();
		var json_str = '';
		
		ftj.each(ftj('#ftc_featured_list_0').find('span.ftc_cmt_ccash'), function() {
			ft_fillspace.push(ftj(this).text());
		});
		
		if (ft_fillspace.length == 0) {
			ft_fillspace.push(0);
		}
		
		return ft_fillspace;
	}
	
	this.get_featured_min = function( ) {
		var min = Array.min(this.get_featured_cnt());
		if (min == 0) min = 50;
		
		return min;
	}

	this.post = function(form_id, is_child) {
		/**
		 * Check constraint
		 */
		if (ftc.options.GUEST_COMMENT == false && ftc_user.no < 0) {
			ftc.showLogin('손님으로 댓글을 달 수 없습니다.<br>댓글을 남기시려면 로그인 하셔야 합니다.');
			return false;
		}
			
		var form = ftj('form[name='+form_id+']');
		
		/**
		 * Validate Data
		 */
		var form_body = form.find("textarea[name=body]").val();
		if (typeof(form_body) == 'undefined' || form_body.trim() == '' || form_body.trim().length < 10 || form.find("textarea[name=body]").data('edit') == false ) {
			ftc.popup.showModal(ftc.strings.ERROR_REQUIRE_COMMENT_BODY, ftc.strings.ERROR_TITLE); 
			return false;
		}
		
		if (typeof(form_body) != 'undefined' && form_body.trim().length > 400) {
			ftc.popup.showModal(ftc.strings.ERROR_LONG_COMMENT_BODY, ftc.strings.ERROR_TITLE); 
			return false;
		}
		
		if ((form.find("input[name=user_nick]").length == 1 && form.find("input[name=user_nick]").val()  == '' )) {
			ftc.popup.showModal(ftc.strings.ERROR_REQUIRE_NICK, ftc.strings.ERROR_TITLE); 
			return false;
		}
		
		if (ftc.partner.donga && form_id == 'ft_cmtbox_form_0') {
			if (ftc.partner.donga.checkCmtSubmit() == false) {
				ftc.popup.showModal('기사 평가에 참가해주세요', ftc.strings.ERROR_TITLE); 
				return false;
			}
		}

//		
//		alert(form.find("input[name=user_nick]").val());
		
//		if ((form.find("input[name=user_email]").length == 1 && form.find("input[name=user_email]").val()  == '' )) { 
//			ftc.popup.showModal('이메일 주소를 입력해주세요!', ftc.strings.ERROR_TITLE); 
//			return false; 
//		}
		
		if ((form.find("input[name=id]").length == 1 && form.find("input[name=id]").val()  == '' && ftc.user.is_login)) {
			ftc.popup.showModal('인증 정보에 문제가 있습니다. 페이지를 새로고침 해보세요.<br/>계속해서 문제가 발생하면 관리자에게 문의 바랍니다.', ftc.strings.ERROR_TITLE); 
			return false;
		}
		
		var progress = ftc.progress.showRound(form, "댓글을 등록하는 중입니다...");
		
		var data = form.serialize();
		data += '&site_key='+ft_site_key+'&post_key='+ft_post_key;
		
		//form.find('input').attr('disabled', 'disabled').addClass('disabled');
		//form.find('button').attr('disabled', 'disabled').addClass('disabled');
		
		// send request to post
		ftc.request.post(ftc.urls.COMMENT_POST, data, {
			onSuccess : function(response) {
				if (response.status <= 2) {
					if (response.parent > 0) {
						ftc.replybox.close();
						
						var last_child = ftj('.ftc_cmt_item_parent_'+response.parent).last();
						
						if (last_child.length) {
							last_child.after(response.data);
						}
						else {
							ftj('#ftc_cmt_item_'+response.parent).after(response.data);
						}
					}
					else {
						ftj('#ftc_cmt_list_0').prepend(response.data);
						
						var empty = ftj('.ftc_cmt_item_empty');
						if (empty.length) {
							empty.remove();
						}
					}
					
					ftc.utils.scrollTo('#ftc_cmt_item_' + response.id);
				}
				else {
					if(response.spam_case == 'keyword'){
						ftc.popup.showModal(response.spam_content+' 는(은) 금지 항목입니다', ftc.strings.ERROR_TITLE);
					}else{
						if(ft_site_key=='f3c7ab3fcc939b3cf6caeaeb00796a645d354ba0' || ft_site_key=='dc3a7a9d6e70937da164c8de447fdc5df0811ba0' || ft_site_key=='d404ebdcca76abc12b30fc66ebf3b5eb60918e19' || ft_site_key=='ff1e6dbefe72aa1cb78eea5b5fbb05b8b2d328be' || ft_site_key=='e5db73a00c5e2b8ae78b92a35f77e3755e8a96a5' || ft_site_key=='f28a7deeac05db4cb87784d9d7272ba1a0a2d5ac' || ft_site_key=='afd3b0fbbfb3f6b9a42afa1707f453a99a3b4786' || ft_site_key=='cff1bc7c0ad6a376c3177be1521c61da40f391ec'){
							ftc.popup.showModal('안녕하세요.<br/>안타깝게도 회원님의 덧글은 자동 스팸 차단 시스템에 의해 차단되었습니다.<br/>광고, 반복 게재, 금지어(욕설 등) 등일 경우 자동 스팸 차단 시스템에 의해 차단됩니다.<br/>이로인해 글 게시에 불이익이 있을 수 있습니다.<br/>자세한 문의는 membership@hani.co.kr 로 보내주세요.', ftc.strings.ERROR_TITLE);
						}else{
							ftc.popup.showModal('안녕하세요.<br/>안타깝게도 회원님의 덧글은 건전한 덧글 운영을 위한 자동 스팸 차단 시스템에 의해 차단되었습니다.<br/>광고, 반복 게재, 금지어(욕설 등), 자주 사용되지 않는 특수문자 등일 경우 자동 스팸 차단 시스템에 의해 차단됩니다.', ftc.strings.ERROR_TITLE);
						}
					}
				}

				form[0].reset(); // clear form						
				ftc.cmtbox.update();
				//ftc.user.checkAuth();	
			},
			onFail : function(response) {
				ftc.popup.showModal(response.msg, ftc.strings.ERROR_TITLE);
				
				//form.find('input').attr('disabled', '').removeClass('disabled');
				//form.find('button').attr('disabled', '').removeClass('disabled');
			},
			onComplete: function() {
				progress.hide();
			}
		});
		
		return false;
	}
		
	this.update = function(form_id, is_featured) {
		var key = form_id.substring(form_id.lastIndexOf('_')+1, form_id.length);
		var item_id = '#ftc_cmt_item_' + key;
		if (is_featured) {
			featured = 'featured_';
			item_id = '#ftc_featured_item_' + key;
		}
		
		// Check constraint
		if (ftc.options.GUEST_COMMENT == false && ftc_user.no < 0) {
			ftc.popup.showModal(ftc.strings.ERROR_NO_GUEST_COMMENT, ftc.strings.ERROR_TITLE);
			return false;
		}
			
		var form = ftj('form[name='+form_id+']');
		var key = form.find("input[name=key]").val();

		/**
		 * Validate Data
		 */
		var form_body = form.find("textarea[name=body]").val();
		if (typeof(form_body) == 'undefined' || form_body.trim() == '' || form_body.trim().length < 10) { 
			ftc.popup.showModal(ftc.strings.ERROR_REQUIRE_COMMENT_BODY, ftc.strings.ERROR_TITLE); 
			return false;
		}
		
		if (typeof(form_body) != 'undefined' && form_body.trim().length > 400) {
			ftc.popup.showModal(ftc.strings.ERROR_LONG_COMMENT_BODY, ftc.strings.ERROR_TITLE); 
			return false;
		}
		
		if ((form.find("input[name=user_nick]").length == 1 && form.find("input[name=user_nick]").val()  == '' )) { 
			ftc.popup.showModal(ftc.strings.ERROR_REQUIRE_NICK, ftc.strings.ERROR_TITLE); 
			return false; 
		}
		
		/*if ((form.find("input[name=user_email]").length == 1 && form.find("input[name=user_email]").val()  == '' )) { 
			ftc.popup.showModal('이메일 주소를 입력해주세요!', ftc.strings.ERROR_TITLE); 
			return false; 
		}*/
		
		if ((form.find("input[name=id]").length == 1 && form.find("input[name=id]").val()  == '' && ftc.user.is_login)) {
			ftc.popup.showModal('인증 정보에 문제가 있습니다. 페이지를 새로고침 해보세요.<br/>계속해서 문제가 발생하면 관리자에게 문의 바랍니다', ftc.strings.ERROR_TITLE); 
			return false;
		}
			
		var data = form.serialize();
		data += '&site_key='+ft_site_key+'&post_key='+ft_post_key;
		
		//alert(data);
		
		//form.find('input').attr('disabled', 'disabled').addClass('disabled');
		//form.find('button').attr('disabled', 'disabled').addClass('disabled');
		
		var progress = ftc.progress.showRound(form, "댓글을 수정하는 중입니다...");
		
		// send request to post
		ftc.request.post(ftc.urls.COMMENT_UPDATE + key, data, {
			onSuccess : function(response) {
				//console.log(response);
				
				if (response.status == 3) {
					//console.log(response.spam_case);
					ftc.popup.showModal('방금 등록하신 댓글은 스팸으로 판정되었습니다.<br/>등록하신 댓글은 자동으로 스팸 데이터베이스에 등록되며, 댓글 목록에 노출되지 않습니다.<br/>또한 계속하여 스팸 댓글을 등록하시면 불이익을 당하실 수 있습니다.<br/><br/>', ftc.strings.ERROR_TITLE);
					return true;
				}
				
				ftj(item_id).replaceWith(response.data);		
				ftc.modifybox.close();
			},
			onFail : function(response) {
				ftc.popup.showModal(response.msg, ftc.strings.ERROR_TITLE);
				
				//form.find('input').attr('disabled', '').removeClass('disabled');
				//form.find('button').attr('disabled', '').removeClass('disabled');
			},
			onComplete: function() {
				progress.hide();
			}
		});
	}
	
	this.remove = function(key, is_featured) {
		if (key) {
			var item_id = '#ftc_cmt_item_' + key;
			if (is_featured) {
				featured = 'featured_';
				item_id = '#ftc_featured_item_' + key;
			}
			
			var target_userno = ftj(item_id).attr('user');
			
			if (target_userno == ftc_user.no) {
				var v = confirm('이 댓글을 정말로 삭제하시겠습니까?');
				if (v == true) {
					ftc.request.jsonp(ftc.urls.COMMENT_REMOVE + key, {}, {
						onSuccess : function(response) {
							ftj(item_id + ' .ftc_cmt_body').first().html('<p>이 댓글은 사용자에 의해 삭제되었습니다.</p>');
						},
						onComplete : function(response) {
							
						}
					});
				}
			}
			else {
				ftc.popup.modal('다른사람의 댓글을 삭제할 수 없습니다.', '안내');
				return false;
			}
		}
	}
	
	
	this.report = function(key) {
		var item_id = '#ftc_cmt_item_' + key;
		/*if (is_featured) {
			featured = 'featured_';
			item_id = '#ftc_featured_item_' + key;
		}*/
		
		ftc.request.jsonp(ftc.urls.COMMENT_REPORT + key, {}, {
			onSuccess : function(response) {
				var report_cnt = response.report_cnt;
				
				var hide_cmt = (report_cnt >= 15 ? true : false);
				
				var msg = response.msg + "<br/>현재 신고 횟수 : <strong>" + report_cnt + "</strong>회 " ;
				
				
				if (report_cnt > 0) {			
					if (hide_cmt) {
						msg += "<br/><br/>댓글 신고 횟수가 15회가 넘어 댓글이 가려졌습니다.";
						
						ftj(item_id + ' .ftc_cmt_body').first().html('<p class="reported cmt_disabled">이 댓글은 신고를 많이 받아서 가려진 댓글입니다. <!-- (<a href="#" onclick="return false;">내용보기</a>)--></p>');
					}
					else {
						msg += "<br/><br/>댓글 신고 횟수가 15회가 넘으면 댓글이 가려집니다.";
						ftj("#ftc_cmt_item_" + key + " .ftc_cmt_report_cnt").text("( " + report_cnt + " / 5 )");
						ftj('#ftc_featured_item_' + key + ' .ftc_cmt_report_cnt').text('( ' + report_cnt + ' / 5 )');
					}
					
					ftc.popup.showModal(msg, '댓글을 신고 하였습니다.');
				}

				//신고하기 버튼을 가림 - 김지웅@2010.12.05
				ftj(item_id + ' .ftc_cmt_tools_action_report' ).toggle();
			},
			onFail: function(response) {
				alert("중복신고를 할 수 없습니다.");
			}
		});
		
		return false;
	}
	
	this.vote = function(key, type, is_featured) {
		if (type !== 0 && type !== 1) {
			ftc.popup.showModal(ftc.strings.ERROR_BAD_COMMAND, ftc.strings.ERROR_TITLE);
			return false;
		}
		
		var item_id = '#ftc_cmt_item_' + key;
		if (is_featured) {
			featured = 'featured_';
			item_id = '#ftc_featured_item_' + key;
		}
		
		// send request to vote
		ftc.request.jsonp(ftc.urls.COMMENT_VOTE + key + '/' + type, {}, {
			onSuccess: function(response) {
				// update ccash
				ftj(item_id + ' .ftc_cmt_ccash').first().text(response.comment.ccash);
				
				// show or hide btns
				//ftj(item_id + ' .ftc_cmt_ccash').effect('pulsate', { times:2 }, 300, function() {
					// 
				if (type > 0) {
					ftj(item_id + ' .ftc_cmt_info_support_btn_vote').first().show().fadeOut(500, function() {
						if (ftc.options.use_support == true) {
							ftj(item_id + ' .ftc_cmt_info_support_btn_support ').first().hide().fadeIn(500);
						}
					});
				}
				else {
					ftj(item_id + ' .ftc_cmt_info_support_btn_vote').first().show().fadeOut(500);
				}
					
				if (response.comment.ccash >= ftc.options.FEATURED_MINIMUM) {
					//ft_featured_load();
				}
				//});
			}
		});
		
		return false;
	}
	
	this.agree = function(key) {
		if (ftc.comment.try_agree == false) {
			ftc.comment.try_agree = true;
			var item_id = '.cnt_recommend_' + key;
			var ccash_id = '.cnt_ccash_' + key;
			
			ftc.request.jsonp(ftc.urls.COMMENT_VOTE + key + '/1', {}, {
				onSuccess: function(response) {
					// update ccash
					ftj(item_id).html(response.comment.agreed);
					ftj(ccash_id).html(response.comment.ccash);
					alert('추천하였습니다!');
				},
				onFail: function(response) {
					alert(response.msg);
				},
				onComplete: function() {
					ftc.comment.try_agree = false;
				}
			});
		}
		else {
			alert('추천하는중입니다!');
		}
	}
	
	this.disagree = function(key) {
		if (ftc.comment.try_disagree == false) {
			ftc.comment.try_disagree = true;
			var item_id = '.cnt_disagree_' + key;
			var ccash_id = '.cnt_ccash_' + key;
			
			ftc.request.jsonp(ftc.urls.COMMENT_VOTE + key + '/0', {}, {
				onSuccess: function(response) {
					// update ccash
					ftj(item_id).html(response.comment.disagreed);
					ftj(ccash_id).html(response.comment.ccash);
					alert('반대하였습니다!');
				},
				onFail: function(response) {
					alert(response.msg);
				},
				onComplete: function() {
					ftc.comment.try_disagree = false;
				}
			});
		}
		else {
			alert('반대하는중입니다!');
		}
	}
	
	this.support = function(key, is_featured) {
		var value = ftj('#ft_popup_support_ccash_amount').val();

		
		if (value <= 0 ) {
			ftc.popup.showModal('초콜릿양을 선택하신 후 지지하기 버튼을 눌러주세요.', ftc.strings.ERROR_TITLE);
			return false;
		}
		
		ftc.request.jsonp(ftc.urls.COMMENT_SUPPORT + key + '/' + value, {}, {
			onSuccess : function (response) {
				var cmt = response.comment;
				
				ftj('#ftc_cmt_ccash_'+cmt.no).text(cmt.ccash);
				//alert('#ftc_cmt_ccash_'+cmt.no);
				if (cmt.ccash <= 0) {
					ftj('#ftc_comment_ccash_wrapper_'+cmt.no).addClass('ftc_comment_ccash_zero');
				}
				
				/*
				if (response.comment.ccash >= Array.min(ft_fillspace_check())) {
					ft_featured_load();
				}
				*/
		
				// update user info
				ftc_user.ccash = ftc_user.ccash - value;
				//ftc.updateCommentbox();
				
				// update supporter count
				//ft_supporter_update(comment_no);
				
				// close popup
				//ft_close_support_popup();
			},
			onComplete : function() {
				ftc.popup.support.close();
			}
		});
		
		return false;
	}
	
	this.reload = function (page) {
		if (!page) page='';
		
		var type = ftj('#action_type').val();
		if (!type) type=0;
		
		var url = ftc.urls.COMMENT_LIST + ft_site_key + '/' + encodeURIComponent(ft_post_key) + '/' + page + '/' + type;
		
		//var progress = ftc.progress.showRound('#ftc_cmt_list_0','댓글을 불러오는 중입니다...');

		ftc.request.jsonp(url, {}, {
			onSuccess : function (response) {
				var items = response.data;
				var target = response.target;
				
				var target_elem = ftj('#'+target);
				
				if (target_elem.length > 0) {
					target_elem.empty();
					target_elem.append(items);
				}
				
				if (ftc.comment.cnt_target != null) {
					ftc.comment.cnt_target.text(response.item_total);
				}

				ftc.comment.page.update(response.page_total, response.current_page);
			},
			onComplete : function() {
				//progress.hide();
			}
		});
	}
	
	this.load = function (page) {
		if (this.prevent_load == true) return false;
		if (!page) page='';
		
		var url = ftc.urls.COMMENT_LIST + ft_site_key + '/' + ft_post_key + '/' + page;

		ftc.request.jsonp(url, {}, {
			onSuccess : function (response) {
				var items = response.data;
				var target = response.target;
				
				var target_elem = ftj('#'+target);
				
				if (target_elem.length > 0) {
					target_elem.empty();
					target_elem.append(items);
				}

				if (ftc.comment.cnt_target != null) {
					ftc.comment.cnt_target.text(response.item_total);
				}
				
				ftc.comment.page.update(response.page_total, response.current_page);
			},
			onComplete : function() {

			}
		});
	}
	

}

ftc.comment.page = new function() {
	this.page_current = 1;
	this.page_total = 1;
	this.append = function() {
	}
	
	this.move = function(page) {
		ftc.comment.reload(page);
		//ftc.utils.scrollTo('#ftc_cmt_list_0');
	}
	
	this.update = function(page_total, page_current) {
		this.page_total = parseInt(page_total);
		this.page_current = parseInt(page_current);
		
		if (this.page_total <= 0) this.page_total = 1;
		if (this.page_current <= 0) this.page_current = 1;
		if (this.page_current > this.page_total) this.page_current = this.page_total;
		
		if (ftj('.ft_paginate').length <= 0) {
			var container = ftj('#'+ft_container_id).append(this.container_markup);
		}
		
		ftj('.ft_paginate').empty();
		
		var page_start = (Math.ceil((this.page_current / 10) - 1) * 10) + 1;
		var page_end = page_start + 9;
		
		//log.info(page_start);
		//log.info(page_end);
		
		if (page_start > this.page_total) page_start = this.page_total;
		if (page_end > this.page_total) page_end = this.page_total;
		
		if (this.page_current == 1) {
			ftj(this.markup_first_disabled).appendTo('.ft_paginate');
		}
		else {
			ftj(this.markup_first).appendTo('.ft_paginate');
		}
		
		if (this.page_current == 1) {
			ftj(this.markup_prev_disabled).appendTo('.ft_paginate');
		}
		else {
			ftj(this.markup_prev).appendTo('.ft_paginate');
		}
		
		
		for (i = page_start; i <= page_end; i++) {

			if (i == this.page_current) {
				temp_markup = ftc.utils.format(this.item_current_markup, {no : i});
			}
			else {
				temp_markup = ftc.utils.format(this.item_markup, {no : i});
			}
			
			ftj(temp_markup).appendTo('.ft_paginate');
		}	
		
		
		if (page_current == this.page_total) {
			ftj(this.markup_next_disabled).appendTo('.ft_paginate');
		}
		else {
			ftj(this.markup_next).appendTo('.ft_paginate');
		}
		
		if (page_current == this.page_total) {
			ftj(this.markup_last_disabled).appendTo('.ft_paginate');
		}
		else {
			ftj(this.markup_last).appendTo('.ft_paginate');
		}	
	}
	
	this.first = function() {
		//log.info('first ' + 1);
		this.move(1);
	}
	
	this.prev = function() {
		//log.info('prev ' + parseInt(this.page_current - 1));
		this.move(parseInt(this.page_current - 1));
	}

	this.next = function() {
		//log.info('next ' + parseInt(parseInt(this.page_current) + 1));
		this.move(parseInt(parseInt(this.page_current) + 1));
	}
	
	this.last = function() {
		//log.info('last ' + this.page_total);
		this.move(this.page_total);
	}
	
	this.container_markup = '<div class="ft_paginate"></div>';
	this.item_markup = '<a href="#" onclick="ftc.comment.page.move(#{no}); return false;" title="댓글 #{no} 페이지로 이동">#{no}</a>';
	this.item_current_markup = '<strong>#{no}</strong>';
	
	this.markup_first = '<a href="#" onclick="ftc.comment.page.first(); return false;" title="댓글 맨 처음으로" class="ft_paginate_first">&laquo;</a>';
	this.markup_prev = '<a href="#" onclick="ftc.comment.page.prev(); return false;" title="댓글 이전 페이지" class="ft_paginate_prev">&lt;</a>';
	this.markup_next = '<a href="#" onclick="ftc.comment.page.next(); return false;" title="댓글 다음 페이지" class="ft_paginate_next">&gt;</a>';
	this.markup_last = '<a href="#" onclick="ftc.comment.page.last(); return false;" title="댓글 맨 마지막으로" class="ft_paginate_last">&raquo;</a>';

	this.markup_first_disabled = '<span class="ft_paginate_first">&laquo;</span>';
	this.markup_prev_disabled = '<span class="ft_paginate_prev">&lt;</span>';
	this.markup_next_disabled = '<span class="ft_paginate_next">&gt;</span>';
	this.markup_last_disabled = '<span class="ft_paginate_last">&raquo;</span>';
}/**
 * ftc.utils
 * Generic utility functions.
 */

ftc.utils = new function() {
	/**
	 * ftc.utils.format
	 * usage :
	 * ftc.utils.format("This is #{placeholder}", {placeholder:value});
	 */
	this.format = function(format) {
		var params = arguments[1];
		var toReturn = format;

		return toReturn.replace(/(#\{(.*?)\})/g, function(match) {
			var len = match.length - 3;
			var key = match.substring(2).substring(0, len);
			
			//alert(key + ' : ' + params[key]);
			
			return params[key];
		});
	};
	
	/**
	 * ftc.utils.browser
	 */
	this.browser = (function() {
		var ua = navigator.userAgent;
	    var isOpera = Object.prototype.toString.call(window.opera) == '[object Opera]';
		return {
			ie:	!!window.attachEvent && !isOpera,
			ie6: !!window.attachEvent && !isOpera && parseInt(ua.substring(ua.indexOf("MSIE")+5)) == 6,
			ie7: !!window.attachEvent && !isOpera && parseInt(ua.substring(ua.indexOf("MSIE")+5)) == 7,
			opera:	isOpera,
			webkit:	ua.indexOf('AppleWebKit/') > -1,
			gecko:	ua.indexOf('Gecko') > -1 && ua.indexOf('KHTML') === -1,
			iphone:	/Apple.*Mobile.*Safari/.test(ua)
		};
	})();
	
	/**
	 * ftc.utils.getWindowSize
	 */
	this.getWindowSize = function() {
		var windowWidth = -1;
		var windowHeight = -1;
		
		if(typeof(window.innerWidth) == 'number') { //Non-IE
			windowWidth = window.innerWidth;
			windowHeight = window.innerHeight;
		} else if(document.documentElement) { // IE 6+ in 'standards compliant mode'
			windowWidth = document.documentElement.clientWidth || document.body.clientWidth;
			windowHeight = document.documentElement.clientHeight || document.body.clientHeight;
		}
		
		return [windowWidth, windowHeight];
	};
	
	/**
	 * ftc.utils.getScrollPos
	 */
	this.getScrollPos = function() {
		var scrollWidth, scrollTop;

		if(document.documentElement && (document.documentElement.scrollTop || document.documentElement.scrollWidth)) {
			scrollWidth = document.documentElement.scrollWidth;
			// IE is weird here.  If no doctype is provided, document.body.scrollTop is 0,
			// otherwise document.documentElement.scrollTop is 0.
			scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
		} else if(document.body.scrollTop && document.body.scrollWidth) {
			scrollWidth = document.body.scrollWidth;
			scrollTop = document.body.scrollTop;
		}

		return [scrollWidth, scrollTop];
	}
	
	// getPageSize()
	// Returns array with page width, height and window width, height
	// Core code from - quirksmode.org
	// Edit for Firefox by pHaez
	this.getPageSize = function() {
		var xScroll, yScroll;
		
		if (window.innerHeight && window.scrollMaxY) {	
			xScroll = document.body.scrollWidth;
			yScroll = window.innerHeight + window.scrollMaxY;
		} else if (document.body.scrollHeight > document.body.offsetHeight){ // all but Explorer Mac
			xScroll = document.body.scrollWidth;
			yScroll = document.body.scrollHeight;
		} else { // Explorer Mac...would also work in Explorer 6 Strict, Mozilla and Safari
			xScroll = document.body.offsetWidth;
			yScroll = document.body.offsetHeight;
		}
		
		var windowWidth, windowHeight;
		if (self.innerHeight) {	// all except Explorer
			windowWidth = self.innerWidth;
			windowHeight = self.innerHeight;
		} else if (document.documentElement && document.documentElement.clientHeight) { // Explorer 6 Strict Mode
			windowWidth = document.documentElement.clientWidth;
			windowHeight = document.documentElement.clientHeight;
		} else if (document.body) { // other Explorers
			windowWidth = document.body.clientWidth;
			windowHeight = document.body.clientHeight;
		}	
		
		// for small pages with total height less then height of the viewport
		if(yScroll < windowHeight){
			pageHeight = windowHeight;
		} else { 
			pageHeight = yScroll;
		}
	 
		// for small pages with total width less then width of the viewport
		if(xScroll < windowWidth){	
			pageWidth = windowWidth;
		} else {
			pageWidth = xScroll;
		}
	 
	 	return {
			page : {
				width : pageWidth,
				height: pageHeight
			},
			window : {
				width: windowWidth,
				height: windowHeight
			}
		};
	}
		
	this.checkInput = function(form, name, msg) {
		var msgdiv = form.find('.ft_form_msg');
		if (msgdiv.length == 0) msgdiv = null;
		
		var elem = form.find('input[name=' + name + ']');
		var val = elem.val().trim();
		
		if (val == null || val == '') {
			elem.addClass('err');
			
			if (msgdiv != null) {
				msgdiv.text(msg);
				msgdiv.show();
			}
			
			return false;
		}
		else {
			elem.removeClass('err');
			
			if (msgdiv != null) {
				msgdiv.hide();
			}
			
			return true;
		}
	}
	
	this.checkSame = function(form, first, second, msg) {
		var msgdiv = form.find('.ft_form_msg');
		if (msgdiv.length == 0) msgdiv = null;
		
		var first_elem = form.find('input[name=' + first + ']');
		var first_val = first_elem.val().trim();

		var second_elem = form.find('input[name=' + second + ']');
		var second_val = second_elem.val().trim();
		
		if (first_val !== second_val) {
			first_elem.addClass('err');
			second_elem.addClass('err');
			
			if (msgdiv != null) {
				msgdiv.text(msg);
				msgdiv.show();
			}
			
			return false;
		}
		else {
			first_elem.removeClass('err');
			second_elem.removeClass('err');
			
			if (msgdiv != null) {
				msgdiv.hide();
			}
			
			return true;
		}
	}
	
	this.scrollTo = function(elem) {
		return ftj(window).scrollTo(elem, 500, { axis : 'y'});
	}
	
	this.scrollToVisible = function(elem) {
		var element = ftj(elem);
		
		if (element.length > 0) { 
			var window_height = ftc.utils.getPageSize().window.height;
			var scroll_top = ftc.utils.getScrollPos()[1];
			
			var bottom = window_height + scroll_top;
	
			var scrollto = scroll_top;
			var element_top = element.offset().top;
			var element_bottom = element_top + element.height();
			
			//alert(bottom + ', ' + popup_bottom);
			if (bottom < element_bottom) {
				scrollto = (element_bottom - window_height);
			}
			
			if (scrollto > element_top) {
				scrollto = element_top;
			}
			
			this.scrollTo(scrollto);
		}
	}
	
	this.br2nl = function(html) {
	    return html.replace(/<br\s*\/?>/mgi,"\n");
	}
	
	this.addHash = function(url, hash) {
	
	}
	
	this.openWin = function(name, url, width, height) {
		return window.open(url, name, "menubar=no, width="+width+", height="+height+", location=no, toolbar=no, status=no, resizable=no");
	}
}
// ftc.msgbox
ftc.msgbox = new function() {
	this.show = function(message, title, key, options) {
		
	}
	
	this.onOk = function() {
		
	}
	
	this.onCancel = function() {
	
	}
}

// ftc.progress
ftc.progress = new function() {
	this.next_id = 0;
	
	this.showRound = function(position, message) {
		var target = ftj(position);
		if (!message) {
			message = '로딩중...';
		}
		
		if (target.length  != 1) {
			return { hide : function() {} };
		}
		
		var cur_id = ++this.next_id;
		var html = ftc.utils.format(ftc.markup.PROGRESS_ROUND, { key : cur_id, msg : message });
		
		ftj(html).hide().appendTo('body').css({
			'background-color': '#ffffff',
			'position': 'absolute',
			'top': target.offset().top + 'px',
			'left': target.offset().left + 'px',
			'width': target.width() + 'px',
			'height': target.height() + 'px',
			'z-index': 99999
		}).fadeTo(0, 0).fadeTo(500, 0.8);
		
		return {
			id : cur_id,
			hide: function() {
				ftc.progress.hide(this.id);
			}
		}
	}
	
	this.hide = function(id) {
		ftj('#ft_progress_'+id).fadeOut('fast', function() {
			ftj('#ft_progress_'+id).remove();
		})
	}
}

ftc.thumb = new function() {
	this.toggleImage = function(id, type) {
		var container = ftj('#ftc_cmt_body_image_'+id);
		
		if (container.length == 1) {
			var thumbnail = container.find('.thumbnail').first();
			var elem_wrapper = container.find('.ftc_cmt_body_image_elem_wrapper').first();
			var elem = elem_wrapper.find('.ftc_cmt_body_image_elem').first();
			var caption = container.find('.ftc_cmt_body_image_caption').first();

			if (type == 'NEWSBANK') {
				if (container.hasClass('small')) {
					container.removeClass('small').addClass('stretch');
					
					var width = elem.attr('width');
					var height = elem.attr('height')
					var max_width = container.parent().width();
					
					if (width > max_width) {
						width = max_width;
						height = parseInt(max_width * height / width);
					}
					
					thumbnail.add(container).animate({'width':width+'px', 'height':height+'px'}, function() {
						elem_wrapper.show();
						container.animate({'height': parseInt(height) + parseInt(caption.height())}, 0, function() {
							caption.show();
						});
					});
				}
				else {
					elem_wrapper.hide();
					caption.hide();
					thumbnail.add(container).animate({'width': '80px', 'height': '60px'}, function() {
						container.removeClass('stretch').addClass('small');
					});
				}
			}
			else {
				if (container.hasClass('small')) {
					container.removeClass('small').addClass('stretch');
					
					var img = new Image();
					img.src = elem.attr('src');
					
					var width = img.width;
					var height = img.height;
					var max_width = container.parent().width();
					
					if (width > max_width) {
						width = max_width;
						height = parseInt(max_width * height / width);
					}
					
					thumbnail.hide();
					elem_wrapper.show();
					elem.css({'width': '80px', 'height': '60px'}).add(container).animate({'width':width+'px', 'height':height+'px'}, function() {
						container.animate({'height': parseInt(height) + parseInt(caption.height())}, 0, function() {
							caption.show();
						});
					});
				}
				else {
					caption.hide();
					elem.add(container).animate({'width': '80px', 'height': '60px'}, function() {
						thumbnail.show();
						elem_wrapper.hide();
						container.removeClass('stretch').addClass('small');
					});
				}
			}
		}
		return false;
	}

	this.toggleVideo = function(id, type) {
		var container = ftj('#ftc_cmt_body_video_'+id);
		
		if (container.length == 1) {
			var thumbnail = container.find('.thumbnail').first();
			var elem_wrapper = container.find('.ftc_cmt_body_video_elem_wrapper').first();
			var elem = elem_wrapper.find('.ftc_cmt_body_video_elem').first();
			var caption = container.find('.ftc_cmt_body_video_caption').first();

			if (type == 'VIDEO_YOUTUBE' || type == 'VIDEO_DAUM') {
				if (container.hasClass('small')) {
					container.removeClass('small').addClass('stretch');
					
					var width = elem.attr('width');
					var height = elem.attr('height')

					thumbnail.add(container).animate({'width':width+'px', 'height':height+'px'}, function() {
						elem_wrapper.show();
						container.animate({'height': parseInt(height) + parseInt(caption.height())}, 0, function() {
							caption.show();
						});
					});
				}
				else {
					var temp_elem = elem.html();
					elem.remove();
					elem_wrapper.hide();
					elem_wrapper.prepend(temp_elem);
		
					caption.hide();
					
					thumbnail.add(container).animate({'width': '80px', 'height': '60px'}, function() {
						container.removeClass('stretch').addClass('small');
					});
				}
			}
		}
		return false;
	}
}

ftc.thumb.showVideo = function(element) {
	
	var wrapper = ftj(element);
	var preview = wrapper.find('.ftc_cmt_body_video_preview').first();
	var overlay = wrapper.find('.ftc_cmt_body_video_overlay').first();
	var object = wrapper.find('.ft_cmt_body_video_wrapper').first().css({'position' : 'absolute', 'top':'0px', 'left':'0px'});
	
	if (preview.hasClass('small')) {
		preview.removeClass('small');
		preview.addClass('stretched');	
		overlay.hide();
		
		wrapper.add(preview).animate({'width': '425px', 'height':'344px'}, function() {
			object.show();	
		});
	}
}

ftc.thumb.hideVideo = function(element) {
	var wrapper = ftj(element);
	var preview = wrapper.find('.ftc_cmt_body_video_preview').first();
	var overlay = wrapper.find('.ftc_cmt_body_video_overlay').first();
	var object = wrapper.find('.ft_cmt_body_video_wrapper').first();
	var elem = wrapper.find('.ftc_cmt_body_video_elem').first();
	
	if (preview.hasClass('stretched')) {
		preview.removeClass('stretched');
		preview.addClass('small');	
		
		wrapper.add(preview).animate({'width': '80px', 'height':'60px'}, function() {
			preview.show();
			alert('removeElem');
			var temp_elem = elem.remove();
			object.hide();
			alert('insertElem');
			object.insert(temp_elem);
			
			overlay.show();
		});
	}
}

// ftc.popup
ftc.popup = new function() {
	this.list = [];
	this.no = 0;
	
	/**
	 * Show Modal Popup
	 */
	this.showModal = function(message, title, key, options) {
		ftc.overlay.show();
		var ft_msgbox = ftj('#ft_msgbox');
		
		this.no++;
		
		if (typeof(button_face) == 'undefined' || button_face == null ) {

			button_face = '확인' + '';
		}
		
 		if (typeof(title) == 'undefined' || title == null) title = '';
		message = ftc.utils.format(message, {key: this.no});
		
		var content = ftc.utils.format(ftc.markup.POPUP_MODAL, {title: title, msg: message, button_face: button_face, key: this.no});
		
		if (ft_msgbox.length > 0) {
			ft_msgbox.replaceWith(content);
			ft_msgbox = ftj('#ft_msgbox');
		}
		
		if (ft_msgbox.length <= 0) {
			ftj(content).appendTo('body').hide();
			
			ft_msgbox_overlay = ftj('#ft_msgbox_overlay');
			ft_msgbox = ftj('#ft_msgbox');
		}
		
		ft_msgbox.center(ftc.utils.browser.ie).hide().fadeIn(500);
		ft_msgbox.find('button').focus();
		
		this.list[this.no] = ft_msgbox;
	};
	
	/**
	 * show tailed popup
	 */
	this.showTailed = function(element, message, title, key, option) {
		var container = document.createElement('div');
		var header, body;
		
		if(typeof(title) == 'undefined' || title == null) { title = ''; }
		
		if (key) {
			container.id = 'ftc-popup-tailed-' + key;
		}
		else {
			container.id = 'ftc-popup-tailed-' + this.no;
		}
		
		header = title;
		body = message;
		
		container.innerHTML = ftc.utils.format(ftc.markup.POPUP_MODAL, {title: title, body: body, buttons: '<button id="">' });
	};
	
	
	this.close = function(no) {
		var a = this.list[no];
		
		if (typeof(a) == 'undefined' || a == null) {
			return false;
		}
		
		a.fadeOut(200, function() {
			ftj(this).remove();
		});
		ftc.overlay.hide();
	} 
	
	this.makeTailed = function(id, markup) {
		return ftc.utils.format(ftc.markup.POPUP_TAILED, {id : id, markup : markup});
	}
}


// ftc.overlay
ftc.overlay = new function() {
	this.cnt = 0;
	this.id = 0;
	this.first = true;
	
	this.show = function() {
		this.id++;
		this.cnt++;
		
		var content_overlay = '<div class="ft_overlay" id="ft_overlay_'+this.id+'"></div>';
		ftj(content_overlay).appendTo('body').hide();
			
		ft_overlay = ftj('#ft_overlay_'+this.id);
		
		this.resize();
		
		if (this.first == true) {
			ftj(window).bind('resize', ftc.overlay.resize);
			this.first = false;
		}
		
		return this.id;
	}
	
	this.resize = function() {
		var ps = ftc.utils.getPageSize();
		
		ftj('.ft_overlay').css({
			'position':'absolute',
			'left':0,
			'top':0,
			//'width' : ps.page.width + 'px',
			'width' : '100%',
			'height' : ps.page.height + 'px',
			'background-color': '#eaeaea',
			'opacity': 0.8,
			'-ms-filter' : "progid:DXImageTransform.Microsoft.Alpha(Opacity=80)",
			'filter' : "alpha(Opacity=80)"
		}).show();
	}
	
	this.hide = function(id) {
		var ft_overlay = ftj('#ft_overlay_'+id);
		
		if (ft_overlay.length <= 0) {
			ft_overlay = ftj('.ft_overlay').last();
		} 
		
		ft_overlay.remove();
		this.cnt--;
		
		if (this.cnt == 0) {
			ftj(window).unbind('resize', ftc.overlay.resize);
			this.first = true;
		}
		
		
	}
}

// ftc.popup.profile
ftc.popup.profile = new function() {
	this.target = [];
	this.popup = [];
	this.cnt = 0;
	this.key = 0;
	this.is_featured = 0;
	this.opening = [];
	
	this.show = function(key, is_featured) {
		if (typeof(is_featured) == 'undefined' || is_featured == null || is_featured == '') {
			is_featured = '';
		}
		
		var item_id = '#ftc_cmt_item_' + key;
		if (is_featured) {
			featured = 'featured_';
			item_id = '#ftc_featured_item_' + key;
		}

		if (this.opening[key] == true) {
			return false;
		} 
		
		this.opening[key] = true;
		
		var target = ftj(item_id + ' .ftc_cmt_info').first();
		var target_username = ftj(item_id + ' span.user_name').first().text();
		var target_userno = ftj(item_id).attr('user');
		var target_usertemp = ftj(item_id).attr('istemp');
		
		
		ftj(item_id + ' .ftc_cmt_body_wrapper').first().addClass('profile');
		if (target_userno <= 0) {
			ftc.popup.showModal(target_username+'님은 손님으로 댓글을 남기셨습니다.', '안내');
			return false;
		}
		else if (target_usertemp == 1) {
			ftc.popup.showModal(target_username+'님은 T오픈아이디 연결이 되어있지 않은 상태로 댓글을 남기셨습니다.', '안내');
			return false;
		}
		else {
			ftc.request.jsonp(ftc.urls.POPUP_PROFILE, { 'no': target_userno, 'key' : key }, {
				onSuccess: function(response) {
					var content = response.data;
					
					ftj(ftc.utils.format(ftc.markup.POPUP_PROFILE, {key:key, is_featured:is_featured, content: content})).hide().insertAfter(target).slideDown('fast');
				},
				onComplete: function() {
					ftc.popup.profile.opening[key] = false;
				}
			});
		}
		
		
		//ftj(item_id + ' .ft_profile_wrapper .ft_profile_item');
	}
	
	this.close = function(key, is_featured) {
		if (typeof(is_featured) == 'undefined' || is_featured == null || is_featured == '') {
			is_featured = '';
		}
		
		this.key = 0;
		this.is_featured = 0;
		
		var item_id = '#ftc_cmt_item_' + key;
		if (is_featured) {
			featured = 'featured_';
			item_id = '#ftc_featured_item_' + key;
		}
		
		ftj(item_id + ' .ftc_cmt_body_wrapper').first().removeClass('profile');
		
		var ft_popup = ftj('#ft_profile_' + key + is_featured);
		ft_popup.slideUp('fast', function() {ftj(this).hide().remove()});
	}
	
	this.toggle = function(key, type, url, sns, is_featured) {


        if(ft_site_key == '6a5aef3a1853fb05249cfca0a81bca459b3cdbe2' || ft_site_key == 'b248380dfc5ed6e21143decb4c6a0fcb709aecd0' ||
            ft_site_key == '73cc98ea400d58289d32dfde7050c8c382adeab8' || ft_site_key == '19a83daed111969f376762beff9fac6af0c965d7' ||
            ft_site_key == 'e815465c30b6949c5c02a0592b2ea56b0f9f8c74' || ft_site_key == '760c2994294e74542d53906c98b4c4e379eff211'
        ){
            return false;
        }

		if (typeof(is_featured) == 'undefined' || is_featured == null || is_featured == '') {
			is_featured = '';

		}
		
		var ft_popup = ftj('#ft_profile_' + key + is_featured);

		if (ft_popup.length > 0) {
			this.close(key, is_featured);
		}
		else {
			this.show(key, is_featured);
			if(sns==true && (type=="me2day" || type=="twitter" || type=="facebook") ){
				window.open(url,'profile'+key,'width=1000, height=700, scrollbars=yes, status=yes, toolbar=yes, menubar=yes, resizable=yes, location=yes');
			}
		}
	}
	
	this.open_tab = function(target) {
		var elem = ftj(target);
		
		var btns = elem.parents('.ft_profile_c_buttons');
		
		btns.find('a img').attr('src', function() {
			this.src = this.src.replace('_0', '_1');
		});
		
		elem.find('img').attr('src', function() {
			this.src = this.src.replace('_1', '_0');
		});
		
		var div_class = elem.attr('href');
		var pos = div_class.indexOf('#');
		div_class = div_class.substr(pos + 1, div_class.length - pos - 1);

		elem.parents('.ft_profile').find('.ft_profile_c_body .tab_body').hide();
		elem.parents('.ft_profile').find('.ft_profile_c_body .'+div_class).show();
	}
}

// ftc.popup.manage_profile
ftc.popup.manage_profile = new function() {
	this.target = null;
	
	this.show = function(key, is_featured) {
		ftc.overlay.show();
		
		var ft_popup = ftj('#ft_popup_manage_profile');
		
		this.target = ftj('.ft_btn_manage_profile').first();
		
		var temporary = '';
		var temporary_pass = '';
		
		if (ftc_user.is_temporary == 1) {
			temporary = ' style="display: none;" ';
			temporary_pass = ftc_user.id.substring(ftc_user.id.lastIndexOf('_')+1, ftc_user.id.length);
		}
		
		var gender_male = (ftc_user.gender == 'MALE' ? ' selected="selected"' : '');
		var gender_female = (ftc_user.gender == 'FEMALE' ? ' selected="selected"' : '');
		
		var content = ftc.utils.format(ftc.markup.POPUP_MANAGE_PROFILE, {
			user_id : ftc_user.id,
			user_name : ftc_user.name,
			user_nick : ftc_user.nick,
			user_email : ftc_user.email,
			user_blog : ftc_user.blog,
			user_location : ftc_user.location,
			user_portrait: ftc_user.portrait,
			gender_female: gender_female,
			gender_male: gender_male,
			hide : temporary,
			pass : temporary_pass
		});
		
		ftj(content).appendTo('body').hide();
		
		ftc.partner.twitter.checkConnect();
		
		ftc.popup.manage_profile.reposition();
		ftj(window).bind('resize', ftc.popup.manage_profile.reposition);
	
		ft_popup = ftj('#ft_popup_manage_profile').fadeIn(200, function() {
			ftj('#ft_manage_profile_portrait').uploadify({
				'uploader' : 'http://www.tcomment.com/swf/uploadify.swf',
				'script' : 'http://www.tcomment.com/upload.php',
				'cancleImg' : 'http://www.tcomment.com/images/cancel.png',
				'scriptAccess' : 'always',
				'scriptData' : { 'target' : 'portrait' },
				'method' : 'POST',
				'height' : 28,
				'width' : 89,
				'auto' : true,
				'multi' : false,
				'folder': 'files',
				'fileDesc': 'Open File',
				'fileExt': '*.jpg;*.jpeg;*.gif;*.png',
				'buttonImg' : 'http://plugin.tcomment.com/images/modules/image_upload/btn_find_img_profile.gif',
				'buttonText' : 'Image File',
				'wmode':'transparent',
				'onOpen' : function() {
					ftj('#ft_manage_profile_portrait_preview').attr("src", "http://www.tcomment.com/images/uploading.gif");
				},
				'onComplete' : function(event, queueID, fileObj, response, data) {
					ftj('#ft_manage_profile_portrait_preview').attr("src", response);
					ftj('#ft_manage_profile_portrait_src').val(response);
					ftj('#ft_manage_profile_cancel_upload').attr('disabled', '').removeClass('disabled');
					
					
					return true;
				},
				'onError' : function(event, queueID, fileObj, errorObj) {
					alert(errorObj.type + ', ' + errorObj.info);
					return true;
				}
			});
		});
	}
	
	this.close = function() {
		ftc.overlay.hide();
		
		ftj(window).unbind('resize', ftc.popup.manage_profile.reposition);
		ftj('#ft_popup_manage_profile').fadeOut(200, function() {
			ftj(this).remove();
		});
	}
	
	this.reposition = function() {
		var ft_popup = ftj('#ft_popup_manage_profile');
		var target = ftc.popup.manage_profile.getTarget();
		
		ft_popup.css({
			'position': 'absolute',
			'top': target.offset().top + target.height() + 12 + 'px',
			'left': ft_container.offset().left + 10 + 'px'
		});
	}
	
	this.getTarget = function() {
		return this.target;
	}
	
	this.togglePass = function() {
		ftj('#ft_popup_manage_profile .ft_password_change').toggle();
	}
	
	this.cancelUpload = function() {
		ftj('#ft_manage_profile_portrait_src').val('');
		ftj('#ft_manage_profile_portrait_preview').attr("src", ftj('#ft_manage_profile_portrait_src_old').val());
		ftj('#ft_manage_profile_cancel_upload').attr('disabled', 'disabled').addClass('disabled');
	}
	
	
	this.update = function() {
		var form = ftj('form[name=ft_manage_profile_form]');
		
		var passwd = form.find('input[name=passwd]').val() || '';
		if (!passwd) {
			ftc.popup.showModal('패스워드를 꼭 입력하셔야 합니다.', ftc.strings.ERROR_TITLE);
			return false;
		}
		
		var passwd_change = form.find('input[name=passwd_change]').val();
		var passwd_confirm = form.find('input[name=passwd_confirm]').val();
		
		if ((passwd_change.length > 0 || passwd_confirm.length > 0) && passwd_change != passwd_confirm) {
			ftc.popup.showModal('패스워드를 변경하시려면 변경할 패스워드를 두 칸에 동일하게 입력해주세요.', ftc.strings.ERROR_TITLE);
			return false;
		}
		
		
		var user_blog = form.find('input[name=user_blog]');
		var user_blog_url = user_blog.val().replace('http://', '');
		user_blog.val(user_blog_url);
		
		form.find('.ft_popup_buttons button').attr('disabled', 'disabled').addClass('disabled');
		form.find('.ft_popup_buttons a').attr('onclick', 'return false;');
		form.find('select').attr('readonly', 'readonly').addClass('disabled');
		
		
		form.find('input').each( function(i) {
			ftj(this).val( encodeURIComponent( ftj(this).val() ) );
			ftj(this).attr('readonly', 'readonly').addClass('disabled');
		});
		form.submit();
		//this.close();
	}
}



// ftc.popup.supporters
ftc.popup.supporters = new function() {
	this.target = null;
	
	this.show = function(key, is_featured) {
		if (typeof(is_featured) == 'undefined' || is_featured == null || is_featured == '') {
			is_featured = '';
		}
		
		var item_id = '#ftc_cmt_item_' + key;
		if (is_featured) {
			featured = 'featured_';
			item_id = '#ftc_featured_item_' + key;
		}
		
		var target = ftj(item_id + ' .ftc_cmt_info').first();
		var target_username = ftj(item_id + ' span.user_name').first().text();
		var target_userno = ftj(item_id).attr('user');
		
		//ftj(item_id + ' .ftc_cmt_body_wrapper').first().addClass('profile');
		
		var content = ftc.utils.format(ftc.markup.POPUP_SUPPORTERS, {
			title: ftc.utils.format(ftc.strings.POPUP_SUPPORTERS_TITLE, {user_name: target_username}),
			key: key, 
			is_featured:is_featured
		});
		
		ftj(content).insertAfter(ftj(item_id + ' .ftc_cmt_tools').first()).hide().slideDown('fast');
		
		ftc.request.jsonp(ftc.urls.POPUP_SUPPORTERS, { 'no' : key }, {
			onSuccess: function(response) {
				ftj('#ft_popup_supporters_placeholder').first().empty().append(response.data);
			}
		});
	}
	
	
	this.show = function(key, is_featured) {
		if (typeof(is_featured) == 'undefined' || is_featured == null || is_featured == '') {
			is_featured = '';
		}
		
		var ft_popup = ftj('#ft_supporters_' + key + is_featured);
		
		var item_id = '#ftc_cmt_item_' + key;
		if (is_featured) {
			featured = 'featured_';
			item_id = '#ftc_featured_item_' + key;
		}
		
		//this.target = ftj(item_id + ' .ftc_cmt_tools_supporters_popup').first();
		var target_username = ftj(item_id + ' span.user_name').first().text();
		
		var content = ftc.utils.format(ftc.markup.POPUP_SUPPORTERS, {
			title: ftc.utils.format(ftc.strings.POPUP_SUPPORTERS_TITLE, {user_name: target_username}),
			key: key,
			is_featured: is_featured
		});
		
		ftj(ftj(item_id + ' .ftc_cmt_tools').first()).after(content);
		ftj('#ft_supporters_' + key + is_featured).hide();
		//ftc.popup.supporters.reposition();
		ft_popup = ftj('#ft_supporters_' + key + is_featured).slideDown(200);
		//ftj(window).bind('resize', ftc.popup.supporters.reposition);
		
		ftc.request.jsonp(ftc.urls.POPUP_SUPPORTERS, { 'no' : key }, {
			onSuccess: function(response) {
				ftj('#ft_supporters_' + key + is_featured + '_placeholder').first().empty().append(response.data);
			}
		});
	}
	
	this.close = function(key, is_featured) {
		if (typeof(is_featured) == 'undefined' || is_featured == null || is_featured == '') {
			is_featured = '';
		}
		
		var item_id = '#ftc_cmt_item_' + key;
		if (is_featured) {
			featured = 'featured_';
			item_id = '#ftc_featured_item_' + key;
		}
		
		//ftj(item_id + ' .ftc_cmt_body_wrapper').first().removeClass('profile');
		
		var ft_popup = ftj('#ft_supporters_' + key + is_featured);
		ft_popup.slideUp('fast', function() {ftj(this).hide().remove()});
	}
	
	this.toggle = function(key, is_featured) {
			if (typeof(is_featured) == 'undefined' || is_featured == null || is_featured == '') {
				is_featured = '';
			}
			
			var ft_popup = ftj('#ft_supporters_' + key + is_featured);
	
			if (ft_popup.length > 0) {
				this.close(key, is_featured);
			}
			else {
				this.show(key, is_featured);
			}
		}
	
	/*this.reposition = function() {
		var ft_popup = ftj('#ft_popup_supporters');
		
		var target = ftc.popup.supporters.getTarget();
		
		ft_popup.css({
			'position': 'absolute',
			'top': target.offset().top + target.height() + 12 + 'px',
			'left': target.offset().left - ft_popup.width() + target.width() + 5 + 'px'
		});
	}*/
}

// ftc.popup.payment
ftc.popup.payment = new function() {
	this.target = null;
	
	this.show = function(key, is_featured) {
		ftc.overlay.show();
		
		var ft_popup = ftj('#ft_popup_payment');
		
		this.target = ftj('.ft_btn_payment').first();
		
		var content = ftc.markup.POPUP_PAYMENT;
		
		ftj(content).appendTo('body').hide();
		
		ftc.popup.payment.reposition();
		ft_popup = ftj('#ft_popup_payment').fadeIn(200);
	}
	
	this.close = function() {
		ftc.overlay.hide();
		ftj('#ft_popup_payment').fadeOut(200, function() {
			ftj(this).remove();
		});
	}
	
	this.reposition = function() {
		var ft_popup = ftj('#ft_popup_payment');
		var target = ftc.popup.payment.getTarget();
		
		var tail = target.offset().left - ft_container.offset().left + (target.width() / 2) + 10;
		var left = ft_container.offset().left + (ft_container.width() / 2) - (ft_popup.width() / 2);
		
		ft_popup.css({
			'position': 'absolute',
			'top': target.offset().top + target.height() + 12 + 'px',
			'left': left + 'px'
		});
		
		ft_popup.find('span.tail').first().css({'left' : tail + 'px'});
	}
	
	
	this.getTarget = function() {
		return this.target;
	}
}

// ftc.popup.image
ftc.popup.image = new function() {
	this.target = null;
	this.pos = 0;
	
	this.show = function(pos) {
		if (ftc.user.is_login == false) {
			ftc.showLogin('이미지를 추가하시려면 로그인 하셔야 합니다.');
			return false;
		}
		
		ftc.popup.image.newsbank.reset();
		
		ftc.overlay.show();
			
		this.pos = pos;
		
		var inputElem = null;
		
		if (this.pos == 0) {
			this.target = ftj('.ft_cmtbox .ft_module_image_btn');
			inputElem = ftj('.ft_cmtbox input[name=imgsrc]');
		}
		else if (this.pos == 1) {
			this.target = ftj('.ft_replybox .ft_module_image_btn');
			inputElem = ftj('.ft_replybox input[name=imgsrc]');
		}
		else if (this.pos == 2) {
			this.target = ftj('.ft_modifybox .ft_module_image_btn');
			inputElem = ftj('.ft_modifybox input[name=imgsrc]');
		}
		
		var content = ftc.utils.format(ftc.markup.POPUP_IMAGE, { content : ftc.module.image.tab() } );

		
		ftj(content).appendTo('body').hide();
		
		// select Tab
		ftc.module.image.select_tab(0);
		
		var imgsrc = inputElem.val().trim();

		if (typeof(imgsrc) == 'undefined' || imgsrc == '' || imgsrc == null) {
			imgsrc = 'http://plugin.tcomment.com/images/modules/image_upload/attach_blank.gif';
		}
		
		imgsrc = imgsrc.match(/([^?]*)?(.*)/i);
		imgsrc = imgsrc[1];
		
		ftj('#ft_image_upload_preview').attr("src", imgsrc + '?width=240&height=180&method=fit');
		
		ftc.popup.image.reposition();
		
		ft_popup = ftj('#ft_popup_image').fadeIn(200, function() {
			ftj('#ft_image_upload_input').uploadify({
				'uploader' : 'http://www.tcomment.com/swf/uploadify.swf',
				'script' : 'http://www.tcomment.com/upload.php',
				'cancleImg' : 'http://www.tcomment.com/images/cancel.png',
				'scriptAccess' : 'always',
				'scriptData' : { 'target' : 'attached' },
				'method' : 'POST',
				'height' : 28,
				'width' : 175,
				'auto' : true,
				'multi' : false,
				'folder': 'files',
				'fileDesc': 'Open File',
				'fileExt': '*.jpg;*.jpeg;*.gif;*.png',
				'buttonImg' : 'http://plugin.tcomment.com/images/modules/image_upload/btn_find_img.gif',
				'buttonText' : 'Image File',
				'wmode':'transparent',
				'onSelect' : function() {
					ftj('#ft_image_upload_preview').attr("src", "http://plugin.tcomment.com/images/modules/image_upload/attach_loading.gif");
					return true;
				},
				'onComplete' : function(event, queueID, fileObj, response, data) {
					ftj('#ft_image_upload_preview').attr("src", response + '?width=240&height=180&method=fit');
					return true;
				},
				'onError' : function(event, queueID, fileObj, errorObj) {
					alert(errorObj.type + ', ' + errorObj.info);
					return true;
				}
			});
		});
		
		ftj('#ft_popup_image_flickr_text').keypress(function(e) {
			if (e.keyCode == '13') {
				e.preventDefault();
				ftc.module.image.flickr.search();
			}
		})
		
		ftc.utils.scrollToVisible(ft_popup);
	}
	
	this.close = function() {
		ftj('#ft_popup_image_flickr_text').unbind('keypress');
		ftc.overlay.hide();
		ftj('#ft_popup_image').fadeOut(200, function() {
			ftj(this).remove();
		});
	}
	
	this.setImgSrc = function() {
		var inputElem = null;
		var boxname = '';

		var image = ftc.module.image.getImageInfo();
		var cmtbox = null;
		
		if (this.pos == 0) {
			boxname = '.ft_cmtbox';
			cmtbox = ftc.cmtbox;
		}
		else if (this.pos == 1) {
			boxname = '.ft_replybox';
			cmtbox = ftc.replybox;
		}
		else if (this.pos == 2) {
			boxname = '.ft_modifybox';
			cmtbox = ftc.modifybox;
		}
		
		cmtbox.setAttach(image.type, image.src);
		
		ftc.module.image.reset();
		this.close();
	}
	
	this.cancel = function() {
		var inputElem = null;
		var boxname = '';
		//var image_src = ftj('#ft_image_upload_preview').attr("src");
		
		if (this.pos == 0) {
			boxname = '.ft_cmtbox';
		}
		else if (this.pos == 1) {
			boxname = '.ft_replybox';
		}
		else if (this.pos == 2) {
			boxname = '.ft_modifybox';
		}
		
		inputElem = ftj(boxname + ' input[name=imgsrc]');
		inputElem.val('');
		
		typeElem = ftj(boxname + ' input[name=imgtype]');
		typeElem.val('');
			
		ftj(boxname).find('.ft_module_video_btn').show();
		ftj(boxname).find('.ft_module_image_btn').removeClass('added');
		
		this.close();
	}
	
	this.reposition = function() {
		var ft_popup = ftj('#ft_popup_image');
		var target = ftc.popup.image.getTarget();
		
		var tail = target.offset().left - ft_container.offset().left + (target.width() / 2) + 10;
		var left = ft_container.offset().left + (ft_container.width() / 2) - (ft_popup.width() / 2);
		
		ft_popup.css({
			'position': 'absolute',
			'top': target.offset().top + target.height() + 12 + 'px',
			'left': left + 'px'
		});
		
		ft_popup.find('span.tail').first().css({'left' : tail + 'px'});
	}
	
	this.getTarget = function() {
		return this.target;
	}
	
	this.upload = function() {
		
	}
}


// ftc.popup.image.newsbank
ftc.popup.image.newsbank = new function() {
	this.cmscode = 0;
	this.list = [];
	
	this.search = function() {
		var term_input = ftj('#ft_popup_image_newsbank_term');
		var term = term_input.val();
		
		if (term == '') {
			ftc.popup.showModal("검색어를 입력하세요.", ftc.strings.ERROR_TITLE);
			return false;
		}
		else {			
			ftc.request.jsonp(ftc.urls.NEWSBANK_SEARCH, { term : term }, {
				onSuccess: function(response) {
					if (response.ccnt <= 0) {
						ftc.popup.showModal("이미지 검색 결과가 없습니다!<br/>다른 검색어로 시도해보세요!", ftc.strings.ERROR_TITLE);
						ftc.popup.image.newsbank.reset(true);
					}
					else {
						// 창 초기화
						ftj('#ft_popup_image_newsbank_result').replaceWith(ftc.markup.POPUP_IMAGE_NEWSBANK_RESULT);
						var list = ftj('#ft_popup_image_newsbank_result .ft_popup_image_newsbank_result_list').first();
												
						// 아이템 추가
						var items = response.items;
						
						for (var i in items) {
							var item_code = items[i].cmscode;
							var item_markup = ftc.utils.format(ftc.markup.POPUP_IMAGE_NEWSBANK_ITEM, { cmscode : item_code });
							
							ftc.popup.image.newsbank.list[item_code] = items[i];
							ftj(item_markup).appendTo(list);
						}
					}
				}
			});
			
			return false;
		}
	}
	
	this.reset = function(isempty) {
		this.cmscode = 0;
		if (isempty == true) {
			ftj('#ft_popup_image_newsbank_result').replaceWith(ftc.markup.POPUP_IMAGE_NEWSBANK_EMPTY);
		}
		else {
			ftj('#ft_popup_image_newsbank_result').html('');
		}
	}
	
	this.select = function(elem, cmscode) {
		this.cmscode = cmscode;
		ftj('#ft_popup_image_newsbank_result .ft_popup_image_newsbank_result_list li').removeClass('current');
		
		ftj(elem).addClass('current');
	}
	
	this.setImgSrc = function() {
		var inputElem = null;
		var boxname = '';
		var image_type = 'NEWSBANK';
		var image_src = '';
		var cmscode = this.cmscode;
		
		if (cmscode  == 0 || cmscode == null) {
			ftc.popup.showModal('이미지를 추가하시려면 사용하실 이미지를 선택해주세요!', ftc.strings.ERROR_TITLE);
			return false;
		}
		
		var item = this.list[cmscode];
		
		if (ftc.popup.image.pos == 0) {
			boxname = '.ft_cmtbox';
		}
		else if (ftc.popup.image.pos == 1) {
			boxname = '.ft_replybox';
		}
		else if (ftc.popup.image.pos == 2) {
			boxname = '.ft_modifybox';
		}
		
		image_src = cmscode + '|' + item.width + '|' + item.height;
		
		srcElem = ftj(boxname + ' input[name=imgsrc]');
		srcElem.val(image_src);
		typeElem = ftj(boxname + ' input[name=imgtype]');
		typeElem.val(image_type);
		
		if (image_src) {
			ftj(boxname).find('.ft_module_video_btn').hide();
			ftj(boxname).find('.ft_module_image_btn').addClass('added');
		}
		
		this.close();
	}
	
	this.close = function() {
		this.list = [];
		ftc.popup.image.close();
	}
}

// ftc.popup.video
ftc.popup.video = new function() {
	this.target = null;
	this.pos = 0;
	this.src = null;
	this.type = null;
	
	// show video attach popup
	this.show = function(pos) {
		// check user login
		if (ftc.user.is_login == false) {
			ftc.showLogin('동영상을 추가하시려면 로그인 하셔야 합니다.');
			return false;
		}
		
		// show overlay
		ftc.overlay.show();
		
		var ft_popup = ftj('#ft_popup_video');
		var inputElem = null;
		this.pos = pos;
		
		if (this.pos == 0) {
			this.target = ftj('.ft_cmtbox .ft_module_video_btn');
			inputElem = ftj('.ft_cmtbox input[name=videosrc]');
		}
		else if (this.pos == 1) {
			this.target = ftj('.ft_replybox .ft_module_video_btn');
			inputElem = ftj('.ft_replybox input[name=videosrc]');
		}
		else if (this.pos == 2) {
			this.target = ftj('.ft_modifybox .ft_module_video_btn');
			inputElem = ftj('.ft_modifybox input[name=videosrc]');
		}
		
		var content = ftc.utils.format(ftc.markup.POPUP_VIDEO, { content : ftc.module.video.tab() } );
		ftj(content).appendTo('body').hide();

		ftc.module.video.select_tab(0);		
		
		/*ftj('#ft_popup_video #ft_video_url').val(inputElem.val());
		if (inputElem.val()) {
			ftc.popup.video.getPreview();
		}*/
		
		ftc.popup.video.reposition();
		ft_popup = ftj('#ft_popup_video').fadeIn(200);
		
		// register keyprss event
		ftj('#ft_popup_video_youtube_text').keypress(function(e) {
			if (e.keyCode == '13') {
				e.preventDefault();
				ftc.module.video.youtube.search();
			}
		});
		
		ftj('#ft_popup_video_daum_text').keypress(function(e) {
			if (e.keyCode == '13') {
				e.preventDefault();
				ftc.module.video.daum.search();
			}
		});
		
		ftc.utils.scrollToVisible(ft_popup);
	}
	
	this.setVideoSrc = function() {
		var inputElem = null;
		var boxname = '';
		var video = ftc.module.video.getVideoInfo();
		var cmtbox = null;
		
		if (!video.src) {
			ftc.popup.showModal('동영상 경로를 입력해주세요.', '안내');
			return false;
		}
		
		if (!video.type) {
			ftc.popup.showModal('동영상 타입을 다시 선택해주세요.', '안내');
			return false;
		}
		
		if (this.pos == 0) {
			cmtbox = ftc.cmtbox;
			boxname = '.ft_cmtbox';
		}
		else if (this.pos == 1) {
			cmtbox = ftc.replybox;
			boxname = '.ft_replybox';
		}
		else if (this.pos == 2) {
			cmtbox = ftc.modifybox;
			boxname = '.ft_modifybox';
		}
		
		cmtbox.setAttach(video.type, video.src);
		
		this.close();
	}
	
	this.close = function() {
		ftc.overlay.hide();
		ftj('#ft_popup_video').fadeOut(200, function() {
			ftj(this).remove();
		});
		
	}
	
	this.cancel = function() {
		var inputElem = null;
		var boxname = '';
		
		if (this.pos == 0) {
			boxname = '.ft_cmtbox';
		}
		else if (this.pos == 1) {
			boxname = '.ft_replybox';
		}
		else if (this.pos == 2) {
			boxname = '.ft_modifybox';
		}
		
		ftc.module.video.reset();
		
		inputElem = ftj(boxname + ' input[name=videosrc]');
		inputElem.val('');
		typeElem = ftj(boxname + ' input[name=videotype]');
		typeElem.val('');
		
		ftj(boxname).find('.ft_module_image_btn').show();
		ftj(boxname).find('.ft_module_video_btn').removeClass('added');
		
		this.close();
	}
	
	this.reposition = function() {
		var ft_popup = ftj('#ft_popup_video');
		var target = ftc.popup.video.getTarget();
		
		var tail = target.offset().left - ft_container.offset().left + (target.width() / 2) + 10;
		var left = ft_container.offset().left + (ft_container.width() / 2) - (ft_popup.width() / 2);
		
		ft_popup.css({
			'position': 'absolute',
			'top': target.offset().top + target.height() + 12 + 'px',
			'left': left + 'px'
		});
		
		ft_popup.find('span.tail').first().css({'left' : tail + 'px'});
	}
	
	this.getTarget = function() {
		return this.target;
	}
	
	this.getPreview = function() {
		var video = ftc.module.video.getVideoInfo();
		var cmtbox = null;
		
		if (!video.src) {
			ftc.popup.showModal('동영상 경로를 입력해주세요.', '안내');
			return false;
		}
		
		if (!video.type) {
			ftc.popup.showModal('동영상 타입을 다시 선택해주세요.', '안내');
			return false;
		}
		
		ftj('#ft_popup_video .ft_video_preview').html(ftc.module.video.get_element());
	}
}


// ftc.popup.support
ftc.popup.support = new function() {
	this.target = null;
	
	this.show = function(key, is_featured) {
		if (!ftc.user.is_login) {
			ftc.popup.showModal(ftc.strings.ERROR_NO_GUEST_SUPPORT, ftc.strings.ERROR_TITLE);
			return false;
		}
		
		ftc.overlay.show();
		
		var ft_popup = ftj('#ft_popup_support');
		
		var item_id = '#ftc_cmt_item_' + key;
		if (is_featured) {
			featured = 'featured_';
			item_id = '#ftc_featured_item_' + key;
		}
		
		this.target = ftj(item_id + ' .ftc_cmt_info_support_btn_support').first();
		var target_username = ftj(item_id + ' span.user_name').first().text();
		
		var content = ftc.utils.format(ftc.markup.POPUP_SUPPORT, {
			title: ftc.utils.format(ftc.strings.POPUP_SUPPORT_TITLE, {user_name: target_username}),
			key: key,
			user_name: target_username,
			current_ccash : ftc_user.ccash,
			min_ccash : ftc.comment.get_featured_min()
		});
		
		ftj(content).appendTo('body').hide();
		
		ftc.popup.support.reposition();
		
		
		ft_popup = ftj('#ft_popup_support').fadeIn(200);
		ftj(window).bind('resize', ftc.popup.support.reposition);
	}
	
	this.selectItem = function(no) {
		var ft_popup = ftj('#ft_popup_support');
		
		ftj('.ft_popup_support_ccash_item').removeClass('current');
		ftj('#ft_popup_support_ccash_item_'+no).addClass('current');
		
		var amount = 0;
		if (no == 1) { amount = 5; }
		if (no == 2) { amount = 10; }
		if (no == 3) { amount = 15; }
		if (no == 4) { amount = 20; }
		if (no == 5) { amount = 30; }
		if (no == 6) { amount = 50; }
		if (no == 7) { amount = 100; }
		if (no == 8) { amount = 200; }
		if (no == 9) { amount = 300; }
		if (no == 10) { amount = 500; }
		
		ftj('#ft_popup_support_ccash_amount').val( amount );
		
		return false;
	}
	
	this.close = function() {
		ftc.overlay.hide();
		
		ftj(window).unbind('resize', ftc.popup.support.reposition);
		ftj('#ft_popup_support').remove();
	}
	
	this.reposition = function() {
		var ft_popup = ftj('#ft_popup_support');
		var target = ftc.popup.support.getTarget();
		
		var tail = target.offset().left - ft_container.offset().left + (target.width() / 2) + 10;
		var left = ft_container.offset().left + (ft_container.width() / 2) - (ft_popup.width() / 2);
		
		ft_popup.css({
			'position': 'absolute',
			'top': target.offset().top + target.height() + 12 + 'px',
			'left': left + 'px'
		});
		
		ft_popup.find('span.tail').first().css({'left' : tail + 'px'});
	}
	
	this.getTarget = function() {
		return this.target;
	}
}


ftc.popup.profileWindow = new function() {
	this.open = function(no) {
	
		var url = ftc.urls.USER_PROFILE_WINDOW + '/' + no;
		var width = 600;
		var height= 380;
		var name = "ft_profile_window";
		
		ftc.utils.openWin(name, url, width, height);
	}
}

ftc.popup.osu_login = new function() {
	this.visible = 0;
	
	this.show = function() {
		var ft_popup = ftj('#ftc_osu_list');
		
		if (ft_popup.length <= 0) {
			var markup = '<div id="ftc_osu_list" class="ftc_osu_list">' +
				'<ul class="ftc_osu_list_wrapper">' +
					'<li><a href="#TWITTER_SIGNIN" title="Sign in with Twitter" onclick="ftc.module.twitter.connect(); return false;" class="ftc_osu_btn_list ftc_osu_twitter"><span>twitter</span></a></li>' +
					'<li><a href="#FACEBOOK_SIGNIN" title="Sign in with Facebook" onclick="ftc.module.facebook.connect(); return false;" class="ftc_osu_btn_list ftc_osu_facebook"><span>Facebook</span></a></li>' +
					'<li><a href="#GOOGLE_SIGNIN" title="Sign in with Google" onclick="ftc.module.google.connect(); return false;" class="ftc_osu_btn_list ftc_osu_google"><span>Google</span></a></li>' +
					'<li><a href="#ME2DAY_SIGNIN" title="Sign in with Me2day" onclick="ftc.module.me2day.connect(); return false;" class="ftc_osu_btn_list ftc_osu_me2day"><span>Me2day</span></a></li>' +
					'<li class="last"><a href="#YAHOO_SIGNIN" title="Sign in with Yahoo" onclick="ftc.module.yahoo.connect(); return false;" class="ftc_osu_btn_list ftc_osu_yahoo"><span>Yahoo</span></a></li>' +
				'</ul>' +
			'</div>';
			
			ftj(markup).appendTo('body').hide();
		}
		
		this.reposition();
	}
	
	this.close = function() {
		var ft_popup = ftj('#ftc_osu_list');
		ft_popup.hide();
		this.visible = 0;
	}
	
	this.reposition = function() {
		var ft_popup = ftj('#ftc_osu_list');
		var target = ftj('.ftc_osu_btn');
		
		ft_popup.css({
			'position': 'absolute',
			'top': (target.offset().top + target.height() + 2) + 'px',
			'left': (target.offset().left - 24) + 'px'
		}).show();
		this.visible = 1;
	}
	
	this.toggle = function() {
		if (this.visible == 1) {
			this.close();
		}
		else {
			this.show();
		}
	}
}
/**
 * Control Cookies
 *
 * @option Number|Date expires Either an integer specifying the expiration date from now on in days or a Date object. If a negative value is specified (e.g. a date in the past), the cookie will be deleted. If set to null or omitted, the cookie will be a session cookie and will not be retained when the the browser exits.
 * @option String path The value of the path atribute of the cookie (default: path of page that created the cookie).
 * @option String domain The value of the domain attribute of the cookie (default: domain of page that created the cookie).
 * @option Boolean secure If true, the secure attribute of the cookie will be set and the cookie transmission will require a secure protocol (like HTTPS).
 */
ftc.cookie = new function() {
	this.set = function(name, value, options) {
		if (typeof value != 'undefined') { // name and value given, set cookie
			
		    options = options || {};
		    if (value === null) {
		        value = '';
		        options = ftj.extend({}, options); // clone object since it's unexpected behavior if the expired property were changed
		        options.expires = -1;
		    }
		    var expires = '';
		    if (options.expires && (typeof options.expires == 'number' || options.expires.toUTCString)) {
		        var date;
		        if (typeof options.expires == 'number') {
		            date = new Date();
		            date.setTime(date.getTime() + (options.expires * 24 * 60 * 60 * 1000));
		        } else {
		            date = options.expires;
		        }
		        expires = '; expires=' + date.toUTCString(); // use expires attribute, max-age is not supported by IE
		    }
		    // NOTE Needed to parenthesize options.path and options.domain
		    // in the following expressions, otherwise they evaluate to undefined
		    // in the packed version for some reason...
		    var path = options.path ? '; path=' + (options.path) : '';
		    var domain = options.domain ? '; domain=' + (options.domain) : '';
		    var secure = options.secure ? '; secure' : '';
		    document.cookie = [name, '=', encodeURIComponent(value), expires, path, domain, secure].join('');
		}
	}
	
	this.get = function(name) {
		var cookieValue = null;
		if (document.cookie && document.cookie != '') {
		    var cookies = document.cookie.split(';');
		    
		    for (var i = 0; i < cookies.length; i++) {
		        var cookie = cookies[i].trim();
		        
		        // Does this cookie string begin with the name we want?
		        if (cookie.substring(0, name.length + 1) == (name + '=')) {
					//alert(cookie.substring(name.length + 1));
		        	try {
		        		cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
		        	}
		        	catch (e) {
		        		cookieValue = cookie.substring(name.length + 1);
		        	}
		            break;
		        }
		    }
		}
		return cookieValue;
	}

	this.remove = function(name, option) {
		return this.set(name, null, option);
	}
}

/**
 * ftc.strings
 */
ftc.strings = new function() {
	this.REPLY_TITLE = '#{user_name}님에게 댓글달기';
	
	this.POPUP_SUPPORTERS_TITLE = '#{user_name}님의 댓글을 지지하는 사용자들';
	
	this.POPUP_SUPPORT_TITLE = '#{user_name}님의 <em>댓글</em>을 지지하기';
	
	this.ERROR_TITLE = '안내';
	
	this.ERROR_REQUEST = '서버에 데이터를 요청하는중 오류가 발생하였습니다.<br/>잠시 기다리셨다가 다시 시도해보시기 바랍니다.<br/>계속해서 이 오류가 발생하면 support@tcomment.com 으로 오류 상황에 대하여 이메일을 보내주시기 바랍니다.';
	
	this.ERROR_REQUIRE_COMMENT_BODY = '댓글을 작성해주세요.<br/>댓글은 최소 10자 이상 쓰셔야합니다.';
	this.ERROR_REQUIRE_NICK = '닉네임을 입력해주세요.';
	
	this.ERROR_LONG_COMMENT_BODY = '댓글이 너무 깁니다.<br/>댓글은 최대 400자까지 쓸 수 있습니다.';
	
	this.ERROR_NO_GUEST_COMMENT = '손님으로 댓글을 달 수 없습니다.<br/>댓글을 등록하려면 로그인 하셔야합니다.';
	this.ERROR_NO_GUEST_SUPPORT = '손님으로 댓글을 지지할 수 없습니다.<br/>댓글을 지지하려면 로그인 하셔야합니다.';
	
	this.ERROR_BAD_COMMAND = '잘못된 명령입니다.';
}

ftc.strings.FLICKR_NO_RESULT = '주어진 검색어로 검색한 결과가 없습니다!<br/>다른 검색어로 시도해보세요!';
ftc.strings.FLICKR_NEED_TEXT = '플리커 검색을 하시려면 검색어를 입력하세요.';

ftc.strings.YOUTUBE_NO_RESULT = '주어진 검색어로 검색한 결과가 없습니다!<br/>다른 검색어로 시도해보세요!';
ftc.strings.YOUTUBE_NEED_TEXT = '유튜브 검색을 하시려면 검색어를 입력하세요.';
ftc.strings.TEXTAREA_INFO = '내용은 400자 이내로 적어주세요. 상업광고, 인신공격, 비방, 욕설 등은 임의로 삭제할 수 있습니다.';
/**
 * ftc.urls
 * @author flankerz
 */

// ftc.urls
ftc.urls = new function() {
	this.PLUGIN_HOST = 'http://plugin.tcomment.com';
	//this.WWW_HOST = 'http://www.tcomment.com';
	this.WWW_HOST = this.PLUGIN_HOST;
	this.LOGIN = this.WWW_HOST + '/profile/login';
	this.LOGOUT = this.WWW_HOST + '/account/logout';
	this.COMMENT_POST = this.PLUGIN_HOST + '/comment/add/';
	this.COMMENT_UPDATE = this.PLUGIN_HOST + '/comment/update/';
	this.COMMENT_VOTE = this.PLUGIN_HOST + '/comment/vote/';
	this.COMMENT_REPORT = this.PLUGIN_HOST + '/comment/report/';
	this.COMMENT_REMOVE = this.PLUGIN_HOST + '/comment/remove/';
	this.COMMENT_SUPPORT = this.PLUGIN_HOST + '/comment/support/';
	this.COMMENT_LIST = this.PLUGIN_HOST + '/comment/items/';
	
	this.USER_PROFILE = this.PLUGIN_HOST + '/profile';
	this.USER_PROFILE_WINDOW = this.PLUGIN_HOST + '/popup/profile_window';
	this.USER_INFO = this.PLUGIN_HOST + '/profile/info';
	this.POPUP_SUPPORTERS = this.PLUGIN_HOST + '/popup/supporter/';
	this.POPUP_PROFILE = this.PLUGIN_HOST + '/popup/profile/';
	this.MANAGE_PROFILE = this.WWW_HOST + '/profile/manage/';
	this.IMG_ROOT = this.PLUGIN_HOST + '/images';
	this.PARTNER_CHECK = this.PLUGIN_HOST + '/partners/check';
	
	this.CHECK_USER_NICK = this.WWW_HOST + '/account/check_nick/';
	this.CHECK_USER_ID = this.WWW_HOST + '/account/check_id/';
	this.CHECK_USER_PHONE = this.WWW_HOST + '/realname/cellphone/';
	
	this.TWITTER_CONNECT = this.WWW_HOST + '/osu/twitter/connect';
	this.TWITTER_DISCONNECT = this.WWW_HOST + '/osu/twitter/disconnect';
	this.TWITTER_CHECK = this.WWW_HOST + '/osu/twitter/check';
	
	this.NEWSBANK_SEARCH = this.WWW_HOST + '/partner/newsbank/search';
	this.FLICKR_SEARCH = this.WWW_HOST + '/module/flickr/photo_search';
	
	this.YOUTUBE_SEARCH = 'http://gdata.youtube.com/feeds/api/videos';
};
/**
 * ftc.markup
 * Markup List
 */
ftc.markup = new function() {
	// PROGRESS_ROUND
	this.PROGRESS_ROUND = '<div id="ft_progress_#{key}" class="ft_progress"><div class="ft_progress_msg">#{msg}</div></div>';
	
	// POPUP_MODAL
	this.POPUP_MODAL = '<div id="ft_msgbox" class="ft_popup">'+
		'<table class="ft_popup_table"><tr><td class="nw"></td><td class="n"></td><td class="ne"></td></tr>' + 
		'<tr><td class="w"></td><td class="c"><div class="ft_popup_title"><span class="ft_popup_title_inside">#{title}</span><a href="#close" onclick="ftc.popup.close(#{key}); return false;" id="ft_hide_msgbox" class="btn_close">Close</a></div><div class="ft_popup_content"><p>#{msg}</p></div>' + 
		'<div class="ft_popup_buttons"><span class="button"><button type="button" onclick="ftc.popup.close(#{key}); return false;"><strong>#{button_face}</strong></button></span></div>' +
		'</td><td class="e"></td></tr>' + 
		'<tr><td class="sw"></td><td class="s"></td><td class="se"></td></tr></table>' +
		'</div>';
		
	// POPUP_TAILED
	this.POPUP_TAILED = '<div id="#{id}" class="ft_popup"><table class="ft_popup_table"><tr><td class="nw"></td><td class="n"><span class="tail_n"></span></td><td class="ne"></td></tr><tr><td class="w"></td><td class="c">#{markup}</td><td class="e"></td></tr><tr><td class="sw"></td><td class="s"></td><td class="se"></td></tr></table></div>';
		
	
	
	if(ft_site_key == '47cc478eb1493e57334b51e63aac7f0299a5ec1b'){
		// FT_WRAPPER
		this.FT_WRAPPER = '<table class="ft_wrapper_table"><tr><td class="nw"></td><td class="n"><span class="tail"></span></td><td class="ne"></td></tr><tr><td class="w"></td><td class="c">' + 
			'<div id="#{ft_container_id}" class="ft_container"><div class="ft_container_header"></div></div>' +
			'</td></tr><tr><td class="sw"></td><td class="s"></td><td class="se"></td></tr></table><div class="ft_credit"><a href="http://pickple.com" title="pickple" target="_blank">Supported by 픽플커뮤니케이션즈</a></div>';
	}else{
		// FT_WRAPPER
		this.FT_WRAPPER = '<table class="ft_wrapper_table"><tr><td class="nw"></td><td class="n"><span class="tail"></span></td><td class="ne"></td></tr><tr><td class="w"></td><td class="c">' + 
			'<div id="#{ft_container_id}" class="ft_container"><div class="ft_container_header"></div></div>' +
			'</td><td class="e"></td></tr><tr><td class="sw"></td><td class="s"></td><td class="se"></td></tr></table><div class="ft_credit"><a href="http://pickple.com" title="pickple" target="_blank">Supported by 픽플커뮤니케이션즈</a></div>';
	}
	
	if(ft_site_key == 'c33f6bfe92287fca9c75aac4973ce0d652766fcf'){
		// etnews_event FT_CONTAINER_HEADER
		this.FT_CONTAINER_HEADER = '<div class="ft_top_msg"><strong>- 댓글을 작성해 주세요</strong> (이벤트 댓글은 삭제 및 수정이 불가합니다.)</div><div class="ft_top_info">#{top_info}</div>';
		//this.FT_CONTAINER_HEADER = '<div class="ft_top_msg">이 기사에 대한 <strong>댓글 이야기</strong></div><div class="ft_top_info">#{top_info}</div>';
	}else if(ft_site_key == '0cf6f099934e855a474cbc7d137469bcc84308ff'){
		// AK1525 FT_CONTAINER_HEADER
		this.FT_CONTAINER_HEADER = '<div class="ft_top_msg"><strong>1525들과 함께 나누는 캠퍼스 라이프</strong></div><div class="ft_top_info">#{top_info}</div>';
	}else if(ft_site_key == '6a5aef3a1853fb05249cfca0a81bca459b3cdbe2' || ft_site_key == 'b248380dfc5ed6e21143decb4c6a0fcb709aecd0'){
		// FT_CONTAINER_HEADER
		//this.FT_CONTAINER_HEADER = '<div class="ft_top_msg"></div><div class="ft_top_info">#{top_info}</div>';
		// WYLIE FT_CONTAINER_HEADER
		this.FT_CONTAINER_HEADER = '<div class="ft_top_msg"></div>' + 
		'<div style="width:600px; height:30px;">' + 
		'<ul class="ft_osu_buttons">'+
			'<li><a href="#ME2DAY_SIGNIN" title="Sign in with Me2day" onclick="ftc.module.me2day.connect(); return false;" class="ftc_osu_btn_list ftc_osu_me2day"><span></span></a></li>' +
			'<li><a href="#TWITTER_SIGNIN" title="Sign in with Twitter" onclick="ftc.module.twitter.connect(); return false;" class="ftc_osu_btn_list ftc_osu_twitter"><span></span></a></li>' +
			'<li><a href="#FACEBOOK_SIGNIN" title="Sign in with Facebook" onclick="ftc.module.facebook.connect(); return false;" class="ftc_osu_btn_list ftc_osu_facebook"><span></span></a></li>' +
		'</ul>' + 
		'</div>' + 
		'<div class="ft_top_info">#{top_info}</div>';
	}else if(ft_site_key == '530df9360066e9fa4e24a7c833dea65e682f35a9'){	// 본스타 트레이닝 센터
        // FT_CONTAINER_HEADER
        this.FT_CONTAINER_HEADER = '<div class="ft_top_msg">이 게시물에 대한 <strong>댓글 이야기</strong></div><div class="ft_top_info">#{top_info}</div>';
	}else if(ft_site_key == 'e73efad6feb7670a626d5b4ec213f53096858c68'){	// 매경헬스
		this.FT_CONTAINER_HEADER = '<div class="ft_top_msg"><strong>댓글 이야기</strong></div><div class="ft_top_info">#{top_info}</div>';
    }else if(ft_site_key == '73cc98ea400d58289d32dfde7050c8c382adeab8' || ft_site_key == '19a83daed111969f376762beff9fac6af0c965d7' || ft_site_key == 'e815465c30b6949c5c02a0592b2ea56b0f9f8c74'){  // 넥스브레인 KT 이벤트 
        this.FT_CONTAINER_HEADER = '<div class="ft_top_msg"><strong>댓글 이야기</strong></div><div class="ft_top_info">#{top_info}</div>';
    }else if(ft_site_key == '760c2994294e74542d53906c98b4c4e379eff211'){ // 동화자연마루
		this.FT_CONTAINER_HEADER = '<div class="ft_top_msg">SNS계정 로그인 후 댓글을 남겨주세요.</div><div class="ft_top_info">#{top_info}</div>';
	}else{
		// FT_CONTAINER_HEADER
		this.FT_CONTAINER_HEADER = '<div class="ft_top_msg">이 기사에 대한 <strong>댓글 이야기</strong></div><div class="ft_top_info">#{top_info}</div>';
	}
	

	// FT_CONTAINER_HEADER 스포츠서울
	this.FT_CONTAINER_HEADER_SPORTSSEOUL = '<div class="ft_top_msg">이 기사에 대한 <strong>나도 한마디</strong></div><div class="ft_top_info">#{top_info}</div>';

	// FT_CONTAINER_HEADER 스포츠서울
	this.FT_CONTAINER_HEADER_ETO = '<div class="ft_top_msg"><strong>소셜로 의견남기기</strong></div><div class="ft_top_info">#{top_info}</div>';

	// FT_CONTAINER_HEADER 스포츠칸
	this.FT_CONTAINER_HEADER_KHAN = '<div class="ft_top_msg">이 기사에 대한 <strong>댓글 이야기</strong></div><div class="ft_top_info">#{top_info}</div><p class="standard_reply"><a href="javascript:ftc.partner.khan.seepolicy();"><img src="http://plugin.tcomment.com/images/skin/khan/standard_btn.gif" alt="댓글삭제기분보기" /></a></p>';
	
	this.SOCIAL_LOGIN_BUTTONS = '<ul class="ft_osu_buttons">'+
		'<li class="ft_osu_buttons_title">소셜로그인</li>';
    
	if(ft_site_key == '71c08d35772c7f8809b3b46fcc553ef0edc4b55c' || ft_site_key == '18c2abaf61a8631382b8fdfe8f6fa37f243686f7' ){
		this.SOCIAL_LOGIN_BUTTONS += '<li><a href="#cplogin" title="login" class="ftc_osu_btn_list ftc_osu_cplogin login" onclick="ftc.partner.plain.login();"><span>cplogin</span></a></li>';
	}else if(ft_site_key == 'bcca8f82015dd7c22eba2ed99037ab6b36bc2d0a'){// 국제신문
		this.SOCIAL_LOGIN_BUTTONS += '<li><a href="#cplogin" title="login" class="ftc_osu_btn_list ftc_osu_cplogin login" onclick="ftc.partner.kookje.login();"><span>cplogin</span></a></li>';
	}
	this.SOCIAL_LOGIN_BUTTONS +=
		'<li><a href="#TOpenID" title="Sign in with TOpenID" onclick="ftc.topenid.showLoginPopup(); return false;" class="ftc_osu_btn_list ftc_osu_topenid login"><span>topenid</span></a></li>' +
		'<li><a href="#ME2DAY_SIGNIN" title="Sign in with Me2day" onclick="ftc.module.me2day.connect(); return false;" class="ftc_osu_btn_list ftc_osu_me2day"><span>Me2day</span></a></li>' +
		'<li><a href="#TWITTER_SIGNIN" title="Sign in with Twitter" onclick="ftc.module.twitter.connect(); return false;" class="ftc_osu_btn_list ftc_osu_twitter"><span>twitter</span></a></li>' +
		'<li><a href="#FACEBOOK_SIGNIN" title="Sign in with Facebook" onclick="ftc.module.facebook.connect(); return false;" class="ftc_osu_btn_list ftc_osu_facebook"><span>Facebook</span></a></li>' +
		'<li><a href="#GOOGLE_SIGNIN" title="Sign in with Google" onclick="ftc.module.google.connect(); return false;" class="ftc_osu_btn_list ftc_osu_google"><span>Google</span></a></li>' +
		'<li class="last"><a href="#YAHOO_SIGNIN" title="Sign in with Yahoo" onclick="ftc.module.yahoo.connect(); return false;" class="ftc_osu_btn_list ftc_osu_yahoo"><span>Yahoo</span></a></li>' + 
	'</ul>';
	
	this.SOCIAL_LOGIN_SMALL_BUTTONS = '<ul class="ft_osu_buttons">'+
		'<li class="ft_osu_buttons_title small">소셜로그인</li>' +
		'<li><a href="#TWITTER_SIGNIN" title="Sign in with Twitter" onclick="ftc.module.twitter.connect(); return false;" class="ftc_osu_btn_list ftc_osu_twitter small"><span>twitter</span></a></li>' +
		'<li><a href="#ME2DAY_SIGNIN" title="Sign in with Me2day" onclick="ftc.module.me2day.connect(); return false;" class="ftc_osu_btn_list ftc_osu_me2day small"><span>Me2day</span></a></li>' +
		'<li><a href="#FACEBOOK_SIGNIN" title="Sign in with Facebook" onclick="ftc.module.facebook.connect(); return false;" class="ftc_osu_btn_list ftc_osu_facebook small"><span>Facebook</span></a></li>' +
		'<li><a href="#GOOGLE_SIGNIN" title="Sign in with Google" onclick="ftc.module.google.connect(); return false;" class="ftc_osu_btn_list ftc_osu_google small"><span>Google</span></a></li>' +
		'<li class="last"><a href="#YAHOO_SIGNIN" title="Sign in with Yahoo" onclick="ftc.module.yahoo.connect(); return false;" class="ftc_osu_btn_list ftc_osu_yahoo small"><span>Yahoo</span></a></li>' + 
	'</ul>';


    this.PARTNER_WOWTV = this.PARTNER_WOWNET = this.SOCIAL_LOGIN_BUTTONS;	// 와우티비, 와우넷 로그인 연동 디자인
	this.PARTNER_KOOKJE = this.SOCIAL_LOGIN_BUTTONS;                        // 국제신문	
	
	// PARTNER
	this.PARTNER = '<a href="#login_topenid" onclick="ftc.topenid.showLoginPopup(); return false;" class="login">티커맨트 로그인</a>';
	
	// PARTNER_KUKINEWS
	this.PARTNER_KUKINEWS = '<a href="#login_kuki" onclick="ftc.partner.kukinews.showLoginPopup(); return false;" class="partner_login partner_kukinews">쿠키뉴스 로그인</a> <a href="#login_topenid" onclick="ftc.topenid.showLoginPopup(); return false;" class="login">티커맨트 로그인</a>';

	// PARTNER_DONGA
	this.PARTNER_DONGA = '<a href="#login_donga" onclick="ftc.partner.donga.showLoginPopup(); return false;" class="partner_login partner_donga">동아닷컴 로그인</a> <a href="#login_topenid" onclick="ftc.topenid.showLoginPopup(); return false;" class="login">티커맨트 로그인</a>';

	// PARTNER_DONGA
	/*this.PARTNER_DONGA_DKBNEWS = '<ul class="ft_osu_buttons">'+
		'<li class="ft_osu_buttons_title small">소셜로그인</li>' +
		'<li><a href="#login_donga" onclick="ftc.partner.donga_dkbnews.showLoginPopup(); return false;" class="partner_login partner_donga">동아닷컴 로그인</a></li>'+
		'<li><a href="#TWITTER_SIGNIN" title="Sign in with Twitter" onclick="ftc.module.twitter.connect(); return false;" class="ftc_osu_btn_list ftc_osu_twitter small"><span class="ftc_osu_twitter">twitter</span></a></li>' +
		'<li><a href="#FACEBOOK_SIGNIN" title="Sign in with Facebook" onclick="ftc.module.facebook.connect(); return false;" class="ftc_osu_btn_list ftc_osu_facebook small"><span class="ftc_osu_facebook">Facebook</span></a></li>' +
		'<li><a href="#ME2DAY_SIGNIN" title="Sign in with Me2day" onclick="ftc.module.me2day.connect(); return false;" class="ftc_osu_btn_list ftc_osu_me2day small"><span class="ftc_osu_me2day">Me2day</span></a></li>' +
		'<li><a href="#login_topenid" onclick="ftc.topenid.showLoginPopup(); return false;" class="login">티커맨트 로그인</a></li>' +
	'</ul>';*/
	
	this.PARTNER_DONGA_DKBNEWS = '<ul class="ft_osu_buttons">' +
		'<li><a href="#login_donga" onclick="ftc.partner.donga_dkbnews.showLoginPopup(); return false;" class="ftc_osu_btn_list partner_donga ftc_osu_donga_dkbnews"><span>동아닷컴 로그인</span></a></li>' +
		'<li><a href="#TWITTER_SIGNIN" title="Sign in with Twitter" onclick="ftc.module.twitter.connect(); return false;" class="ftc_osu_btn_list ftc_osu_twitter"><span>twitter</span></a></li>' +
		'<li><a href="#ME2DAY_SIGNIN" title="Sign in with Me2day" onclick="ftc.module.me2day.connect(); return false;" class="ftc_osu_btn_list ftc_osu_me2day"><span>Me2day</span></a></li>' +
		'<li><a href="#FACEBOOK_SIGNIN" title="Sign in with Facebook" onclick="ftc.module.facebook.connect(); return false;" class="ftc_osu_btn_list ftc_osu_facebook"><span>Facebook</span></a></li>' +
		'<li><a href="#TOpenID" title="Sign in with TOpenID" onclick="ftc.topenid.showLoginPopup(); return false;" class="ftc_osu_btn_list ftc_osu_topenid login"><span>topenid</span></a></li>' +
	'</ul>';


	// PARTNER_DONGA
	this.PARTNER_DONGA_CAR = '<ul class="ft_osu_buttons">'+
		'<li class="ft_osu_buttons_title small">소셜로그인</li>' +
		'<li><a href="#login_donga" onclick="ftc.partner.donga_car.showLoginPopup(); return false;" class="partner_login partner_donga">동아닷컴 로그인</a></li>'+
		'<li><a href="#login_topenid" onclick="ftc.topenid.showLoginPopup(); return false;" class="login">티커맨트 로그인</a></li>' +
		'<li><a href="#TWITTER_SIGNIN" title="Sign in with Twitter" onclick="ftc.module.twitter.connect(); return false;" class="ftc_osu_btn_list ftc_osu_twitter small"><span class="ftc_osu_twitter">twitter</span></a></li>' +
		'<li><a href="#FACEBOOK_SIGNIN" title="Sign in with Facebook" onclick="ftc.module.facebook.connect(); return false;" class="ftc_osu_btn_list ftc_osu_facebook small"><span class="ftc_osu_facebook">Facebook</span></a></li>' +
	'</ul>';
	
	// PARTNER_EDAILY
	this.PARTNER_EDAILY = '<ul class="ft_osu_buttons">'+
		'<li class="ft_osu_buttons_title small">소셜로그인</li>' +
		'<li><a href="#ME2DAY_SIGNIN" title="Sign in with Me2day" onclick="ftc.module.me2day.connect(); return false;" class="ftc_osu_btn_list ftc_osu_me2day small"><span>Me2day</span></a></li>' +
		'<li><a href="#TWITTER_SIGNIN" title="Sign in with Twitter" onclick="ftc.module.twitter.connect(); return false;" class="ftc_osu_btn_list ftc_osu_twitter small"><span>twitter</span></a></li>' +
		'<li><a href="#FACEBOOK_SIGNIN" title="Sign in with Facebook" onclick="ftc.module.facebook.connect(); return false;" class="ftc_osu_btn_list ftc_osu_facebook small"><span>Facebook</span></a></li>' +
		'<li><a href="#GOOGLE_SIGNIN" title="Sign in with Google" onclick="ftc.module.google.connect(); return false;" class="ftc_osu_btn_list ftc_osu_google small"><span>Google</span></a></li>' +
		'<li class="last"><a href="#YAHOO_SIGNIN" title="Sign in with Yahoo" onclick="ftc.module.yahoo.connect(); return false;" class="ftc_osu_btn_list ftc_osu_yahoo small"><span>Yahoo</span></a></li>' + 
	'</ul>';
	
	// PARTNER_MUNHWA
	this.PARTNER_MUNHWA = '<a href="#login_munhwa" onclick="ftc.partner.munhwa.showLoginPopup(); return false;" class="partner_login partner_munhwa">문화일보 로그인</a> <a href="#login_topenid" onclick="ftc.topenid.showLoginPopup(); return false;" class="login">티커맨트 로그인</a>';
	
	// PARTNER_WOMENNEWS
	this.PARTNER_WOMENNEWS = '<a href="#login_womennews" onclick="ftc.partner.womennews.showLoginPopup(); return false;" class="partner_login partner_womennews">여성신문 로그인</a> <a href="#login_topenid" onclick="ftc.topenid.showLoginPopup(); return false;" class="login">티커맨트 로그인</a>';
	
	// PARTNER_KBS
	this.PARTNER_KBS = '<a href="#login_kbs" onclick="ftc.partner.kbs.showLoginPopup(); return false;" class="partner_login partner_kbs">KBS 로그인</a>';
	
	// PARTNER_NEWDAILY
	this.PARTNER_NEWDAILY = '<ul class="ft_osu_buttons">'+'<li class="ft_osu_buttons_title small">소셜로그인</li>' +
		'<li><a href="#ME2DAY_SIGNIN" title="Sign in with Me2day" onclick="ftc.module.me2day.connect(); return false;" class="ftc_osu_btn_list ftc_osu_me2day small"><span>Me2day</span></a></li>' +
		'<li><a href="#TWITTER_SIGNIN" title="Sign in with Twitter" onclick="ftc.module.twitter.connect(); return false;" class="ftc_osu_btn_list ftc_osu_twitter small"><span>twitter</span></a></li>' +
		'<li><a href="#FACEBOOK_SIGNIN" title="Sign in with Facebook" onclick="ftc.module.facebook.connect(); return false;" class="ftc_osu_btn_list ftc_osu_facebook small"><span>Facebook</span></a></li>' +
		'<li><a href="#GOOGLE_SIGNIN" title="Sign in with Google" onclick="ftc.module.google.connect(); return false;" class="ftc_osu_btn_list ftc_osu_google small"><span>Google</span></a></li>' +
		'<li class="last"><a href="#YAHOO_SIGNIN" title="Sign in with Yahoo" onclick="ftc.module.yahoo.connect(); return false;" class="ftc_osu_btn_list ftc_osu_yahoo small"><span>Yahoo</span></a></li>' + 
	'</ul>';
	
	// PARTNER_CHOSUN
	this.PARTNER_CHOSUN= '<a href="#login_chosun" onclick="ftc.partner.chosun.showLoginPopup(); return false;" class="partner_login partner_chosun">조선닷컴 로그인</a> <a href="#login_topenid" onclick="ftc.topenid.showLoginPopup(); return false;" class="login">티커맨트 로그인</a>';
	
	// PARTNER_MONEYTODAY
	this.PARTNER_MONEYTODAY = '<ul class="ft_osu_buttons">'+
		'<li class="ft_osu_buttons_title small">소셜로그인</li>' +
		'<li><a href="#ME2DAY_SIGNIN" title="Sign in with Me2day" onclick="ftc.module.me2day.connect(); return false;" class="ftc_osu_btn_list ftc_osu_me2day small"><span>Me2day</span></a></li>' +
		'<li><a href="#TWITTER_SIGNIN" title="Sign in with Twitter" onclick="ftc.module.twitter.connect(); return false;" class="ftc_osu_btn_list ftc_osu_twitter small"><span>twitter</span></a></li>' +
		'<li><a href="#FACEBOOK_SIGNIN" title="Sign in with Facebook" onclick="ftc.module.facebook.connect(); return false;" class="ftc_osu_btn_list ftc_osu_facebook small"><span>Facebook</span></a></li>' +
		'<li><a href="#GOOGLE_SIGNIN" title="Sign in with Google" onclick="ftc.module.google.connect(); return false;" class="ftc_osu_btn_list ftc_osu_google small"><span>Google</span></a></li>' +
		'<li class="last"><a href="#YAHOO_SIGNIN" title="Sign in with Yahoo" onclick="ftc.module.yahoo.connect(); return false;" class="ftc_osu_btn_list ftc_osu_yahoo small"><span>Yahoo</span></a></li>' + 
	'</ul>';
	
	// PARTNER_HANI
	this.PARTNER_HANI = '<ul class="ft_osu_buttons">'+
		'<li class="ft_osu_buttons_title">소셜로그인</li>' +
		'<li><a href="#HANI_SIGNIN" title="한겨레 로그인" onclick="ftc.partner.hani.login(); return false;" class="ftc_osu_btn_list ftc_osu_hani"><span>한겨레</span></a></li>' +
		'<li><a href="#TWITTER_SIGNIN" title="Sign in with Twitter" onclick="ftc.module.twitter.connect(); return false;" class="ftc_osu_btn_list ftc_osu_twitter"><span>twitter</span></a></li>' +
		'<li><a href="#FACEBOOK_SIGNIN" title="Sign in with Facebook" onclick="ftc.module.facebook.connect(); return false;" class="ftc_osu_btn_list ftc_osu_facebook"><span>Facebook</span></a></li>' +
		'<li><a href="#GOOGLE_SIGNIN" title="Sign in with Google" onclick="ftc.module.google.connect(); return false;" class="ftc_osu_btn_list ftc_osu_google"><span>Google</span></a></li>' +
	'</ul>';
	
	this.PARTNER_HANI_DNP = '<ul class="ft_osu_buttons">'+
		'<li class="ft_osu_buttons_title">소셜로그인</li>' +
		'<li><a href="#HANI_SIGNIN" title="한겨레 로그인" onclick="ftc.partner.hani_dnp.login(); return false;" class="ftc_osu_btn_list ftc_osu_hani"><span>한겨레</span></a></li>' +
		'<li><a href="#TWITTER_SIGNIN" title="Sign in with Twitter" onclick="ftc.module.twitter.connect(); return false;" class="ftc_osu_btn_list ftc_osu_twitter"><span>twitter</span></a></li>' +
		'<li><a href="#FACEBOOK_SIGNIN" title="Sign in with Facebook" onclick="ftc.module.facebook.connect(); return false;" class="ftc_osu_btn_list ftc_osu_facebook"><span>Facebook</span></a></li>' +
		'<li><a href="#GOOGLE_SIGNIN" title="Sign in with Google" onclick="ftc.module.google.connect(); return false;" class="ftc_osu_btn_list ftc_osu_google"><span>Google</span></a></li>' +
	'</ul>';
	
	this.PARTNER_HANI_KOREANMUSICAWARDS = '<ul class="ft_osu_buttons">'+
		'<li class="ft_osu_buttons_title">소셜로그인</li>' +
		'<li><a href="#HANI_SIGNIN" title="한겨레 로그인" onclick="ftc.partner.hani_koreanmusicawards.login(); return false;" class="ftc_osu_btn_list ftc_osu_hani"><span>한겨레</span></a></li>' +
		'<li><a href="#TWITTER_SIGNIN" title="Sign in with Twitter" onclick="ftc.module.twitter.connect(); return false;" class="ftc_osu_btn_list ftc_osu_twitter"><span>twitter</span></a></li>' +
		'<li><a href="#FACEBOOK_SIGNIN" title="Sign in with Facebook" onclick="ftc.module.facebook.connect(); return false;" class="ftc_osu_btn_list ftc_osu_facebook"><span>Facebook</span></a></li>' +
		'<li><a href="#GOOGLE_SIGNIN" title="Sign in with Google" onclick="ftc.module.google.connect(); return false;" class="ftc_osu_btn_list ftc_osu_google"><span>Google</span></a></li>' +
	'</ul>';

	this.PARTNER_HANI_KKINI = '<ul class="ft_osu_buttons">'+
		'<li class="ft_osu_buttons_title">소셜로그인</li>' +
		'<li><a href="#HANI_SIGNIN" title="한겨레 로그인" onclick="ftc.partner.hani_kkini.login(); return false;" class="ftc_osu_btn_list ftc_osu_hani"><span>한겨레</span></a></li>' +
		'<li><a href="#TWITTER_SIGNIN" title="Sign in with Twitter" onclick="ftc.module.twitter.connect(); return false;" class="ftc_osu_btn_list ftc_osu_twitter"><span>twitter</span></a></li>' +
		'<li><a href="#FACEBOOK_SIGNIN" title="Sign in with Facebook" onclick="ftc.module.facebook.connect(); return false;" class="ftc_osu_btn_list ftc_osu_facebook"><span>Facebook</span></a></li>' +
		'<li><a href="#GOOGLE_SIGNIN" title="Sign in with Google" onclick="ftc.module.google.connect(); return false;" class="ftc_osu_btn_list ftc_osu_google"><span>Google</span></a></li>' +
	'</ul>';

	this.PARTNER_HANI_HU = '<ul class="ft_osu_buttons">'+
		'<li class="ft_osu_buttons_title">소셜로그인</li>' +
		'<li><a href="#HANI_SIGNIN" title="한겨레 로그인" onclick="ftc.partner.hani_hu.login(); return false;" class="ftc_osu_btn_list ftc_osu_hani"><span>한겨레</span></a></li>' +
		'<li><a href="#TWITTER_SIGNIN" title="Sign in with Twitter" onclick="ftc.module.twitter.connect(); return false;" class="ftc_osu_btn_list ftc_osu_twitter"><span>twitter</span></a></li>' +
		'<li><a href="#FACEBOOK_SIGNIN" title="Sign in with Facebook" onclick="ftc.module.facebook.connect(); return false;" class="ftc_osu_btn_list ftc_osu_facebook"><span>Facebook</span></a></li>' +
		'<li><a href="#GOOGLE_SIGNIN" title="Sign in with Google" onclick="ftc.module.google.connect(); return false;" class="ftc_osu_btn_list ftc_osu_google"><span>Google</span></a></li>' +
	'</ul>';

	this.PARTNER_HANI_PHOTOVIL = '<ul class="ft_osu_buttons">'+
		'<li class="ft_osu_buttons_title">소셜로그인</li>' +
		'<li><a href="#HANI_SIGNIN" title="한겨레 로그인" onclick="ftc.partner.hani_koreanmusicawards.login(); return false;" class="ftc_osu_btn_list ftc_osu_hani"><span>한겨레</span></a></li>' +
		'<li><a href="#TWITTER_SIGNIN" title="Sign in with Twitter" onclick="ftc.module.twitter.connect(); return false;" class="ftc_osu_btn_list ftc_osu_twitter"><span>twitter</span></a></li>' +
		'<li><a href="#FACEBOOK_SIGNIN" title="Sign in with Facebook" onclick="ftc.module.facebook.connect(); return false;" class="ftc_osu_btn_list ftc_osu_facebook"><span>Facebook</span></a></li>' +
		'<li><a href="#GOOGLE_SIGNIN" title="Sign in with Google" onclick="ftc.module.google.connect(); return false;" class="ftc_osu_btn_list ftc_osu_google"><span>Google</span></a></li>' +
	'</ul>';

	// PARTNER_ASIAE
	this.PARTNER_ASIAE = '<ul class="ft_osu_buttons">'+
		'<li class="ft_osu_buttons_title">소셜로그인</li>' +
		'<li><a href="#TOpenID" title="Sign in with TOpenID" onclick="ftc.topenid.showLoginPopup(); return false;" class="ftc_osu_btn_list ftc_osu_topenid login"><span>topenid</span></a></li>' +
		'<li><a href="#ASIAE_SIGNIN" title="아시아경제 로그인" onclick="ftc.partner.asiae.login(); return false;" class="ftc_osu_btn_list ftc_osu_asiae"><span>한겨레</span></a></li>' +
		'<li><a href="#TWITTER_SIGNIN" title="Sign in with Twitter" onclick="ftc.module.twitter.connect(); return false;" class="ftc_osu_btn_list ftc_osu_twitter"><span>twitter</span></a></li>' +
		'<li><a href="#ME2DAY_SIGNIN" title="Sign in with Me2day" onclick="ftc.module.me2day.connect(); return false;" class="ftc_osu_btn_list ftc_osu_me2day"><span>Me2day</span></a></li>' +
		'<li><a href="#FACEBOOK_SIGNIN" title="Sign in with Facebook" onclick="ftc.module.facebook.connect(); return false;" class="ftc_osu_btn_list ftc_osu_facebook"><span>Facebook</span></a></li>' +
		'<li><a href="#GOOGLE_SIGNIN" title="Sign in with Google" onclick="ftc.module.google.connect(); return false;" class="ftc_osu_btn_list ftc_osu_google"><span>Google</span></a></li>' +
		'<li><a href="#YAHOO_SIGNIN" title="Sign in with Yahoo" onclick="ftc.module.yahoo.connect(); return false;" class="ftc_osu_btn_list ftc_osu_yahoo"><span>Yahoo</span></a></li>' +
	'</ul>'

	this.PARTNER_HANI_MOBILE = '<ul class="ft_osu_buttons">'+
		'<li class="ft_osu_buttons_title">소셜로그인</li>' +
		'<li><a href="#HANI_SIGNIN" title="한겨레 로그인" onclick="ftc.partner.hani_mobile.login(); return false;" class="ftc_osu_btn_list ftc_osu_hani"><span>한겨레</span></a></li>' +
		'<li><a href="#TWITTER_SIGNIN" title="Sign in with Twitter" onclick="ftc.module.twitter.connect(); return false;" class="ftc_osu_btn_list ftc_osu_twitter"><span>twitter</span></a></li>' +
		'<li><a href="#FACEBOOK_SIGNIN" title="Sign in with Facebook" onclick="ftc.module.facebook.connect(); return false;" class="ftc_osu_btn_list ftc_osu_facebook"><span>Facebook</span></a></li>' +
		'<li><a href="#GOOGLE_SIGNIN" title="Sign in with Google" onclick="ftc.module.google.connect(); return false;" class="ftc_osu_btn_list ftc_osu_google"><span>Google</span></a></li>' +
	'</ul>'
	
	// PARTNER_ETNEWS
	this.PARTNER_ETNEWS = 
	'<ul class="ft_osu_buttons">'+
		'<li class="ft_osu_buttons_title">소셜로그인</li>' +
		'<li><a href="#ETNEWS_SIGNIN" title="전자신문 아이디로 로그인" onclick="ftc.partner.etnews.showLoginPopup(); return false;" class="ftc_osu_btn_list ftc_osu_etnews"><span>전자신문 로그인</span></a></li>' +
		'<li><a href="#TWITTER_SIGNIN" title="Sign in with Twitter" onclick="ftc.module.twitter.connect(); return false;" class="ftc_osu_btn_list ftc_osu_twitter"><span>twitter</span></a></li>' +
		'<li><a href="#FACEBOOK_SIGNIN" title="Sign in with Facebook" onclick="ftc.module.facebook.connect(); return false;" class="ftc_osu_btn_list ftc_osu_facebook"><span>Facebook</span></a></li>' +
		'<li><a href="#ME2DAY_SIGNIN" title="Sign in with Me2day" onclick="ftc.module.me2day.connect(); return false;" class="ftc_osu_btn_list ftc_osu_me2day"><span>Me2day</span></a></li>' +
		'<li><a href="#GOOGLE_SIGNIN" title="Sign in with Google" onclick="ftc.module.google.connect(); return false;" class="ftc_osu_btn_list ftc_osu_google"><span>Google</span></a></li>' +
		'<li><a href="#YAHOO_SIGNIN" title="Sign in with Yahoo" onclick="ftc.module.yahoo.connect(); return false;" class="ftc_osu_btn_list ftc_osu_yahoo"><span>Yahoo</span></a></li>' +
	'</ul>';
		
	this.PARTNER_SPORTSSEOUL = 
	'<ul class="ft_osu_buttons">'+
		'<li><a href="#SPORTSSEOUL_SIGNIN" title="스포츠서울 아이디로 로그인" onclick="ftc.partner.sportsseoul.login(); return false;" class="ftc_osu_btn_list ftc_osu_sportsseoul"><span>스포츠서울 로그인</span></a></li>' +
		'<li><a href="#TWITTER_SIGNIN" title="Sign in with Twitter" onclick="ftc.module.twitter.connect(); return false;" class="ftc_osu_btn_list ftc_osu_twitter"><span>twitter</span></a></li>' +
		'<li><a href="#FACEBOOK_SIGNIN" title="Sign in with Facebook" onclick="ftc.module.facebook.connect(); return false;" class="ftc_osu_btn_list ftc_osu_facebook"><span>Facebook</span></a></li>' +
		'<li><a href="#ME2DAY_SIGNIN" title="Sign in with Me2day" onclick="ftc.module.me2day.connect(); return false;" class="ftc_osu_btn_list ftc_osu_me2day"><span>Me2day</span></a></li>' +
	'</ul>';
	
	// PARTNER_SISAIN
	this.PARTNER_SISAIN = '<a href="https://www.sisainlive.com/member/login.html?backUrl=' + encodeURIComponent(location.href) + '"  class="partner_login partner_sisain">시사인 로그인</a>';
	
	
	// PARTNER_HANKYUNG
	this.PARTNER_HANKYUNG = '<ul class="ft_osu_buttons">'+
		'<li class="ft_osu_buttons_title">소셜로그인</li>' +
		'<li><a href="#HANKYUNG_SIGNIN" title="한경닷컴 로그인" onclick="ftc.partner.hankyung.login(); return false;" class="ftc_osu_btn_list ftc_osu_hankyung"><span>한경닷컴</span></a></li>' +
		'<li><a href="#TWITTER_SIGNIN" title="Sign in with Twitter" onclick="ftc.module.twitter.connect(); return false;" class="ftc_osu_btn_list ftc_osu_twitter"><span>twitter</span></a></li>' +
		'<li><a href="#FACEBOOK_SIGNIN" title="Sign in with Facebook" onclick="ftc.module.facebook.connect(); return false;" class="ftc_osu_btn_list ftc_osu_facebook"><span>Facebook</span></a></li>' +
		'<li><a href="#ME2DAY_SIGNIN" title="Sign in with Me2day" onclick="ftc.module.me2day.connect(); return false;" class="ftc_osu_btn_list ftc_osu_me2day"><span>Me2day</span></a></li>' +
		'<li><a href="#GOOGLE_SIGNIN" title="Sign in with Google" onclick="ftc.module.google.connect(); return false;" class="ftc_osu_btn_list ftc_osu_google"><span>Google</span></a></li>' +
	'</ul>';
	
	// PARTNER_ASIAE_CARPLE
	this.PARTNER_ASIAE_CARPLE = '<ul class="ft_osu_buttons">'+
		'<li class="ft_osu_buttons_title">소셜로그인</li>' +
		'<li><a href="#TWITTER_SIGNIN" title="Sign in with Twitter" onclick="ftc.module.twitter.connect(); return false;" class="ftc_osu_btn_list ftc_osu_twitter"><span>twitter</span></a></li>' +
		'<li><a href="#FACEBOOK_SIGNIN" title="Sign in with Facebook" onclick="ftc.module.facebook.connect(); return false;" class="ftc_osu_btn_list ftc_osu_facebook"><span>Facebook</span></a></li>' +
		'<li><a href="#ME2DAY_SIGNIN" title="Sign in with Me2day" onclick="ftc.module.me2day.connect(); return false;" class="ftc_osu_btn_list ftc_osu_me2day"><span>Me2day</span></a></li>' +
	'</ul>';
	
	// PARTNER_ASIAE_CARPLE_NEWS
	this.PARTNER_ASIAE_CARPLE_NEWS = '<ul class="ft_osu_buttons">'+
		'<li class="ft_osu_buttons_title">소셜로그인</li>' +
		'<li><a href="#TWITTER_SIGNIN" title="Sign in with Twitter" onclick="ftc.module.twitter.connect(); return false;" class="ftc_osu_btn_list ftc_osu_twitter"><span>twitter</span></a></li>' +
		'<li><a href="#FACEBOOK_SIGNIN" title="Sign in with Facebook" onclick="ftc.module.facebook.connect(); return false;" class="ftc_osu_btn_list ftc_osu_facebook"><span>Facebook</span></a></li>' +
		'<li><a href="#ME2DAY_SIGNIN" title="Sign in with Me2day" onclick="ftc.module.me2day.connect(); return false;" class="ftc_osu_btn_list ftc_osu_me2day"><span>Me2day</span></a></li>' +
	'</ul>';
	

	this.PARTNER_PRESSIAN = 
	'<ul class="ft_osu_buttons">'+
		'<li><a href="#PRESSIAN_SIGNIN" title="프레시안 아이디로 로그인" onclick="ftc.partner.pressian.login(); return false;" class="ftc_osu_btn_list ftc_osu_pressian"><span>프레시안 아이디 로그인</span></a></li>' +
		'<li><a href="#TWITTER_SIGNIN" title="Sign in with Twitter" onclick="ftc.module.twitter.connect(); return false;" class="ftc_osu_btn_list ftc_osu_twitter"><span>twitter</span></a></li>' +
		'<li><a href="#FACEBOOK_SIGNIN" title="Sign in with Facebook" onclick="ftc.module.facebook.connect(); return false;" class="ftc_osu_btn_list ftc_osu_facebook"><span>Facebook</span></a></li>' +
		'<li><a href="#ME2DAY_SIGNIN" title="Sign in with Me2day" onclick="ftc.module.me2day.connect(); return false;" class="ftc_osu_btn_list ftc_osu_me2day"><span>Me2day</span></a></li>' +
	'</ul>';

	this.PARTNER_PRESSIAN_IMAGE = 
	'<ul class="ft_osu_buttons">'+
		'<li><a href="#PRESSIAN_SIGNIN" title="프레시안 아이디로 로그인" onclick="ftc.partner.pressian_image.login(); return false;" class="ftc_osu_btn_list ftc_osu_pressian"><span>프레시안 아이디 로그인</span></a></li>' +
		'<li><a href="#TWITTER_SIGNIN" title="Sign in with Twitter" onclick="ftc.module.twitter.connect(); return false;" class="ftc_osu_btn_list ftc_osu_twitter"><span>twitter</span></a></li>' +
		'<li><a href="#FACEBOOK_SIGNIN" title="Sign in with Facebook" onclick="ftc.module.facebook.connect(); return false;" class="ftc_osu_btn_list ftc_osu_facebook"><span>Facebook</span></a></li>' +
		'<li><a href="#ME2DAY_SIGNIN" title="Sign in with Me2day" onclick="ftc.module.me2day.connect(); return false;" class="ftc_osu_btn_list ftc_osu_me2day"><span>Me2day</span></a></li>' +
	'</ul>';

	this.PARTNER_MEDIATODAY = 
	'<ul class="ft_osu_buttons">'+
		'<li><a href="#MEDIATODAY_SIGNIN" title="미디어오늘 아이디로 로그인" onclick="ftc.partner.mediatoday.login(); return false;" class="ftc_osu_btn_list ftc_osu_mediatoday"><span>미디어오늘 아이디 로그인</span></a></li>' +
		'<li><a href="#ME2DAY_SIGNIN" title="Sign in with Me2day" onclick="ftc.module.me2day.connect(); return false;" class="ftc_osu_btn_list ftc_osu_me2day"><span>Me2day</span></a></li>' +
		'<li><a href="#TWITTER_SIGNIN" title="Sign in with Twitter" onclick="ftc.module.twitter.connect(); return false;" class="ftc_osu_btn_list ftc_osu_twitter"><span>twitter</span></a></li>' +
		'<li><a href="#FACEBOOK_SIGNIN" title="Sign in with Facebook" onclick="ftc.module.facebook.connect(); return false;" class="ftc_osu_btn_list ftc_osu_facebook"><span>Facebook</span></a></li>' +
		'<li><a href="#GOOGLE_SIGNIN" title="Sign in with Google" onclick="ftc.module.google.connect(); return false;" class="ftc_osu_btn_list ftc_osu_google"><span>Google</span></a></li>' +
	'</ul>';

	this.PARTNER_MARIECLAIRE = 
	'<ul class="ft_osu_buttons">'+
		'<li><a href="#MARIECLAIRE_SIGNIN" title="마리끌레르 아이디로 로그인" onclick="ftc.partner.marieclaire.login(); return false;" class="ftc_osu_btn_list ftc_osu_marieclaire"><span>마리끌레르 아이디 로그인</span></a></li>' +
		'<li><a href="#TWITTER_SIGNIN" title="Sign in with Twitter" onclick="ftc.module.twitter.connect(); return false;" class="ftc_osu_btn_list ftc_osu_twitter"><span>twitter</span></a></li>' +
		'<li><a href="#FACEBOOK_SIGNIN" title="Sign in with Facebook" onclick="ftc.module.facebook.connect(); return false;" class="ftc_osu_btn_list ftc_osu_facebook"><span>Facebook</span></a></li>' +
		'<li><a href="#ME2DAY_SIGNIN" title="Sign in with Me2day" onclick="ftc.module.me2day.connect(); return false;" class="ftc_osu_btn_list ftc_osu_me2day"><span>Me2day</span></a></li>' +
	'</ul>';

	this.PARTNER_HANKOOKI = 
	'<ul class="ft_osu_buttons">'+
		'<li><a href="#HANKOOKI_SIGNIN" title="한국아이닷컴 아이디로 로그인" onclick="ftc.partner.hankooki.login(); return false;" class="ftc_osu_btn_list ftc_osu_hankooki"><span>한국아이닷컴 아이디 로그인</span></a></li>' +
		'<li><a href="#ME2DAY_SIGNIN" title="Sign in with Me2day" onclick="ftc.module.me2day.connect(); return false;" class="ftc_osu_btn_list ftc_osu_me2day"><span>Me2day</span></a></li>' +
		'<li><a href="#TWITTER_SIGNIN" title="Sign in with Twitter" onclick="ftc.module.twitter.connect(); return false;" class="ftc_osu_btn_list ftc_osu_twitter"><span>twitter</span></a></li>' +
		'<li><a href="#FACEBOOK_SIGNIN" title="Sign in with Facebook" onclick="ftc.module.facebook.connect(); return false;" class="ftc_osu_btn_list ftc_osu_facebook"><span>Facebook</span></a></li>' +
	'</ul>';

	this.PARTNER_HANKOOKI_SPORTS = 
	'<ul class="ft_osu_buttons">'+
		'<li><a href="#HANKOOKI_SIGNIN" title="한국아이닷컴 아이디로 로그인" onclick="ftc.partner.hankooki_sports.login(); return false;" class="ftc_osu_btn_list ftc_osu_hankooki"><span>한국아이닷컴 아이디 로그인</span></a></li>' +
		'<li><a href="#ME2DAY_SIGNIN" title="Sign in with Me2day" onclick="ftc.module.me2day.connect(); return false;" class="ftc_osu_btn_list ftc_osu_me2day"><span>Me2day</span></a></li>' +
		'<li><a href="#TWITTER_SIGNIN" title="Sign in with Twitter" onclick="ftc.module.twitter.connect(); return false;" class="ftc_osu_btn_list ftc_osu_twitter"><span>twitter</span></a></li>' +
		'<li><a href="#FACEBOOK_SIGNIN" title="Sign in with Facebook" onclick="ftc.module.facebook.connect(); return false;" class="ftc_osu_btn_list ftc_osu_facebook"><span>Facebook</span></a></li>' +
	'</ul>';

	this.PARTNER_HANKOOKI_ECONOMY = 
	'<ul class="ft_osu_buttons">'+
		'<li><a href="#HANKOOKI_SIGNIN" title="한국아이닷컴 아이디로 로그인" onclick="ftc.partner.hankooki_economy.login(); return false;" class="ftc_osu_btn_list ftc_osu_hankooki"><span>한국아이닷컴 아이디 로그인</span></a></li>' +
		'<li><a href="#ME2DAY_SIGNIN" title="Sign in with Me2day" onclick="ftc.module.me2day.connect(); return false;" class="ftc_osu_btn_list ftc_osu_me2day"><span>Me2day</span></a></li>' +
		'<li><a href="#TWITTER_SIGNIN" title="Sign in with Twitter" onclick="ftc.module.twitter.connect(); return false;" class="ftc_osu_btn_list ftc_osu_twitter"><span>twitter</span></a></li>' +
		'<li><a href="#FACEBOOK_SIGNIN" title="Sign in with Facebook" onclick="ftc.module.facebook.connect(); return false;" class="ftc_osu_btn_list ftc_osu_facebook"><span>Facebook</span></a></li>' +
	'</ul>';

	this.PARTNER_KHAN = 
	'<ul class="ft_osu_buttons">'+
		'<li><a href="#KHAN_SIGNIN" title="경향닷컴 아이디로 로그인" onclick="ftc.partner.khan.login(1); return false;" class="ftc_osu_btn_list ftc_osu_khan"><span>경향닷컴 아이디 로그인</span></a></li>' +
		'<li><a href="#ME2DAY_SIGNIN" title="Sign in with Me2day" onclick="ftc.module.me2day.connect(); return false;" class="ftc_osu_btn_list ftc_osu_me2day"><span>Me2day</span></a></li>' +
		'<li><a href="#TOpenID" title="Sign in with TOpenID" onclick="ftc.topenid.showLoginPopup(); return false;" class="ftc_osu_btn_list ftc_osu_topenid login"><span>topenid</span></a></li>' +
		'<li><a href="#TWITTER_SIGNIN" title="Sign in with Twitter" onclick="ftc.module.twitter.connect(); return false;" class="ftc_osu_btn_list ftc_osu_twitter"><span>twitter</span></a></li>' +
		'<li><a href="#FACEBOOK_SIGNIN" title="Sign in with Facebook" onclick="ftc.module.facebook.connect(); return false;" class="ftc_osu_btn_list ftc_osu_facebook"><span>Facebook</span></a></li>' +
	'</ul>';

	this.PARTNER_KHAN_SPORTS = 
	'<ul class="ft_osu_buttons">'+
		'<li><a href="#KHAN_SIGNIN" title="스포츠칸 아이디로 로그인" onclick="ftc.partner.khan.login(2); return false;" class="ftc_osu_btn_list ftc_osu_khan_sports"><span>스포츠칸 아이디 로그인</span></a></li>' +
		'<li><a href="#ME2DAY_SIGNIN" title="Sign in with Me2day" onclick="ftc.module.me2day.connect(); return false;" class="ftc_osu_btn_list ftc_osu_me2day"><span>Me2day</span></a></li>' +
		'<li><a href="#TOpenID" title="Sign in with TOpenID" onclick="ftc.topenid.showLoginPopup(); return false;" class="ftc_osu_btn_list ftc_osu_topenid login"><span>topenid</span></a></li>' +
		'<li><a href="#TWITTER_SIGNIN" title="Sign in with Twitter" onclick="ftc.module.twitter.connect(); return false;" class="ftc_osu_btn_list ftc_osu_twitter"><span>twitter</span></a></li>' +
		'<li><a href="#FACEBOOK_SIGNIN" title="Sign in with Facebook" onclick="ftc.module.facebook.connect(); return false;" class="ftc_osu_btn_list ftc_osu_facebook"><span>Facebook</span></a></li>' +
	'</ul>';

	this.PARTNER_DAILIAN = 
	'<ul class="ft_osu_buttons">'+
		'<li><a href="#DAILIAN_SIGNIN" title="데일리안 아이디로 로그인" onclick="ftc.partner.dailian.login(); return false;" class="ftc_osu_btn_list ftc_osu_dailian"><span>데일리안 아이디 로그인</span></a></li>' +
		'<li><a href="#ME2DAY_SIGNIN" title="Sign in with Me2day" onclick="ftc.module.me2day.connect(); return false;" class="ftc_osu_btn_list ftc_osu_me2day"><span>Me2day</span></a></li>' +
		'<li><a href="#TWITTER_SIGNIN" title="Sign in with Twitter" onclick="ftc.module.twitter.connect(); return false;" class="ftc_osu_btn_list ftc_osu_twitter"><span>twitter</span></a></li>' +
		'<li><a href="#FACEBOOK_SIGNIN" title="Sign in with Facebook" onclick="ftc.module.facebook.connect(); return false;" class="ftc_osu_btn_list ftc_osu_facebook"><span>Facebook</span></a></li>' +
	'</ul>';

	this.PARTNER_DAEJON = 
	'<ul class="ft_osu_buttons">'+
		'<li><a href="#DAEJON_SIGNIN" title="대전일보 아이디로 로그인" onclick="ftc.partner.daejon.login(); return false;" class="ftc_osu_btn_list ftc_osu_daejon"><span>대전일보 아이디 로그인</span></a></li>' +
		'<li><a href="#ME2DAY_SIGNIN" title="Sign in with Me2day" onclick="ftc.module.me2day.connect(); return false;" class="ftc_osu_btn_list ftc_osu_me2day"><span>Me2day</span></a></li>' +
		'<li><a href="#TWITTER_SIGNIN" title="Sign in with Twitter" onclick="ftc.module.twitter.connect(); return false;" class="ftc_osu_btn_list ftc_osu_twitter"><span>twitter</span></a></li>' +
		'<li><a href="#FACEBOOK_SIGNIN" title="Sign in with Facebook" onclick="ftc.module.facebook.connect(); return false;" class="ftc_osu_btn_list ftc_osu_facebook"><span>Facebook</span></a></li>' +
	'</ul>';

	this.PARTNER_MKHEALTH = 
	'<ul class="ft_osu_buttons">'+
		'<li><a href="#MKHEALTH_SIGNIN" title="매경헬스 아이디로 로그인" onclick="ftc.partner.mkhealth.login(); return false;" class="ftc_osu_btn_list ftc_osu_mkhealth"><span>매경헬스 아이디 로그인</span></a></li>' +
		'<li><a href="#ME2DAY_SIGNIN" title="Sign in with Me2day" onclick="ftc.module.me2day.connect(); return false;" class="ftc_osu_btn_list ftc_osu_me2day"><span>Me2day</span></a></li>' +
		'<li><a href="#TOpenID" title="Sign in with TOpenID" onclick="ftc.topenid.showLoginPopup(); return false;" class="ftc_osu_btn_list ftc_osu_topenid login"><span>topenid</span></a></li>' +
		'<li><a href="#TWITTER_SIGNIN" title="Sign in with Twitter" onclick="ftc.module.twitter.connect(); return false;" class="ftc_osu_btn_list ftc_osu_twitter"><span>twitter</span></a></li>' +
		'<li><a href="#FACEBOOK_SIGNIN" title="Sign in with Facebook" onclick="ftc.module.facebook.connect(); return false;" class="ftc_osu_btn_list ftc_osu_facebook"><span>Facebook</span></a></li>' +
	'</ul>';

	this.PARTNER_INEWS24 = 
	'<ul class="ft_osu_buttons">'+
		'<li><a href="#INEWS24_SIGNIN" title="아이뉴스24 아이디로 로그인" onclick="ftc.partner.inews24.login(); return false;" class="ftc_osu_btn_list ftc_osu_inews24"><span>아이뉴스24 아이디 로그인</span></a></li>' +
		'<li><a href="#ME2DAY_SIGNIN" title="Sign in with Me2day" onclick="ftc.module.me2day.connect(); return false;" class="ftc_osu_btn_list ftc_osu_me2day"><span>Me2day</span></a></li>' +
		'<li><a href="#GOOGLE_SIGNIN" title="Sign in with Google" onclick="ftc.module.google.connect(); return false;" class="ftc_osu_btn_list ftc_osu_google"><span>Google</span></a></li>' +
		'<li><a href="#TOpenID" title="Sign in with TOpenID" onclick="ftc.topenid.showLoginPopup(); return false;" class="ftc_osu_btn_list ftc_osu_topenid login"><span>topenid</span></a></li>' +
		'<li><a href="#TWITTER_SIGNIN" title="Sign in with Twitter" onclick="ftc.module.twitter.connect(); return false;" class="ftc_osu_btn_list ftc_osu_twitter"><span>twitter</span></a></li>' +
		'<li><a href="#FACEBOOK_SIGNIN" title="Sign in with Facebook" onclick="ftc.module.facebook.connect(); return false;" class="ftc_osu_btn_list ftc_osu_facebook"><span>Facebook</span></a></li>' +
	'</ul>';

	this.PARTNER_ETO = '<ul class="ft_osu_buttons">'+
		'<li class="ft_osu_buttons_title small">소셜로그인</li>' +
		'<li><a href="#TWITTER_SIGNIN" title="Sign in with Twitter" onclick="ftc.module.twitter.connect(); return false;" class="ftc_osu_btn_list ftc_osu_twitter small"><span>twitter</span></a></li>' +
		'<li><a href="#FACEBOOK_SIGNIN" title="Sign in with Facebook" onclick="ftc.module.facebook.connect(); return false;" class="ftc_osu_btn_list ftc_osu_facebook small"><span>Facebook</span></a></li>' +
		'<li><a href="#GOOGLE_SIGNIN" title="Sign in with Google" onclick="ftc.module.google.connect(); return false;" class="ftc_osu_btn_list ftc_osu_google small"><span>Google</span></a></li>' +
		'<li><a href="#ME2DAY_SIGNIN" title="Sign in with Me2day" onclick="ftc.module.me2day.connect(); return false;" class="ftc_osu_btn_list ftc_osu_me2day small"><span>Me2day</span></a></li>' +
		'<li class="last"><a href="#YAHOO_SIGNIN" title="Sign in with Yahoo" onclick="ftc.module.yahoo.connect(); return false;" class="ftc_osu_btn_list ftc_osu_yahoo small"><span>Yahoo</span></a></li>' + 
	'</ul>';

	this.PARTNER_SPORTALKOREA =this.SOCIAL_LOGIN_BUTTONS;

	// PARTNER_AK
	this.PARTNER_AK = 
		'<ul class="ft_osu_buttons">'+
		'<li><a href="#AK_SIGNIN" title="애경그룹 아이디로 로그인" onclick="ftc.partner.ak.login(); return false;" class="ftc_osu_btn_list ftc_osu_ak"><span>애경그룹 아이디 로그인</span></a></li>' +
		'<li><a href="#ME2DAY_SIGNIN" title="Sign in with Me2day" onclick="ftc.module.me2day.connect(); return false;" class="ftc_osu_btn_list ftc_osu_me2day"><span>Me2day</span></a></li>' +
		'<li><a href="#GOOGLE_SIGNIN" title="Sign in with Google" onclick="ftc.module.google.connect(); return false;" class="ftc_osu_btn_list ftc_osu_google"><span>Google</span></a></li>' +
		'<li><a href="#TOpenID" title="Sign in with TOpenID" onclick="ftc.topenid.showLoginPopup(); return false;" class="ftc_osu_btn_list ftc_osu_topenid login"><span>topenid</span></a></li>' +
		'<li><a href="#TWITTER_SIGNIN" title="Sign in with Twitter" onclick="ftc.module.twitter.connect(); return false;" class="ftc_osu_btn_list ftc_osu_twitter"><span>twitter</span></a></li>' +
		'<li><a href="#FACEBOOK_SIGNIN" title="Sign in with Facebook" onclick="ftc.module.facebook.connect(); return false;" class="ftc_osu_btn_list ftc_osu_facebook"><span>Facebook</span></a></li>' +
	'</ul>';

	// PARTNER_KYOENGIN
	this.PARTNER_KYEONGIN = 
		'<ul class="ft_osu_buttons">'+
		'<li><a href="#KYEONGIN_SIGNIN" title="경인일보 아이디로 로그인" onclick="ftc.partner.kyeongin.login(); return false;" class="ftc_osu_btn_list ftc_osu_kyeongin"><span>경인일보 아이디 로그인</span></a></li>' +
		'<li><a href="#ME2DAY_SIGNIN" title="Sign in with Me2day" onclick="ftc.module.me2day.connect(); return false;" class="ftc_osu_btn_list ftc_osu_me2day"><span>Me2day</span></a></li>' +
		'<li><a href="#GOOGLE_SIGNIN" title="Sign in with Google" onclick="ftc.module.google.connect(); return false;" class="ftc_osu_btn_list ftc_osu_google"><span>Google</span></a></li>' +
		'<li><a href="#TOpenID" title="Sign in with TOpenID" onclick="ftc.topenid.showLoginPopup(); return false;" class="ftc_osu_btn_list ftc_osu_topenid login"><span>topenid</span></a></li>' +
		'<li><a href="#TWITTER_SIGNIN" title="Sign in with Twitter" onclick="ftc.module.twitter.connect(); return false;" class="ftc_osu_btn_list ftc_osu_twitter"><span>twitter</span></a></li>' +
		'<li><a href="#FACEBOOK_SIGNIN" title="Sign in with Facebook" onclick="ftc.module.facebook.connect(); return false;" class="ftc_osu_btn_list ftc_osu_facebook"><span>Facebook</span></a></li>' +
	'</ul>';

	// PARTNER_HGTIME
	this.PARTNER_HGTIME = 
		'<ul class="ft_osu_buttons">'+
		'<li><a href="#KYEONGIN_SIGNIN" title="한강타임즈 아이디로 로그인" onclick="ftc.partner.hgtime.login(); return false;" class="ftc_osu_btn_list ftc_osu_hgtime"><span>한강타임즈 아이디 로그인</span></a></li>' +
		'<li><a href="#ME2DAY_SIGNIN" title="Sign in with Me2day" onclick="ftc.module.me2day.connect(); return false;" class="ftc_osu_btn_list ftc_osu_me2day"><span>Me2day</span></a></li>' +
		'<li><a href="#GOOGLE_SIGNIN" title="Sign in with Google" onclick="ftc.module.google.connect(); return false;" class="ftc_osu_btn_list ftc_osu_google"><span>Google</span></a></li>' +
		'<li><a href="#TOpenID" title="Sign in with TOpenID" onclick="ftc.topenid.showLoginPopup(); return false;" class="ftc_osu_btn_list ftc_osu_topenid login"><span>topenid</span></a></li>' +
		'<li><a href="#TWITTER_SIGNIN" title="Sign in with Twitter" onclick="ftc.module.twitter.connect(); return false;" class="ftc_osu_btn_list ftc_osu_twitter"><span>twitter</span></a></li>' +
		'<li><a href="#FACEBOOK_SIGNIN" title="Sign in with Facebook" onclick="ftc.module.facebook.connect(); return false;" class="ftc_osu_btn_list ftc_osu_facebook"><span>Facebook</span></a></li>' +
	'</ul>';

	// PARTNER_TVREPORT
	this.PARTNER_TVREPORT = 
		'<ul class="ft_osu_buttons">'+
		'<li><a href="#TVREPORT_SIGNIN" title="TVREPORT 아이디로 로그인" onclick="ftc.partner.tvreport.login(); return false;" class="ftc_osu_btn_list ftc_osu_tvreport"><span>TVREPORT 아이디 로그인</span></a></li>' +
		'<li><a href="#ME2DAY_SIGNIN" title="Sign in with Me2day" onclick="ftc.module.me2day.connect(); return false;" class="ftc_osu_btn_list ftc_osu_me2day"><span>Me2day</span></a></li>' +
		'<li><a href="#GOOGLE_SIGNIN" title="Sign in with Google" onclick="ftc.module.google.connect(); return false;" class="ftc_osu_btn_list ftc_osu_google"><span>Google</span></a></li>' +
		'<li><a href="#TWITTER_SIGNIN" title="Sign in with Twitter" onclick="ftc.module.twitter.connect(); return false;" class="ftc_osu_btn_list ftc_osu_twitter"><span>twitter</span></a></li>' +
		'<li><a href="#FACEBOOK_SIGNIN" title="Sign in with Facebook" onclick="ftc.module.facebook.connect(); return false;" class="ftc_osu_btn_list ftc_osu_facebook"><span>Facebook</span></a></li>' +
	'</ul>';

	// PARTNER_SEOULNTN
	this.PARTNER_SEOULNTN = 
		'<ul class="ft_osu_buttons">'+
		'<li><a href="#SEOULNTN_SIGNIN" title="서울엔티엔 아이디로 로그인" onclick="ftc.partner.seoulntn.login(); return false;" class="ftc_osu_btn_list ftc_osu_seoulntn"><span>서울엔티엔 아이디 로그인</span></a></li>' +
		'<li><a href="#ME2DAY_SIGNIN" title="Sign in with Me2day" onclick="ftc.module.me2day.connect(); return false;" class="ftc_osu_btn_list ftc_osu_me2day"><span>Me2day</span></a></li>' +
		'<li><a href="#GOOGLE_SIGNIN" title="Sign in with Google" onclick="ftc.module.google.connect(); return false;" class="ftc_osu_btn_list ftc_osu_google"><span>Google</span></a></li>' +
		'<li><a href="#TWITTER_SIGNIN" title="Sign in with Twitter" onclick="ftc.module.twitter.connect(); return false;" class="ftc_osu_btn_list ftc_osu_twitter"><span>twitter</span></a></li>' +
		'<li><a href="#FACEBOOK_SIGNIN" title="Sign in with Facebook" onclick="ftc.module.facebook.connect(); return false;" class="ftc_osu_btn_list ftc_osu_facebook"><span>Facebook</span></a></li>' +
	'</ul>';
	
	
	// PARTNER_bornstar -- METDAY, TWITTER, FACEBOOK 
	this.PARTNER_BORNSTAR = 
		'<ul class="ft_osu_buttons">'+
		'<li><a href="#ME2DAY_SIGNIN" title="Sign in with Me2day" onclick="ftc.module.me2day.connect(); return false;" class="ftc_osu_btn_list ftc_osu_me2day"><span>Me2day</span></a></li>' +
		'<li><a href="#TWITTER_SIGNIN" title="Sign in with Twitter" onclick="ftc.module.twitter.connect(); return false;" class="ftc_osu_btn_list ftc_osu_twitter"><span>twitter</span></a></li>' +
		'<li><a href="#FACEBOOK_SIGNIN" title="Sign in with Facebook" onclick="ftc.module.facebook.connect(); return false;" class="ftc_osu_btn_list ftc_osu_facebook"><span>Facebook</span></a></li>' +
	'</ul>';

	// PARTNER_PLAIN
	this.PARTNER_PLAIN = this.SOCIAL_LOGIN_BUTTONS;
	
	// PARTNER_ISTYLE24
	this.PARTNER_ISTYLE24 = this.SOCIAL_LOGIN_BUTTONS;
	
	// PARTNER_KOOKJE
	this.PARTNER_KOOKJE = this.SOCIAL_LOGIN_BUTTONS;
	
	// PARTNER_KBS 한국방송 로그인 부분
	this.PARTNER_KBS_NEW = 
		'<ul class="ft_osu_buttons">'+
		'<li><a href="#KYEONGIN_SIGNIN" title="KBS 아이디로 로그인" onclick="ftc.partner.kbs_new.login(); return false;" class="ftc_osu_btn_list ftc_osu_kbs"><span>KBS 아이디 로그인</span></a></li>' +
        '<li><a href="#TWITTER_SIGNIN" title="Sign in with Twitter" onclick="ftc.module.twitter.connect(); return false;" class="ftc_osu_btn_list ftc_osu_twitter"><span>twitter</span></a></li>' +
        '<li><a href="#FACEBOOK_SIGNIN" title="Sign in with Facebook" onclick="ftc.module.facebook.connect(); return false;" class="ftc_osu_btn_list ftc_osu_facebook"><span>Facebook</span></a></li>' +
		'<li><a href="#ME2DAY_SIGNIN" title="Sign in with Me2day" onclick="ftc.module.me2day.connect(); return false;" class="ftc_osu_btn_list ftc_osu_me2day"><span>Me2day</span></a></li>' +
		'<li><a href="#GOOGLE_SIGNIN" title="Sign in with Google" onclick="ftc.module.google.connect(); return false;" class="ftc_osu_btn_list ftc_osu_google"><span>Google</span></a></li>' +
		'<li><a href="#TOpenID" title="Sign in with TOpenID" onclick="ftc.topenid.showLoginPopup(); return false;" class="ftc_osu_btn_list ftc_osu_topenid login"><span>topenid</span></a></li>' +
		'<li>&nbsp;&nbsp;<img src="http://plugindev.tcomment.com/images/skin/kbs_new/ico_loselinfo.gif" border="0" /></li>' +
	'</ul>';
	
	// PARTNER_WYLIE
	/*this.PARTNER_WYLIE = '<ul class="ft_osu_buttons">'+
		'<li><a href="#ME2DAY_SIGNIN" title="Sign in with Me2day" onclick="ftc.module.me2day.connect(); return false;" class="ftc_osu_btn_list ftc_osu_me2day"><span>Me2day</span></a></li>' +
		'<li><a href="#TWITTER_SIGNIN" title="Sign in with Twitter" onclick="ftc.module.twitter.connect(); return false;" class="ftc_osu_btn_list ftc_osu_twitter"><span>twitter</span></a></li>' +
		'<li><a href="#FACEBOOK_SIGNIN" title="Sign in with Facebook" onclick="ftc.module.facebook.connect(); return false;" class="ftc_osu_btn_list ftc_osu_facebook"><span>Facebook</span></a></li>' +
	'</ul>';*/
	
	// PARTNER_FNNEWS
	this.PARTNER_FNNEWS = 
	'<ul class="ft_osu_buttons">'+
		'<li class="ft_osu_buttons_title">소셜로그인</li>' +
		'<li><a href="#ETNEWS_SIGNIN" title="파이낸셜 아이디로 로그인" onclick="ftc.partner.etnews.showLoginPopup(); return false;" class="ftc_osu_btn_list ftc_osu_fnnews"><span>파이낸셜 로그인</span></a></li>' +
		'<li><a href="#TWITTER_SIGNIN" title="Sign in with Twitter" onclick="ftc.module.twitter.connect(); return false;" class="ftc_osu_btn_list ftc_osu_twitter"><span>twitter</span></a></li>' +
		'<li><a href="#FACEBOOK_SIGNIN" title="Sign in with Facebook" onclick="ftc.module.facebook.connect(); return false;" class="ftc_osu_btn_list ftc_osu_facebook"><span>Facebook</span></a></li>' +
		'<li><a href="#ME2DAY_SIGNIN" title="Sign in with Me2day" onclick="ftc.module.me2day.connect(); return false;" class="ftc_osu_btn_list ftc_osu_me2day"><span>Me2day</span></a></li>' +
		'<li><a href="#GOOGLE_SIGNIN" title="Sign in with Google" onclick="ftc.module.google.connect(); return false;" class="ftc_osu_btn_list ftc_osu_google"><span>Google</span></a></li>' +
		'<li><a href="#YAHOO_SIGNIN" title="Sign in with Yahoo" onclick="ftc.module.yahoo.connect(); return false;" class="ftc_osu_btn_list ftc_osu_yahoo"><span>Yahoo</span></a></li>' +
	'</ul>';
	
	if(ft_site_key == '47cc478eb1493e57334b51e63aac7f0299a5ec1b'){	
		this.COMMENTBOX = '<div class="ft_cmtbox">'+
			'<form class="ft_cmtbox_form" name="ft_cmtbox_form_#{no}" method="post" action="#{post_url}" onsubmit="ftc.comment.post(\'ft_cmtbox_form_#{no}\', false); return false;">'+
				'<table><tr><td class="nw"></td><td class="n"></td><td class="ne"></td></tr><tr><td class="w"></td><td class="c">' +
					'<div class="ft_cmtbox_topinfo">#{top_info}</div>' +
					'<input type="hidden" name="user_no" value="#{user_no}"/>' +
					'<input type="hidden" name="parent_no" value="#{parent_no}" />' +
					'<input type="hidden" name="imgsrc" value="" />' +
					'<input type="hidden" name="imgtype" value="" />' +
					'<input type="hidden" name="videosrc" value="" />' +
					'<input type="hidden" name="videotype" value="" />' +
					'<div class="ft_cmtbox_user">'+
					'<label for="ft_cmtbox_nick_#{no}">닉네임</label> <input type="text" name="user_nick" id="ft_cmt_nick_#{no}" value="#{user_nick}" class="ft_cmt_field" />' +
					'<label for="ft_cmtbox_email_#{no}">이메일 주소</label> <input type="text" name="user_email" id="ft_cmt_email_#{no}" value="#{user_email}" class="ft_cmt_field" />' +
					'</div>'+
					'<div class="ft_cmtbox_body_wrapper"><div class="ft_cmtbox_body"><div class="ft_cmtbox_textarea_wrapper"><textarea name="body" class="ft_cmtbox_field" ></textarea></div></div>' +
					'<button type="buton" class="ft_cmtbox_update" onclick="ftc.comment.post(\'ft_cmtbox_form_#{no}\', false); return false;"></button></div>' +
					'<div class="ft_cmtbox_bottom">' +
						'<div class="f_left">' + 
							'<span class="ftc_notify_email"><input type="checkbox" name="notify_email" onclick="ftc.module.email_notify.toggleCmt(this);" /> <img src="' + ftc.urls.IMG_ROOT + '/btn_email.gif"  /> 이메일로 리플 구독 </span>' + 
							'<span class="ftc_notify_twitter" style="display: none;"><input type="checkbox" name="notify_twitter" onclick="ftc.partner.twitter.toggleCmt(this);" /> <img src="' + ftc.urls.IMG_ROOT + '/btn_twitter.gif" /> 트위터로 보내기 </span>' +
							'<span class="ftc_notify_me2day" style="display: none;"><input type="checkbox" name="notify_me2day" /> 미투데이로 보내기 </span>' + 
							'<span class="ftc_notify_facebook" style="display: none;"><input type="checkbox" name="notify_facebook" id="notify_facebook" /> 페이스북으로 보내기 </span>' + 
						'</div>' +
						'<div class="f_right"><a href="#" onclick="ftc.popup.video.show(0); return false;" class="ft_module_video_btn">동영상 첨부</a> <a href="#" class="ft_module_image_btn" onclick="ftc.popup.image.show(0); return false">이미지 첨부</a></div>' +
					'</div>' +
				'</td><td class="e"></td></tr><tr><td class="sw"></td><td class="s"></td><td class="se"></td></tr></table>' + 
		'</form></div>';
	}else if(ft_site_key == 'c33f6bfe92287fca9c75aac4973ce0d652766fcf'){
		this.COMMENTBOX = '<div class="ft_cmtbox">'+
		'<form class="ft_cmtbox_form" name="ft_cmtbox_form_#{no}" method="post" action="#{post_url}" onsubmit="ftc.comment.post(\'ft_cmtbox_form_#{no}\', false); return false;">'+
			'<table><tr><td class="nw"></td><td class="n"></td><td class="ne"></td></tr><tr><td class="w"></td><td class="c">' +
				'<div class="ft_cmtbox_topinfo">#{top_info}</div>' +
				'<input type="hidden" name="user_no" value="#{user_no}"/>' +
				'<input type="hidden" name="parent_no" value="#{parent_no}" />' +
				'<input type="hidden" name="imgsrc" value="" />' +
				'<input type="hidden" name="imgtype" value="" />' +
				'<input type="hidden" name="videosrc" value="" />' +
				'<input type="hidden" name="videotype" value="" />' +
				'<div class="ft_cmtbox_user">'+
				'<label for="ft_cmtbox_nick_#{no}">닉네임</label> <input type="text" name="user_nick" id="ft_cmt_nick_#{no}" value="#{user_nick}" class="ft_cmt_field" />' +
				'<label for="ft_cmtbox_email_#{no}">이메일 주소</label> <input type="text" name="user_email" id="ft_cmt_email_#{no}" value="#{user_email}" class="ft_cmt_field" />' +
				'</div>'+
				'<div class="ft_cmtbox_body_wrapper"><div class="ft_cmtbox_body"><div class="ft_cmtbox_textarea_wrapper"><textarea name="body" class="ft_cmtbox_field" ></textarea></div></div>' +
				'<button type="buton" class="ft_cmtbox_update" onclick="ftc.comment.post(\'ft_cmtbox_form_#{no}\', false); return false;"></button></div>' +
				'<div class="ft_cmtbox_bottom">' +
					'<div class="f_left">' + 
						'<span class="ftc_notify_email"><input type="checkbox" name="notify_email" onclick="ftc.module.email_notify.toggleCmt(this);" /> <img src="' + ftc.urls.IMG_ROOT + '/btn_email.gif"  /> 이메일로 리플 구독 </span>' + 
						'<!--span class="ftc_notify_twitter" style="display: none;"><input type="checkbox" name="notify_twitter" onclick="ftc.partner.twitter.toggleCmt(this);" /> <img src="' + ftc.urls.IMG_ROOT + '/btn_twitter.gif" /> 트위터로 보내기 </span>' +
						'<span class="ftc_notify_me2day" style="display: none;"><input type="checkbox" name="notify_me2day" /> 미투데이로 보내기 </span>' + 
						'<span class="ftc_notify_facebook" style="display: none;"><input type="checkbox" name="notify_facebook" /> 페이스북으로 보내기 </span-->' +
						'<input type="hidden" name="notify_twitter" value="on">' +
						'<input type="hidden" name="notify_me2day" value="on">' +
						'<input type="hidden" name="notify_facebook" value="on">' +
					'</div>' +
					'<div class="f_right"><a href="#" onclick="ftc.popup.video.show(0); return false;" class="ft_module_video_btn">동영상 첨부</a> <a href="#" class="ft_module_image_btn" onclick="ftc.popup.image.show(0); return false">이미지 첨부</a></div>' +
				'</div>' +
			'</td><td class="e"></td></tr><tr><td class="sw"></td><td class="s"></td><td class="se"></td></tr></table>' + 
		'</form></div>';
	}else{
		this.COMMENTBOX = "";
		this.COMMENTBOX += '<div class="ft_cmtbox">'+
		'<form class="ft_cmtbox_form" name="ft_cmtbox_form_#{no}" method="post" action="#{post_url}" onsubmit="ftc.comment.post(\'ft_cmtbox_form_#{no}\', false); return false;">'+
			'<table><tr><td class="nw"></td><td class="n"></td><td class="ne"></td></tr><tr><td class="w"></td><td class="c">';

		this.COMMENTBOX += '<div class="ft_cmtbox_topinfo">#{top_info}</div>' +
				'<input type="hidden" name="user_no" value="#{user_no}"/>' +
				'<input type="hidden" name="parent_no" value="#{parent_no}" />' +
				'<input type="hidden" name="imgsrc" value="" />' +
				'<input type="hidden" name="imgtype" value="" />' +
				'<input type="hidden" name="videosrc" value="" />' +
				'<input type="hidden" name="videotype" value="" />' ;

        if(ft_site_key == '73cc98ea400d58289d32dfde7050c8c382adeab8' || ft_site_key == '19a83daed111969f376762beff9fac6af0c965d7' || ft_site_key == 'e815465c30b6949c5c02a0592b2ea56b0f9f8c74'){  // 넥스브레인 KT 이벤트 
            this.COMMENTBOX += '<div style="width:100%;padding-top:30px;" align="right"><strong style="color:red;text-align:right;font-weight:bold;">* 개인 정보를 위해 본 페이지의 로그아웃과 해당 SNS의 페이지에서 logout(sign out)을 해주시길 바랍니다.</strong></div>';
        }

		this.COMMENTBOX += '<div class="ft_cmtbox_user">'+
				'<label for="ft_cmtbox_nick_#{no}">닉네임</label> <input type="text" name="user_nick" id="ft_cmt_nick_#{no}" value="#{user_nick}" class="ft_cmt_field" />' +
				'<label for="ft_cmtbox_email_#{no}">이메일 주소</label> <input type="text" name="user_email" id="ft_cmt_email_#{no}" value="#{user_email}" class="ft_cmt_field" />' +
				'</div>'+
				'<div class="ft_cmtbox_body_wrapper"><div class="ft_cmtbox_body"><div class="ft_cmtbox_textarea_wrapper"><textarea name="body" class="ft_cmtbox_field" ></textarea></div></div>' +
				'<button type="buton" class="ft_cmtbox_update" onclick="ftc.comment.post(\'ft_cmtbox_form_#{no}\', false); return false;"></button></div>' +
				'<div class="ft_cmtbox_bottom">' +
					'<div class="f_left">' + 
						'<span class="ftc_notify_email"><input type="checkbox" name="notify_email" onclick="ftc.module.email_notify.toggleCmt(this);" /> <img src="' + ftc.urls.IMG_ROOT + '/btn_email.gif"  /> 이메일로 리플 구독 </span>' + 
						'<span class="ftc_notify_twitter" style="display: none;"><input type="checkbox" name="notify_twitter" onclick="ftc.partner.twitter.toggleCmt(this);" /> <img src="' + ftc.urls.IMG_ROOT + '/btn_twitter.gif" /> 트위터로 보내기 </span>' +
						'<span class="ftc_notify_me2day" style="display: none;"><input type="checkbox" name="notify_me2day" /> 미투데이로 보내기 </span>' + 
						'<span class="ftc_notify_facebook" style="display: none;"><input type="checkbox" name="notify_facebook" /> 페이스북으로 보내기 </span>' + 
					'</div>' +
					'<div class="f_right"><a href="#" onclick="ftc.popup.video.show(0); return false;" class="ft_module_video_btn">동영상 첨부</a> <a href="#" class="ft_module_image_btn" onclick="ftc.popup.image.show(0); return false">이미지 첨부</a></div>' +
				'</div>' +
			'</td><td class="e"></td></tr><tr><td class="sw"></td><td class="s"></td><td class="se"></td></tr></table>' + 
		'</form></div>';
	}
	
	this.REPLYBOX = '<div class="ft_replybox">'+
		'<table><tr><td class="nw"></td><td class="n"></td><td class="ne"></td></tr><tr><td class="w"></td><td class="c">' +
		'<div class="ft_replybox_title"><span>#{title}</span><a href="#close" onclick="ftc.replybox.close(); return false;" class="btn_close">닫기</a></div>' +
		'<form class="ft_replybox_form" name="ft_replybox_form_#{no}" method="post" action="#{post_url}" onsubmit="ftc.comment.post(\'ft_replybox_form_#{no}\', true); return false;">'+
			'<input type="hidden" name="user_no" value="#{user_no}"/>' +
			'<input type="hidden" name="parent_no" value="#{parent_no}" />' +
			'<input type="hidden" name="videosrc" value="" />' +
			'<input type="hidden" name="videotype" value="" />' +
			'<input type="hidden" name="imgsrc" value="" />' +
			'<input type="hidden" name="imgtype" value="" />' +
			'<div class="ft_replybox_user">'+
			'<label for="ft_replybox_nick_#{no}">닉네임</label> <input type="text" name="user_nick" id="ft_reply_nick_#{no}" value="#{user_nick}" class="ft_reply_field" />' +
			'<label for="ft_replybox_email_#{no}">이메일 주소</label> <input type="text" name="user_email" id="ft_reply_email_#{no}" value="#{user_email}" class="ft_reply_field" />' +
			'</div>'+
			'<div class="ft_replybox_body_wrapper"><div class="ft_replybox_body"><div class="ft_replybox_textarea_wrapper"><textarea name="body" class="ft_replybox_field" ></textarea></div></div>' +
			'<button type="buton" class="ft_replybox_update" onclick="ftc.comment.post(\'ft_replybox_form_#{no}\', true); return false;"></button></div>' +
		'<div class="ft_cmtbox_bottom">' +
			'<div class="f_left"><input type="checkbox" name="notify_email" onclick="ftc.module.email_notify.toggleCmt(this);" /> <img src="' + ftc.urls.IMG_ROOT + '/btn_email.gif"  /> <input type="checkbox" name="notify_twiitter" onclick="ftc.partner.twitter.toggleCmt(this);" /> <img src="' + ftc.urls.IMG_ROOT + '/btn_twitter.gif" /></div>' +
			'<div class="f_right"><a href="#" onclick="ftc.popup.video.show(1); return false;" class="ft_module_video_btn">동영상 첨부하기</a> <a href="#" class="ft_module_image_btn" onclick="ftc.popup.image.show(1); return false">이미지 첨부하기</a></div>' +
		'</div>' +
		'</form>' +
		'</td><td class="e"></td></tr><tr><td class="sw"></td><td class="s"></td><td class="se"></td></tr></table>' + 
	'</div>';
	
	this.MODIFYBOX = '<div class="ft_modifybox">'+
		'<table><tr><td class="nw"></td><td class="n"></td><td class="ne"></td></tr><tr><td class="w"></td><td class="c">' +
		'<div class="ft_modifybox_title"><span>#{title}</span><a href="#close" onclick="ftc.modifybox.close(); return false;" class="btn_close">닫기</a></div>' +
		'<form class="ft_modifybox_form" name="ft_modifybox_form_#{no}" method="post" action="#{post_url}" onsubmit="ftc.comment.update(\'ft_modifybox_form_#{no}\', #{is_featured}); return false;">'+
			'<input type="hidden" name="key" value="#{no}" />' +
			'<input type="hidden" name="user_no" value="#{user_no}" />' +
			'<input type="hidden" name="videosrc" value="" />' +
			'<input type="hidden" name="videotype" value="" />' +
			'<input type="hidden" name="imgsrc" value="" />' +
			'<input type="hidden" name="imgtype" value="" />' +
			'<div class="ft_modifybox_user">'+
			'<label for="ft_modifybox_nick_#{no}">닉네임</label> <input type="text" name="user_nick" id="ft_modify_nick_#{no}" value="#{user_nick}" class="ft_modify_field" />' +
			'<label for="ft_modifybox_email_#{no}">이메일 주소</label> <input type="text" name="user_email" id="ft_modify_email_#{no}" value="#{user_email}" class="ft_modify_field" />' +
			'</div>'+
			'<div class="ft_modifybox_body_wrapper"><div class="ft_modifybox_body"><div class="ft_modifybox_textarea_wrapper"><textarea name="body" class="ft_modifybox_field" >#{comment_body}</textarea></div></div>' +
			'<button type="buton" class="ft_modifybox_update" onclick="ftc.comment.update(\'ft_modifybox_form_#{no}\'); return false;"></button></div>' +
		'<div class="ft_cmtbox_bottom">' +
			'<!--<div class="f_left"><input type="checkbox" name="notify_email"  /> <img src="' + ftc.urls.IMG_ROOT + '/btn_email.gif" /> <input type="checkbox" name="notify_twitter" onclick="ftc.partner.twitter.toggleCmt(this);" /> <img src="' + ftc.urls.IMG_ROOT + '/btn_twitter.gif" /></div>-->' +
			'<div class="f_right"><a href="#" onclick="ftc.popup.video.show(2); return false;" class="ft_module_video_btn">동영상 첨부하기</a> <a href="#" class="ft_module_image_btn" onclick="ftc.popup.image.show(2); return false">이미지 첨부하기</a></div>' +
		'</div>' +
		'</form>' +
		'</td><td class="e"></td></tr><tr><td class="sw"></td><td class="s"></td><td class="se"></td></tr></table>' + 
	'</div>';
	
	this.ATTACH_ICON = '<div class="ft_cmtbox_attached"><a class="ft_cmtbox_btn_clear_attached" href="#" onclick="#{boxname}.clearAttach(); return false;">삭제</a><img src="#{icon_src}" onclick="#{boxname}.previewAttach(); return false;" title="첨부 아이콘"/></div>'
	
	this.POPUP_SUPPORTERS = '<div class="ft_popup_supporters" id="ft_supporters_#{key}#{is_featured}"><div class="ft_popup_supporters_left"><div class="ft_popup_supporters_right">'+
		'<div id="ft_supporters_#{key}#{is_featured}_placeholder" class="ft_supporters_placeholder"><div class="loading">로딩중...</div></div>' +
	'</div></div></div>';
	
	this.POPUP_SUPPORT = '<div class="ft_popup" id="ft_popup_support"><table class="ft_popup_table" width="560"><tr><td class="nw"></td><td class="n"><span class="tail"></span></td><td class="ne"></td></tr>' + 
	'<tr><td class="w"></td><td class="c"><div class="ft_popup_c"><div class="ft_popup_title"><span class="ft_popup_title_inside">#{title}</span> <a href="#close" class="btn_close" onclick="ftc.popup.support.close(); return false;">Close</a></div><div class="ft_popup_content">'+
		'<div class="ft_popup_info"><strong>#{user_name}님</strong>의 댓글에 지지할 초콜릿양을 선택해 주세요.<br/>(자신의 보유한 초콜릿의 최대 <strong class="ft_c_red">20%</strong>만 사용가능, 현재 초콜릿 <strong class="ft_c_blue">#{current_ccash}</strong>개 보유)</div>' +
		'<ul class="ft_popup_support_ccash_list">' + 
			'<li class="ft_popup_support_ccash_item" id="ft_popup_support_ccash_item_1"><a href="#" onclick="ftc.popup.support.selectItem(1); return false;" title="초콜릿 5조각 선택"><img src="http://plugin.tcomment.com/images/icon_ccash_bar_1.gif" /><br/><span class="ft_popup_support_ccash_detail"><strong>5</strong>조각</span></a></li>' + 
			'<li class="ft_popup_support_ccash_item" id="ft_popup_support_ccash_item_2"><a href="#" onclick="ftc.popup.support.selectItem(2); return false;" title="초콜릿 10조각 선택"><img src="http://plugin.tcomment.com/images/icon_ccash_bar_2.gif" /><br/><span class="ft_popup_support_ccash_detail"><strong>10</strong>조각</span></a></li>' + 
			'<li class="ft_popup_support_ccash_item" id="ft_popup_support_ccash_item_3"><a href="#" onclick="ftc.popup.support.selectItem(3); return false;" title="초콜릿 15조각 선택"><img src="http://plugin.tcomment.com/images/icon_ccash_bar_3.gif" /><br/><span class="ft_popup_support_ccash_detail"><strong>15</strong>조각</span></a></li>' + 
			'<li class="ft_popup_support_ccash_item" id="ft_popup_support_ccash_item_4"><a href="#" onclick="ftc.popup.support.selectItem(4); return false;" title="초콜릿 20조각 선택"><img src="http://plugin.tcomment.com/images/icon_ccash_bar_4.gif" /><br/><span class="ft_popup_support_ccash_detail"><strong>20</strong>조각</span></a></li>' + 
			'<li class="ft_popup_support_ccash_item" id="ft_popup_support_ccash_item_5"><a href="#" onclick="ftc.popup.support.selectItem(5); return false;" title="초콜릿 30조각 선택"><img src="http://plugin.tcomment.com/images/icon_ccash_bar_5.gif" /><br/><span class="ft_popup_support_ccash_detail"><strong>30</strong>조각</span></a></li>' + 
			'<li class="ft_popup_support_ccash_item" id="ft_popup_support_ccash_item_6"><a href="#" onclick="ftc.popup.support.selectItem(6); return false;" title="초콜릿 50조각 선택"><img src="http://plugin.tcomment.com/images/icon_ccash_bucket_1.gif" /><br/><span class="ft_popup_support_ccash_detail"><strong>50</strong>조각</span></a></li>' + 
			'<li class="ft_popup_support_ccash_item" id="ft_popup_support_ccash_item_7"><a href="#" onclick="ftc.popup.support.selectItem(7); return false;" title="초콜릿 100조각 선택"><img src="http://plugin.tcomment.com/images/icon_ccash_bucket_2.gif" /><br/><span class="ft_popup_support_ccash_detail"><strong>100</strong>조각</span></a></li>' + 
			'<li class="ft_popup_support_ccash_item" id="ft_popup_support_ccash_item_8"><a href="#" onclick="ftc.popup.support.selectItem(8); return false;" title="초콜릿 200조각 선택"><img src="http://plugin.tcomment.com/images/icon_ccash_bucket_3.gif" /><br/><span class="ft_popup_support_ccash_detail"><strong>200</strong>조각</span></a></li>' + 
			'<li class="ft_popup_support_ccash_item" id="ft_popup_support_ccash_item_9"><a href="#" onclick="ftc.popup.support.selectItem(9); return false;" title="초콜릿 300조각 선택"><img src="http://plugin.tcomment.com/images/icon_ccash_bucket_4.gif" /><br/><span class="ft_popup_support_ccash_detail"><strong>300</strong>조각</span></a></li>' + 
			'<li class="ft_popup_support_ccash_item" id="ft_popup_support_ccash_item_10"><a href="#" onclick="ftc.popup.support.selectItem(10); return false;" title="초콜릿 500조각 선택"><img src="http://plugin.tcomment.com/images/icon_ccash_bucket_5.gif" /><br/><span class="ft_popup_support_ccash_detail"><strong>500</strong>조각</span></a></li>' + 
		'</ul>' +
		
		'<div class="ft_popup_support_ccash_custom"><img src="http://plugin.tcomment.com/images/b_arrow.gif" align="absmiddle"/> 초콜릿을 개별적으로 선택 하실 수 있습니다. <input id="ft_popup_support_ccash_amount" value="0" class="rb"/> 조각</div>' +
		'<div class="ft_popup_support_ccash_min">베플이 되시려면 최소 <strong class="ft_c_blue">#{min_ccash}</strong>개의 초콜릿이 필요 합니다.</div>' +
	'</div>' +
	'<div class="ft_popup_buttons"><span class="button"><button type="button" onclick="ftc.comment.support(#{key}); return false;">&nbsp; &nbsp; <strong>지지하기</strong> &nbsp; &nbsp;</button></span></div>' + 
	'</div></td><td class="e"></td></tr>' + 
	'<tr><td class="sw"></td><td class="s"></td><td class="se"></td></tr></table>' +
	'</div>';
	
	this.POPUP_PAYMENT = '<div class="ft_popup" id="ft_popup_payment"><table class="ft_popup_table" width="560"><tr><td class="nw"></td><td class="n"><span class="tail"></span></td><td class="ne"></td></tr>' + 
		'<tr><td class="w"></td><td class="c"><div class="ft_popup_c"><div class="ft_popup_title"><span class="ft_popup_title_inside">초콜릿<img src="' + ftc.urls.IMG_ROOT + '/icon_ccash.gif" class="icon_ccash" alt="초콜릿"/> 충전하기</span><a href="#close" class="btn_close" onclick="ftc.popup.payment.close(); return false;">Close</a></div>'+
			'<form method="post" name="ft_report_form" onsubmit="return false;"><div class="ft_popup_content">' +
			'<div class="ft_popup_info"><strong>초콜릿</strong>을 이용하면 댓글에 추가적으로 추천을 할 수 있어 자신의 댓글이나<br/>마음에 드는 댓글을 베플로 만들 수 있습니다.</div>' +
			'<table class="ft_table" width="520"><thead><tr><th colspan="5"><strong>충전할 초콜릿양</strong>을 선택해주세요</th></tr></thead><tbody><tr>' +
			'<td class="ft_table_td_r ft_table_c" width="20%"><label for="amount_1"><img src="http://plugin.tcomment.com/images/icon_ccash_bucket_1.gif"/></label><br/><input type="radio" name="amount" value="1" id="amount_1" /><br/><label for="amount_1"><strong>50</strong>조각</label></td>' +
			'<td class="ft_table_td_r ft_table_c" width="20%"><label for="amount_2"><img src="http://plugin.tcomment.com/images/icon_ccash_bucket_2.gif"/></label><br/><input type="radio" name="amount" value="2" id="amount_2" /><br/><label for="amount_2"><strong>150</strong>조각</label></td>' +
			'<td class="ft_table_td_r ft_table_c" width="20%"><label for="amount_3"><img src="http://plugin.tcomment.com/images/icon_ccash_bucket_3.gif"/></label><br/><input type="radio" name="amount" value="3" id="amount_3" /><br/><label for="amount_3"><strong>250</strong>조각</label></td>' +
			'<td class="ft_table_td_r ft_table_c" width="20%"><label for="amount_4"><img src="http://plugin.tcomment.com/images/icon_ccash_bucket_4.gif"/></label><br/><input type="radio" name="amount" value="4" id="amount_4" /><br/><label for="amount_4"><strong>500</strong>조각<span class="blue">(+50)</span></label></td>' +
			'<td class="ft_table_c" width="20%"><label for="amount_5"><img src="http://plugin.tcomment.com/images/icon_ccash_bucket_5.gif"/></label><br/><input type="radio" name="amount" value="5" id="amount_5" /><br/><label for="amount_5"><strong>1500</strong>조각<span class="blue">(+200)</span></label></td>' +
			'</tr><tr><td class="ft_table_h ft_table_td_r ft_table_c"><strong class="red">1000</strong>원</td><td class="ft_table_h ft_table_td_r ft_table_c"><strong class="red">3000</strong>원</td><td class="ft_table_h ft_table_td_r ft_table_c"><strong class="red">5000</strong>원</td><td class="ft_table_h ft_table_td_r ft_table_c"><strong class="red">10000</strong>원</td><td class="ft_table_h ft_table_c"><strong class="red">30000</strong>원</td></tr></tbody></table>' + 
			'<table class="ft_table" width="520"><thead><tr><th colspan="5"><strong>충전방법</strong>을 선택해주세요</th></tr></thead><tbody><tr><td colspan="4"></td></tr><tr>' +
			'<td class="ft_table_td_r"><input type="radio" id="payment_0" name="payment" checked="checked"/><label for="payment_0">휴대폰</label><br/><input type="radio" id="payment_4" name="payment" /><label for="payment_4">문화상품권</label><br/><input type="radio" id="payment_8" name="payment" /><label for="payment_8">게임문화상품권</label></td>' +
			'<td class="ft_table_td_r"><input type="radio" id="payment_1" name="payment" /><label for="payment_1">신용카드</label><br/><input type="radio" id="payment_5" name="payment" /><label for="payment_5">도서상품권</label><br/><input type="radio" id="payment_9" name="payment" /><label for="payment_9">모바일 티머니</label></td>' +
			'<td class="ft_table_td_r"><input type="radio" id="payment_2" name="payment" /><label for="payment_2">실시간계좌이체</label><br/><input type="radio" id="payment_6" name="payment" /><label for="payment_6">해피머니 문화상품권</label></td>' +
			'<td class="ft_table_td_r"><input type="radio" id="payment_3" name="payment" /><label for="payment_3">700ARS/폰빌</label><br/><input type="radio" id="payment_7" name="payment" /><label for="payment_7">편의점결제</label></td></tr><tr><td colspan="4"></td></tr></tbody></table>' + 
		'</div>' + 
			'<div class="ft_popup_buttons"><span class="button"><button type="submit" onclick="ftc.popup.payment.close(); ftc.popup.showModal(\'결제모듈과 연결되어있지 않습니다.<br/>결제를 계속 진행할 수 없습니다.\', ftc.strings.ERROR_TITLE); return false;"><strong>결제하기</strong></button></span> <span class="button gray"><a href="#cancel" onclick="ftc.popup.payment.close(); return false;"><strong>취소</strong></a></span></div>' +
			'</form>' +
		'</div></td><td class="e"></td></tr>' + 
		'<tr><td class="sw"></td><td class="s"></td><td class="se"></td></tr></table>' +
		'</div>';
	
	this.POPUP_IMAGE = '<div class="ft_popup" id="ft_popup_image"><table class="ft_popup_table"><tr><td class="nw"></td><td class="n"><span class="tail"></span></td><td class="ne"></td></tr>' + 
		'<tr><td class="w"></td><td class="c"><div class="ft_popup_c"><div class="ft_popup_title"><span class="ft_popup_title_inside">이미지 첨부하기 <!--(<img src="' + ftc.urls.IMG_ROOT + '/icon_ccash.gif" class="icon_ccash" alt="초콜릿"/> 5개 필요)--></span> <a href="#close" class="btn_close" onclick="ftc.popup.image.close(); return false;">Close</a></div>#{content}<div class="ft_popup_buttons"><span class="button"><button type="button" onclick="ftc.popup.image.setImgSrc(); return false;"><strong>이미지 첨부하기</strong></button></span> <span class="button"><button type="button" onclick="ftc.popup.image.cancel(); return false;"><strong>취소</strong></button></span></div>' +
		'</div></td><td class="e"></td></tr>' + 
		'<tr><td class="sw"></td><td class="s"></td><td class="se"></td></tr></table>' +
		'</div>';

	// POPUP_IMAGE_ATTACH
	this.POPUP_IMAGE_ATTACH = '' +
		'<div class="ft_popup_image_attach ft_module_image_tab_body">' +
			'<div class="ft_module_image_tab_info">댓글에 이미지를 추가할 수 있습니다.<!--<br/>단, 음란광고 등의 악용을 막을 목적으로 5개의 초콜릿이 필요합니다.--></div>' +
			'<form method="post" name="ft_image_form" onsubmit="return false;">' +
			'<ol class="form">' +
				'<li>' +
					'<div class="h">' +
						'<label for="ft_image_upload_file">이미지 선택</label>' +
					'</div>' +
					'<div class="i">' +
						'<input type="file" name="ft_image_upload" id="ft_image_upload_input" value="" class="rb" />' +
					'</div>' +
				'</li>' +
				'<li>' +
					'<div class="h">' +
						'<label for="ft_image_preview">이미지 미리보기</label>' +
					'</div>' +
					'<div class="i">' +
						'<div class="ft_image_preview_wrapper">' +
							'<div class="ft_image_preview">' +
								'<img src="http://plugin.tcomment.com/images/modules/image_upload/attach_blank.gif" id="ft_image_upload_preview" />' +
							'</div>' +
						'</div>' +
					'</div>' +
				'</li>' +
			'<ol></form>' +
		'</div>';
	
	// POPUP_IMAGE_NEWSBANK
	this.POPUP_IMAGE_NEWSBANK = ''+
		'<div class="ft_popup_image_newsbank ft_module_image_tab_body">' +
			'<div id="ft_popup_image_newsbank_search" class="ft_module_image_search">' +
				'<input type="text" class="rb" id="ft_popup_image_newsbank_text" size="40" /> ' +
				'<span class="button small"><a href="#" onclick="ftc.module.image.newsbank.search(); return false;">검색</a></span> ' +
				'<span class="button small"><a href="#" onclick="ftc.module.image.newsbank.reset(); return false;">검색 초기화</a></span> ' +
				'<img src="http://plugin.tcomment.com/images/modules/image_upload/newsbank_credit.gif" />'  +
			'</div>' +
			'<div id="ft_popup_image_newsbank_order" class="ft_module_image_order">' +
				'<a href="#rel" class="ft_module_image_newsbank_sort_relevance current" onclick="ftc.module.image.newsbank.sort(\'relevance\'); return false;" class="current">관련순</a> | ' +
				'<a href="#date" class="ft_module_image_newsbank_sort_date-posted-asc" onclick="ftc.module.image.newsbank.sort(\'date-posted-asc\'); return false;" >최신순</a> | ' +
				'<a href="#int" class="ft_module_image_newsbank_sort_interestingness-desc" onclick="ftc.module.image.newsbank.sort(\'interestingness-desc\'); return false;" >인기순</a>' +
			'</div> ' +
			'<div id="ft_popup_image_newsbank_result" class="ft_module_image_result"><img src="http://plugin.tcomment.com/images/modules/image_upload/newsbank_empty.gif" /></div>' +
		'</div>';
	
	this.POPUP_IMAGE_NEWSBANK_EMPTY = '<div id="ft_popup_image_newsbank_result"><img src="http://plugin.tcomment.com/images/modules/image_upload/newsbank_empty.gif" /></div>';
	this.POPUP_IMAGE_NEWSBANK_RESULT = '<div id="ft_popup_image_newsbank_result"><p></p><ul class="ft_popup_image_newsbank_result_list"></ul></div>';
	this.POPUP_IMAGE_NEWSBANK_ITEM = '<li onclick="ftc.popup.image.newsbank.select(this, \'#{cmscode}\'); return false;"><img src="http://image.newsbank.co.kr/viewResizer.ashx?cmscode=#{cmscode}" /><a href="#choose_#{cmscode}" ></a></li>';
	
	// POPUP_IMAGE_FLICKR
	this.POPUP_IMAGE_FLICKR = '' + 
		'<div class="ft_popup_image_flickr ft_module_image_tab_body">' +
			'<div id="ft_popup_image_flickr_search" class="ft_module_image_search">' +
				'<input type="text" class="rb" id="ft_popup_image_flickr_text" size="40" /> ' +
				'<span class="button small"><a href="#" onclick="ftc.module.image.flickr.search(); return false;">검색</a></span> ' +
				'<span class="button small"><a href="#" onclick="ftc.module.image.flickr.reset(); return false;">검색 초기화</a></span> ' +
				'<img src="http://plugin.tcomment.com/images/modules/image_upload/flickr_credit.gif" />'  +
			'</div>' +
			'<div id="ft_popup_image_flickr_order" class="ft_module_image_order">' +
				'<a href="#rel" class="ft_module_image_flickr_sort_relevance current" onclick="ftc.module.image.flickr.sort(\'relevance\'); return false;" class="current">관련순</a> | ' +
				'<a href="#date" class="ft_module_image_flickr_sort_date-posted-asc" onclick="ftc.module.image.flickr.sort(\'date-posted-asc\'); return false;" >최신순</a> | ' +
				'<a href="#int" class="ft_module_image_flickr_sort_interestingness-desc" onclick="ftc.module.image.flickr.sort(\'interestingness-desc\'); return false;" >인기순</a>' +
			'</div> ' +
			'<div id="ft_popup_image_flickr_result" class="ft_module_image_result"><img src="http://plugin.tcomment.com/images/modules/image_upload/flickr_empty.gif" /></div>' +
		'</div>';
	
	this.POPUP_IMAGE_FLICKR_EMPTY = '<div id="ft_popup_image_flickr_result" class="ft_module_image_result"><img src="http://plugin.tcomment.com/images/modules/image_upload/flickr_empty.gif" /></div>';
	this.POPUP_IMAGE_FLICKR_RESULT = '<div id="ft_popup_image_flickr_result" class="ft_module_image_result"><p></p><ul class="ft_popup_image_flickr_result_list"></ul></div>';
	this.POPUP_IMAGE_FLICKR_ITEM = '<li onclick="ftc.module.image.flickr.select(this, #{page}, #{index}); return false;" ondblclick="this.onclick(); ftc.popup.image.setImgSrc(); return false;" class="ft_module_image_result"><img src="http://farm#{farm_id}.static.flickr.com/#{server_id}/#{id}_#{secret}_s.jpg" /><a href="#choose_#{page}_#{index}" ></a></li>';

	// POPUP_VIDEO
	this.POPUP_VIDEO = '<div class="ft_popup" id="ft_popup_video"><table class="ft_popup_table"><tr><td class="nw"></td><td class="n"><span class="tail"></span></td><td class="ne"></td></tr>' + 
		'<tr><td class="w"></td><td class="c"><div class="ft_popup_c"><div class="ft_popup_title"><span class="ft_popup_title_inside">동영상 첨부하기 <!--(<img src="' + ftc.urls.IMG_ROOT + '/icon_ccash.gif" class="icon_ccash" alt="초콜릿"/> 5개 필요)--></span> <a href="#close" class="btn_close" onclick="ftc.popup.video.close(); return false;">Close</a></div>#{content}<div class="ft_popup_buttons"><span class="button"><button type="button" onclick="ftc.popup.video.setVideoSrc(); return false;"><strong>동영상 첨부하기</strong></button></span> <span class="button"><button type="button" onclick="ftc.popup.video.cancel(); return false;"><strong>취소</strong></button></span></div>' +
		'</div></td><td class="e"></td></tr>' + 
		'<tr><td class="sw"></td><td class="s"></td><td class="se"></td></tr></table>' +
		'</div>';
		
	// POPUP_VIDEO_YOUTUBE
	this.POPUP_VIDEO_YOUTUBE = '' + 
		'<div class="ft_popup_video_youtube ft_module_video_tab_body">' +
			'<div id="ft_popup_video_youtube_search" class="ft_module_video_search">' +
				'<input type="text" class="rb" id="ft_popup_video_youtube_text" size="40" /> ' +
				'<span class="button small"><a href="#" onclick="ftc.module.video.youtube.search(); return false;">검색</a></span> ' +
				'<span class="button small"><a href="#" onclick="ftc.module.video.youtube.reset(); return false;">검색 초기화</a></span> ' +
				'<img src="http://plugin.tcomment.com/images/modules/video_upload/youtube_credit.gif" />'  +
			'</div>' +
			'<div id="ft_popup_video_youtube_order" class="ft_module_video_order">' +
				'<a href="#rel" class="ft_module_video_youtube_sort_relevance current" onclick="ftc.module.video.youtube.sort(\'relevance\'); return false;" class="current">관련순</a> | ' +
				'<a href="#date" class="ft_module_video_youtube_sort_date-posted-asc" onclick="ftc.module.video.youtube.sort(\'date-posted-asc\'); return false;" >최신순</a> | ' +
				'<a href="#int" class="ft_module_video_youtube_sort_interestingness-desc" onclick="ftc.module.video.youtube.sort(\'interestingness-desc\'); return false;" >인기순</a>' +
			'</div> ' +
			'<div id="ft_popup_video_youtube_result" class="ft_module_video_result"><img src="http://plugin.tcomment.com/images/modules/video_upload/youtube_empty.gif" /></div>' +
		'</div>';
	
	this.POPUP_VIDEO_YOUTUBE_EMPTY = '<div id="ft_popup_video_youtube_result" class="ft_module_video_result"><img src="http://plugin.tcomment.com/images/modules/video_upload/youtube_empty.gif" /></div>';
	this.POPUP_VIDEO_YOUTUBE_RESULT = '<div id="ft_popup_video_youtube_result" class="ft_module_video_result"><p></p><ul class="ft_popup_video_youtube_result_list"></ul><div class="ft_popup_video_youtube_preview"></div></div>';
	this.POPUP_VIDEO_YOUTUBE_ITEM = '<li onclick="ftc.module.video.youtube.select(this, #{page}, #{index}); return false;" ondblclick="this.onclick(); ftc.popup.video.setVideoSrc(); return false;" class="ft_module_video_result"><img src="#{thumbnail_url}" /><a href="#choose_#{page}_#{index}" ></a></li>';
	
	// POPUP_VIDEO_DAUM
	this.POPUP_VIDEO_DAUM = '' + 
		'<div class="ft_popup_video_daum ft_module_video_tab_body">' +
			'<div id="ft_popup_video_daum_search" class="ft_module_video_search">' +
				'<input type="text" class="rb" id="ft_popup_video_daum_text" size="40" /> ' +
				'<span class="button small"><a href="#" onclick="ftc.module.video.daum.search(); return false;">검색</a></span> ' +
				'<span class="button small"><a href="#" onclick="ftc.module.video.daum.reset(); return false;">검색 초기화</a></span> ' +
				'<img src="http://plugin.tcomment.com/images/modules/video_upload/daum_credit.gif" />'  +
			'</div>' +
			'<div id="ft_popup_video_daum_order" class="ft_module_video_order">' +
				'<a href="#rel" class="ft_module_video_daum_sort_exact current" onclick="ftc.module.video.daum.sort(\'exact\'); return false;" class="current">관련순</a> | ' +
				'<a href="#date" class="ft_module_video_daum_sort_date" onclick="ftc.module.video.daum.sort(\'date\'); return false;" >최신순</a> | ' +
				'<a href="#int" class="ft_module_video_daum_sort_recommend" onclick="ftc.module.video.daum.sort(\'recommend\'); return false;" >인기순</a>' +
			'</div> ' +
			'<div id="ft_popup_video_daum_result" class="ft_module_video_result"><img src="http://plugin.tcomment.com/images/modules/video_upload/daum_empty.gif" /></div>' +
		'</div>';
	
	this.POPUP_VIDEO_DAUM_EMPTY = '<div id="ft_popup_video_daum_result" class="ft_module_video_result"><img src="http://plugin.tcomment.com/images/modules/video_upload/daum_empty.gif" /></div>';
	this.POPUP_VIDEO_DAUM_RESULT = '<div id="ft_popup_video_daum_result" class="ft_module_video_result"><p></p><ul class="ft_popup_video_daum_result_list"></ul><div class="ft_popup_video_daum_preview"></div></div>';
	this.POPUP_VIDEO_DAUM_ITEM = '<li onclick="ftc.module.video.daum.select(this, #{page}, #{index}); return false;" ondblclick="this.onclick(); ftc.popup.video.setVideoSrc(); return false;" class="ft_module_video_result"><img src="#{thumbnail_url}" /><a href="#choose_#{page}_#{index}" ></a></li>';
	/*
	this.POPUP_VIDEO = '<div class="ft_popup" id="ft_popup_video"><table class="ft_popup_table"><tr><td class="nw"></td><td class="n"><span class="tail"></span></td><td class="ne"></td></tr>' + 
		'<tr><td class="w"></td><td class="c"><div class="ft_popup_c"><div class="ft_popup_title"><span class="ft_popup_title_inside">동영상 첨부하기 <!--(<img src="' + ftc.urls.IMG_ROOT + '/icon_ccash.gif" class="icon_ccash" alt="초콜릿"/> 10개 필요)--></span><a href="#close" class="btn_close" onclick="ftc.popup.video.close(); return false;">Close</a></div>'+
			'<form method="post" name="ft_image_form" onsubmit="return false;">'+
			'<div class="ft_popup_content">' +
			'<p>동영상을 퍼와서 댓글에 첨부 할 수 있습니다.<!--<br/>단, 음란광고 등의 악용을 막을 목적으로 10개의 초콜릿이 필요합니다.--></p>' +
				'<ol class="form">' +
					'<li><div class="h"><label>동영상 타입</label></div><div class="i"><input type="radio" name="ft_video_type" id="ft_video_youtube" value="YOUTUBE" checked="checked" onclick="ftc.module.video.select_module(0);" /> <label for="ft_video_youtube"><img src="http://plugin.tcomment.com/images/icon_p_youtube.gif" /></label> &nbsp; <!-- <input type="radio" name="ft_video_type" id="ft_video_mgoon" value="MGOON" disabled="disabled" onclick="ftc.module.video.select_module(1);" /> <label for="ft_video_mgoon"><img src="http://plugin.tcomment.com/images/icon_p_mgoon.gif" /></label> --></div></li>' +
					'<li><div class="h"><label for="ft_video_url">경로(URL)</label></div><div class="i"><input type="text" name="ft_video_url" id="ft_video_url" value="" class="rb" size="34" /> <span class="button small"><button onclick="ftc.popup.video.getPreview(); return false;">확인하기</button></span></div></li>' + 
					'<li><div class="h"><label>미리보기</label></div><div class="i"><span class="ft_video_preview_wrapper"><span class="ft_video_preview"></span></span></div></li>'+
				'</ol>'+
			'</form>' +
			'<div class="ft_popup_buttons"><span class="button"><button type="button" onclick="ftc.popup.video.setVideoSrc(); return false;"><strong>동영상 첨부하기</strong></button></span> <span class="button"><button type="button" onclick="ftc.popup.video.cancel(); return false;">취소</button></span></div>' +
		'</div></td><td class="e"></td></tr>' + 
		'<tr><td class="sw"></td><td class="s"></td><td class="se"></td></tr></table>' +
		'</div>';
	*/
	
	this.POPUP_PROFILE = '<div class="ft_profile" id="ft_profile_#{key}#{is_featured}">#{content}</div>';
	this.POPUP_PROFILE_GUEST = '<div class="ft_profile" id="ft_profile_#{key}#{is_featured}"><div class="ft_profile_wrapper"><span class="guest"><span class="user_name">#{user_name}</span>님은 손님으로 댓글을 남기셨습니다.</span><div class="ft_profile_bottom"><span class="ft_t">T</span>오픈아이디 프로필</div></div></div>';
	this.POPUP_PROFILE_TEMPORARY = '<div class="ft_profile" id="ft_profile_#{key}#{is_featured}"><div class="ft_profile_wrapper"><span class="guest"><span class="user_name">#{user_name}</span>님은 오픈아이디에 연결되어있지 않은 상태로 댓글을 남기셨습니다.</span><div class="ft_profile_bottom"><span class="ft_t">T</span>오픈아이디 프로필</div></div></div>';
	
	this.POPUP_MANAGE_PROFILE = '<div class="ft_popup" id="ft_popup_manage_profile"><table class="ft_popup_table"><tr><td class="nw"></td><td class="n"><span class="tail"></span></td><td class="ne"></td></tr>' + 
		'<tr><td class="w"></td><td class="c"><div class="ft_popup_c"><div class="ft_popup_title"><span class="ft_popup_title_inside"><span class="ft_t">T</span>오픈아이디 프로필관리/설정</span><a href="#close" class="btn_close" onclick="ftc.popup.manage_profile.close(); return false;">Close</a></div>'+
			'<form method="post" name="ft_manage_profile_form" action="'+ftc.urls.MANAGE_PROFILE+'" onsubmit="return false;"><div class="ft_popup_contsent">' +
			'<input type="hidden" id="ft_manage_profile_portrait_src_old" value="#{user_portrait}" />'+
			'<input type="hidden" id="ft_manage_profile_portrait_src" name="user_portrait" value="#{user_portrait}" />'+
			'<p>다른 사람들이 보는 내 프로필을 관리할 수 있습니다.</p>' +
			'<ol class="form">' +
				'<li><div class="h"><label>프로필 사진</label></div><div class="i"><span class="ft_profile_portrait_wrapper"><img src="#{user_portrait}" width="100" height="100" id="ft_manage_profile_portrait_preview"/><input type="file" id="ft_manage_profile_portrait" /><span class="button"><button type="button" onclick="ftc.popup.manage_profile.cancelUpload(); return false;" disabled="disabled" id="ft_manage_profile_cancel_upload" class=" disabled">업로드 취소</button></span></span></div></li>' +
				'<li #{hide}><div class="h"><label for="ft_image_preview">연결 T오픈아이디</label></div><div class="i"><span class="no_ls">#{user_id}.<span class="ft_t">T</span>openid.com</span></div></li>' +
				'<li><div class="h"><label for="ft_profile_user_nick">닉네임</label></div><div class="i"><input type="text" value="#{user_nick}" class="rb" name="user_nick" id="ft_profile_user_nick" disabled="disabled"/></div></li>' +
				'<li><div class="h"><label for="ft_profile_user_email">이메일 주소</label></div><div class="i"><input type="text" value="#{user_email}" class="rb" name="user_email" id="ft_profile_user_email"/> <p>이메일 주소는 외부로 노출되지 않습니다.</p></div></li>' +
				'<li><div class="h"><label for="ft_profile_user_blog">홈피/블로그 주소</label></div><div class="i">http://<input type="text" value="#{user_blog}" class="rb" name="user_blog" id="ft_profile_user_blog"/></div></li>' +
				'<li><div class="h"><label for="ft_profile_user_gender">성별</label></div><div class="i"><select name="user_gender" id="ft_profile_user_gender"><option value="-1">선택</option><option value="MALE" #{gender_male}>남성</option><option value="FEMALE" #{gender_female}>여성</option></select></div></li>' +
				'<li><div class="h"><label for="ft_profile_user_location">사는곳</label></div><div class="i"><input type="text" value="#{user_location}" class="rb" name="user_location" id="ft_profile_user_location"/></div></li>' +
				'<li><div class="h"><label for="ft_profile_twitter_connection">트위터 연결</label></div><div class="i"><input type="checkbox" class="rb" name="twitter_connection" id="ft_profile_twitter_connection" onclick="ftc.partner.twitter.toggleConnect(this);"/> <span id="ft_profile_twitter_status">확인중...</span></div></li>' +
				'<li #{hide}><div class="h"><label for="ft_profile_passwd">현재 비밀번호</label></div><div class="i"><input type="password" value="#{pass}" class="rb" name="passwd" id="ft_profile_passwd"/><p>프로필을 변경하시려면 반드시 입력하셔야 합니다.<br/>비밀번호를 변경하시려면 <a href="#togglePasswordChange" onclick="ftc.popup.manage_profile.togglePass(); return false;">여기</a>를 누르세요.</p></div></li>' + 
				'<li class="ft_password_change" #{hide}><div class="h"><label for="ft_profile_passwd_change">변경 비밀번호 </label></div><div class="i"><input type="password" value="" class="rb" name="passwd_change" id="ft_profile_passwd_change" /><p>비밀번호를 변경하시려면 입력하세요</p></div></li>' +
				'<li class="ft_password_change" #{hide}><div class="h"><label for="ft_profile_passwd_confirm">비밀번호 확인</label></div><div class="i"><input type="password" value="" class="rb" name="passwd_confirm" id="ft_profile_passwd_confirm" /></div></li>' +
			'</ol></form>' +
			'<div class="ft_popup_buttons"><span class="button"><button type="button" onclick="ftc.popup.manage_profile.update(); return false;"><strong>프로필 변경하기</strong></button></span> <span class="button gray"><a href="#cancel" onclick="ftc.popup.manage_profile.close(); return false;">취소</a></span></div>' +
		'</div></td><td class="e"></td></tr>' + 
		'<tr><td class="sw"></td><td class="s"></td><td class="se"></td></tr></table>' +
		'</div>';
	
	this.CMT_IMAGEBOX = '<div class="ftc_cmt_body_image ftc_cmt_body_image_#{key}"><img src="#{img_src}?width=120&height=90&method=fit" class="thumbnail small" onclick="ftc.thumb.toggleImage(this); return false;"></div>';
	this.CMT_VIDEOBOX = '<div class="ftc_cmt_body_video ftc_cmt_body_video_#{key}" src="http://www.youtube.com/watch?v=#{vid}" vid="#{vid}"><img src="http://img.youtube.com/vi/#{vid}/default.jpg" class="small ftc_cmt_body_video_preview" /onclick="ftc.thumb.showVideo(this); return false;" ><div class="ft_cmt_body_video_wrapper"><object width="480" height="385" style="display: none;"><param name="movie" value="http://www.youtube.com/v/#{vid}" /><param name="wmode" value="opaque" /><embed src="http://www.youtube.com/v/#{vid}" type="application/x-shockwave-flash" width="480" height="385" wmode="opaque" /></object></div></div>';
	
	
}
/**
 * ftc.topenid
 */

// ftc.topenid
ftc.topenid = new function() {
	this.btn = null;
	this.check_join = false;
	this.timer_check_id;
	this.timer_check_nick;
	
	this.init = function() {
		//register callback
		ftc.popup.topenid = ftc.topenid.showPopup;
		
		ftj('.ft_cmtbox_topinfo .login').click(ftc.topenid.showLoginPopup);
	}
	
	this.login = function(id, pw) {
		ftc.request.jsonp(ftc.urls.CHECK_LOGIN + id + '/' + pw , {}, {
			onSuccess: function(response) {
				elem.text(response.msg).removeClass('error').addClass('good');
			},
			onFail: function(response) {
				elem.text(response.msg).addClass('error').removeClass('good');
			}
		});
	}
	
	this.logout = function() {
		ftc.request.post(data);
	}
	
	this.join = function() {
		
	}
	
	// LOGIN or JOIN popup
	this.showPopup = function() {
		ftc.overlay.show();
		var ft_topenid_popup = ftj('#ft_topenid_popup');
		
		if (ft_topenid_popup.length <= 0) {
			ftj('body').append('<div id="ft_topenid_popup" class="ft_popup"> \
				<table class="ft_popup_table"><tr><td class="nw"></td><td class="n"><span class="tail"></span></td><td class="ne"></td></tr><tr><td class="w"></td><td class="c"><div class="ft_popup_c">\
				<div class="ft_popup_title"><span class="ft_popup_title_inside"><span class="ft_t">T</span>오픈아이디</span><a href="#close" onclick="ftc.topenid.closePopup(); return false;" id="ft_hide_msgbox" class="btn_close">Close</a></div>\
				<ul class="ft_module_topenid_tab"><li class="ft_module_topenid_tab_btn" id="ft_topenid_popup_login_btn"><a href="#" onclick="ftc.topenid.showLoginPopup(); return false;" class="login"><span class="ft_t">T</span>오픈아이디로 로그인</a></li>\
				<li class="ft_module_topenid_tab_btn" id="ft_topenid_popup_join_btn"><a href="#" onclick="ftc.topenid.showJoinPopup(); return false;" class="join"><span class="ft_t">T</span>오픈아이디 만들기</a></li></ul>\
					<div id="ft_topenid_popup_login"> \
						<form action="' + ftc.urls.PLUGIN_HOST + '/account/login" method="post" onsubmit="return ftc.topenid.checkLogin();" > \
						<div class="ft_popup_content"> \
						<div class="ft_popup_info"><span class="ft_t">T</span>오픈아이디로 커뮤니티, 뉴스, 블로그 등 인터넷 어디서든 댓글을 남기고<br/>친구를 사귈 수 있습니다. 아직 T오픈아이디가 없으시다구요? 그렇다면 <a href="#" onclick="ftc.topenid.showJoinPopup(); return false;">생성</a>해주세요.</div> \
							<div class="ft_form_msg" style="display: none;"></div>\
							<ol class="form">\
								<li><div class="h"><label><span class="ft_t">T</span>오픈아이디</label></div><div class="i"><input type="text" name="user_id" class="rb"/><span>.<span class="ft_t">T</span>OPENID.COM</div></li> \
								<li><div class="h"><label>비밀번호</label></div><div class="i"><input type="password" name="password" class="rb"/></div></li> \
							</ol> \
						</div>\
						<div class="ft_popup_buttons">\
							<span class="button"><input type="submit" value="로그인"/></span>\
						</div>\
						<div class="ft_popup_links">\
							<a href="#" onclick="ftc.topenid.showJoinPopup(); return false;">아이디 만들기</a>\
							<a href="#" onclick="return false;">비밀번호 찾기</a>\
						</div>\
						</form>\
					</div>\
					<div id="ft_topenid_popup_join">\
						<form action="' + ftc.urls.PLUGIN_HOST + '/account/join" method="post" onsubmit="return ftc.topenid.checkJoin();" enctype="application/x-www-form-urlencoded">\
						<input type="hidden" name="realname_check_type" value="" />\
						<input type="hidden" name="realname_check_key1" value="" />\
						<input type="hidden" name="realname_check_key2" value="" />\
						<div class="ft_popup_content">\
							<div class="ft_popup_info"><span class="ft_t">T</span>오픈아이디로 커뮤니티, 뉴스, 블로그 등 인터넷 어디서든 댓글을 남기고 친구를 사귈 수 있습니다. 간단한 정보를 입력하시면 바로 아이디가 생성됩니다.</div>\
							<div class="ft_form_msg" style="display: none;"></div>\
							<ol class="form">\
								<li><div class="h"><label>아이디</label></div><div class="i">\
								<input type="text" name="user_id" class="rb" size="20" onkeyup="ftc.topenid.checkID(this.value);"/><span>.<span class="ft_t">T</span>OPENID.com<p class="ft_check_user_id">아이디를 입력하세요.</p></div></li>\
								<li><div class="h"><label>비밀번호</label></div><div class="i"><input type="password" name="password" class="rb" size="20" /></div></li>\
								<li><div class="h"><label>비밀번호 확인</label></div><div class="i"><input type="password" name="password_confirm" class="rb" size="20" /></div></li>\
								<li><div class="h"><label>닉네임</label></div><div class="i"><input type="text" name="user_nick" class="rb" size="20" onkeyup="ftc.topenid.checkNick(this.value);"/><p class="ft_check_user_nick">닉네임을 입력하세요.</p></div></li>\
								<li><div class="h"><label>이메일주소</label></div><div class="i"><input type="text" name="user_email" class="rb" size="25" /><p>비밀번호 분실시 이메일로 전송되므로 정확한 주소를 입력해주세요.</p></div></li>\
								<li><div class="h"><label>본인확인</label></div><div class="i"><select name="auth_type" onclick="ftc.topenid.showAuth(this.value); return false;"><option value="0">인증방식을 선택하세요</option><option value="0">----------------</option><option value="1">IPIN 인증</option><option value="2">휴대전화 인증</option></select> : <span class="ft_realname_check_status error">인증안됨</span></div></li>\
								<li><div class="h"><label>이름(실명)</label></div><div class="i"><input type="text" class="rb disabled" size="20" name="user_name" readonly="readonly" /><p>실명인증을 진행하시면 자동으로 입력됩니다.</p></div></li>\
							</ol>\
							<div class="ft_topenid_auth"></div>\
						</div>\
						<div class="ft_popup_buttons">\
							<span class="button"><input type="submit" value="T오픈아이디 만들기"/></span>\
						</div>\
						<!--<div class="ft_popup_links">\
							<a href="#">아이디 만들기</a>\
							<a href="#">비밀번호 찾기</a>\
						</div>-->\
						</form>\
					</div>\
				</div></td><td class="e"></td></tr><tr><td class="sw"></td><td class="s"></td><td class="se"></td></tr></table>\
			</div>');
			ft_topenid_popup = ftj('#ft_topenid_popup').hide();
		}
			
		ftc.topenid.repositionPopup();
		ftj(window).bind('resize', ftc.topenid.repositionPopup);
		
		ft_topenid_popup.show();
		ftc.utils.scrollToVisible(ft_topenid_popup);
	}
	
	this.checkLogin = function() {
		var form = ftj('#ft_topenid_popup_login form');
	
		if (!ftc.utils.checkInput(form, 'user_id', '아이디를 입력해주세요!')) return false;
		if (!ftc.utils.checkInput(form, 'password', '패스워드를 입력해주세요!')) return false;
		
		return true;
	}
	
	this.checkJoin = function() {
		var form = ftj('#ft_topenid_popup_join form');
		
		var user_id = form.find('input[name=user_id]').val().trim();
		var password = form.find('input[name=password]').val().trim();
		var password_confirm = form.find('input[name=password_confirm]').val().trim();
		var user_name = form.find('input[name=user_name]').val().trim();
		var user_email = form.find('input[name=user_email]').val().trim();
		var user_nick = form.find('input[name=user_nick]').val().trim();
		var user_name = form.find('input[name=user_name]').val().trim();
		var realname_check_type = form.find('input[name=realname_check_type]').val().trim();
		var realname_check_key1 = form.find('input[name=realname_check_key1]').val().trim();
		var realname_check_key2 = form.find('input[name=realname_check_key2]').val().trim();

		if (user_id == '' || user_id == null) {
			ftc.popup.showModal('사용하실 아이디를 입력하세요.', ftc.strings.ERROR_TITLE);
			return false;
		}
		
		if (password == '' || password == null) {
			ftc.popup.showModal('비밀번호를 입력해주세요.', ftc.strings.ERROR_TITLE);
			return false;
		}
		
		if (password_confirm == '' || password_confirm == null) {
			ftc.popup.showModal('비밀번호 확인을 입력해주세요.', ftc.strings.ERROR_TITLE);
			return false;
		}
		
		if (user_nick == '' || user_nick == null) {
			ftc.popup.showModal('닉네임 확인을 입력해주세요.', ftc.strings.ERROR_TITLE);
			return false;
		}
		
		if (user_email == '' || user_email == null) {
			ftc.popup.showModal('이메일 주소를 입력해주세요.', ftc.strings.ERROR_TITLE);
			return false;
		}
		
		if (user_name == '' || user_name == null) {
			ftc.popup.showModal('이름을 입력해주세요.', ftc.strings.ERROR_TITLE);
			return false;
		}
		
		if (realname_check_type == '' || realname_check_type == null || (realname_check_type != 'phone' && realname_check_type != 'ipin') ) {
			ftc.popup.showModal('실명인증을 진행하셔야 합니다.', ftc.strings.ERROR_TITLE);
			return false;
		}
		
		if (realname_check_key1 == '' || realname_check_key1 == null || realname_check_key2 == '' || realname_check_key2 == null) {
			ftc.popup.showModal('실명인증 정보가 잘못되어 있습니다. 실명인증을 정상적으로 진행해주세요.', ftc.strings.ERROR_TITLE);
			return false;
		}
		
		if (form.find('.error').length > 0) {
			ftc.popup.showModal(form.find('.error').first().text(), ftc.strings.ERROR_TITLE);
			return false;
		}

		
		var length = form.find('input[type=text]').length;
		var cnt = 0;
		
		ftc.progress.showRound(form, '데이터를 암호화하여 전송중입니다.');
		
		for (i = 0; i < length; i++) {
			var value = form.find('input[type=text]').eq(i).val()
			var encoded = encodeURIComponent( value );
			
			form.find('input[type=text]').eq(i).val( encoded ).attr('readonly', 'readonly').addClass('disabled');
		}

		return true;
	}
	
	this.showLoginPopup = function() {
		var ft_topenid_popup = ftj('#ft_topenid_popup');
		
		if (ft_topenid_popup.length <= 0) {
			ftc.topenid.showPopup();
		}
		
		ftj('#ft_topenid_popup_login').show();
		ftj('#ft_topenid_popup_join').hide();
		ftj('#ft_topenid_popup_login_btn').addClass('current');
		ftj('#ft_topenid_popup_join_btn').removeClass('current');
		
		ftc.utils.scrollToVisible(ft_topenid_popup);
	}
	
	this.showJoinPopup = function() {
		var ft_topenid_popup = ftj('#ft_topenid_popup');
		
		if (ft_topenid_popup.length <= 0) {
			ftc.topenid.showPopup();
		}
		
		ftj('#ft_topenid_popup_login').hide();
		ftj('#ft_topenid_popup_join').show();
		ftj('#ft_topenid_popup_login_btn').removeClass('current');
		ftj('#ft_topenid_popup_join_btn').addClass('current');
		
		ftc.utils.scrollToVisible(ft_topenid_popup);
	}
	
	this.closePopup = function() {
		ftc.overlay.hide();
		ftj('#ft_topenid_popup').hide().remove();
		ftj(window).unbind('resize', ftc.topenid.repositionPopup);
	}
	
	this.repositionPopup = function() {
		var ft_topenid_popup = ftj('#ft_topenid_popup');
		var target = ftj('.ft_cmtbox_topinfo .login');

		var left = ft_container.offset().left + ft_container.width() - ft_topenid_popup.width() - 10;
		
		ft_topenid_popup.css({
			'position': 'absolute',
			'top': target.offset().top + target.height() + 12 + 'px',
			'left': left + 'px'
		});
		
		var tail = target.offset().left - ft_container.offset().left + (target.width() / 2) + 10;
		ft_topenid_popup.find('span.tail').first().css({'left' : tail + 'px'});
	}
	
	this.showAuth = function(type) {
		var form = ftj('#ft_topenid_popup_join form');
		var realname_check_type = form.find('input[name=realname_check_type]').val().trim();
		var realname_check_key1 = form.find('input[name=realname_check_key1]').val().trim();
		var realname_check_key2 = form.find('input[name=realname_check_key2]').val().trim();

		if (realname_check_type == 'phone' || realname_check_type == 'ipin') {
			var reauth = confirm('이미 인증을 받으셨습니다. 다시 인증을 진행하시겠습니까?');
			if (reauth == false) {
				return;
			}
			else {
				this.resetAuth();
			}
		}

		if (type == '1') {
			this.showIpin();
			//this.resetAuth();
		}
		else if (type == '2') {
			this.showPhone();
		}
		else {
			this.hideAuth();
		} 
	}
	
	this.showIpin = function() {
		var ft_topenid_auth = ftj('#ft_topenid_popup .ft_topenid_auth');
		
		var markup = '<div id="ft_realname_ipin" style="text-align: center; border-bottom: 1px solid #ccc; padding:10px 0 15px; margin: 5px;">\
			<input type="hidden" name="user_realname" value="" />\
			<p>IPIN을 이용하여 본인확인을 받으시려면 아래 버튼을 클릭하세요<br/><br/></p>\
			<span class="button large"><button type="button" onclick="ftc.module.realname.ipin.begin(); return false;" id="ft_realname_ipin_begin"><strong>IPIN 인증하기</stron></button></span>\
		</div>';
		
		ft_topenid_auth.html(markup);
		ftc.module.realname.ipin.reset();
	}
	
	this.showPhone = function() {
		var ft_topenid_auth = ftj('#ft_topenid_popup .ft_topenid_auth');
		
		var markup = '<div id="ft_realname_phone">\
		<div class="ft_popup_info">휴대폰으로 본인 확인을 위해 인증코드를 입력해주세요.<br/>\
		주민등록번호는 휴대폰인증을 위해 사용될 뿐 절대 다른 용도로 사용되거나 남지 않습니다.</div>\
		<ol class="form">\
			<li><div class="h"><label>이름(실명)</label></div><div class="i"><input type="text" name="user_realname" size="14" maxlength="14" class="rb" /></div></li>\
			<li><div class="h"><label>주민등록번호</label></div><div class="i"><input type="text" name="soc_no1" size="12" maxlength="6" class="rb" /> - <input type="password" name="soc_no2" size="14" maxlength="7" class="rb" /></div></li>\
			<li><div class="h"><label>휴대폰번호</label></div><div class="i"><select name="phone_comp"class="rb" ><option value="">선택</option><option value="1">SKT</option><option value="2">KT</option><option value="3">LGT</option></select> <select name="phone_no1" class="rb" ><option value="011">011</option><option value="010">010</option><option value="016">016</option><option value="017">017</option><option value="018">018</option><option value="019">019</option></select> - <input type="text" name="phone_no2" size="5" class="rb" /> - <input type="text" name="phone_no3" size="5" class="rb" />\
			<span class="button small"><button type="button" onclick="ftc.module.realname.phone.begin(); return false;" id="ft_realname_phone_get_auth_no">인증코드 받기</button></span></div></li>\
			<li><div class="h"><label>인증코드</label></div><div class="i"><input type="text" name="auth_no" size="8" class="rb" /> <span class="button small"><button type="button" onclick="ftc.module.realname.phone.check(); return false;" id="ft_realname_phone_check_auth_no">인증코드 확인</button></span> <span class="button small"><button type="button" onclick="ftc.module.realname.phone.reset(); return false;" id="ft_realname_phone_reset">초기화</button></span></div></li>\
		</ol></div>';
		
		ft_topenid_auth.html(markup);
		ftc.module.realname.phone.reset();
	}
	
	this.hideAuth = function() {
		var ft_topenid_auth = ftj('#ft_topenid_popup .ft_topenid_auth');
		ft_topenid_auth.html('');
	}
	
	this.finishAuth = function(type, check_code1, check_code2) {
		var form = ftj('#ft_topenid_popup_join form');
		
		if (type == 'phone' || type == 'ipin') {
			form.find('input[name=realname_check_type]').val(type);
			form.find('input[name=realname_check_key1]').val(check_code1);
			form.find('input[name=realname_check_key2]').val(check_code2);

			form.find('input[name=user_name]').val(form.find('input[name=user_realname]').val());		
			ftj('.ft_realname_check_status').removeClass('error').addClass('good').text('인증 성공');
			this.hideAuth();
		}
		else {
			this.resetAuth();
		}
	}
	
	this.resetAuth = function() {
		var form = ftj('#ft_topenid_popup_join form');
		form.find('input[name=realname_check_type]').val('');
		form.find('input[name=realname_check_key1]').val('');
		form.find('input[name=realname_check_key2]').val('');
		form.find('select[name=auth_type]').val('');
		ftj('.ft_realname_check_status').removeClass('good').addClass('error').text('인증 안됨');
		
		this.hideAuth();
	}
	
	this.checkID = function( user_id ) {
		var elem = ftj('.ft_check_user_id');
		user_nick = user_id.trim();
		
		if (user_id == '') {
			elem.text('아이디를 입력하세요.').addClass('error').removeClass('good');
		}
		else if (user_id.length < 4 || user_id.length > 20) {
			elem.text('아이디는 4자에서 20자 사이로 입력하셔야 합니다.').addClass('error').removeClass('good');
		}
		else {
			var id_length = user_id.length;
			for (i = 0; i < id_length; i++) {
				if ((user_id.charAt(i) >= 'a' && user_id.charAt(i) <= 'z') || (user_id.charAt(i) >= '0' && user_id.charAt(i) <= '9')) {
					continue;
				}
				else {
					elem.text('아이디는 영문 소문자와 숫자만 사용하셔야 합니다. ').addClass('error').removeClass('good');
					return false;
				}
			}
			
			ftc.request.jsonp(ftc.urls.CHECK_USER_ID + user_id , {}, {
				onSuccess: function(response) {
					elem.text(response.msg).removeClass('error').addClass('good');
				},
				onFail: function(response) {
					elem.text(response.msg).addClass('error').removeClass('good');
				}
			});
		}
	}
	
	this.checkNick = function( user_nick ) {
		var elem = ftj('.ft_check_user_nick');
		user_nick = user_nick.trim();
		
		if (user_nick == '') {
			elem.text('닉네임을 입력하세요.').addClass('error').removeClass('good');
		}
		else if (user_nick.length < 2 || user_nick.length > 8) {
			elem.text('닉네임은 2자에서 8자 사이로 입력하셔야 합니다.').addClass('error').removeClass('good');
		}
		else {
			ftc.request.jsonp(ftc.urls.CHECK_USER_NICK + user_nick , {}, {
				onSuccess: function(response) {
					elem.text(response.msg).removeClass('error').addClass('good');
				},
				onFail: function(response) {
					elem.text(response.msg).addClass('error').removeClass('good');
				}
			});
		}
	}
}
ftc.module.email_notify = new function() {
	this.toggleCmt = function(elem) {
		var check = ftj(elem);

		if (check.is(':checked')) {
			if (ftc_user.email.trim() == '') {
				check.attr('checked', '');
				
				if (ftc_user.no > 0 ) {
					ftc.popup.showModal('아직 이메일 주소를 입력하지 않으셨군요!<br/>댓글들의 이메일 알림을 받아보시려면 <br/><a href="#" onclick="ftc.popup.close(#{key}); ftc.popup.manage_profile.show(); return false;">프로필 관리창</a>에서 이메일 주소를 입력해주세요!', ftc.strings.ERROR_TITLE);
				}
				else {
					ftc.showLogin('이메일 알림을 받으시려면 로그인 하셔야 합니다.');
				}
			}
		}
		
		return false;
	}
};

ftc.module.image = new function() {
	this.modules = ['IMAGE_ATTACH', 'IMAGE_FLICKR', 'IMAGE_NEWSBANK'];
	this.selected = 0;
	this.image = {};
	this.icon = 'http://image.tcomment.com/plugin/icon/attach_image_upload.gif';
	
	this.tab = function() {
	
		var tab_list = '<ul class="ft_module_image_tab"><li class="ft_module_image_tab_btn"><a href="#" onclick="ftc.module.image.select_tab(0); return false;" class="attach">이미지 업로드</a></li><li class="ft_module_image_tab_btn"><a href="#" onclick="ftc.module.image.select_tab(1); return false;" class="flickr">플리커 이미지</a></li><!--<li class="ft_module_image_tab_btn"><a href="#" onclick="ftc.module.image.select_tab(2); return false;" class="newsbank">뉴스뱅크 이미지</a></li>--></ul>';
		
		tab_list += ftc.markup.POPUP_IMAGE_ATTACH + ftc.markup.POPUP_IMAGE_FLICKR + ftc.markup.POPUP_IMAGE_NEWSBANK;
		
		return tab_list;
	}
	
	this.select_module = function(module) {
		
	}
	
	this.select_tab = function(tab) {
		ftj('#ft_popup_image .ft_module_image_tab_btn').removeClass('current').eq(tab).addClass('current');
		ftj('#ft_popup_image .ft_module_image_tab_body').hide().eq(tab).show();
		this.selected = tab;
	}
	
	this.get_image = function() {
		var module = this.modules[this.selected];
		
		if (module == 'IMAGE_FLICKR') {
			return ftc.module.image.flickr.current;
		}
		
		if (module == 'IMAGE_NEWSBANK') {
			return ftc.module.image.newsbank.current;
		}
	}
	
	this.reset = function() {
		//ftc.module.image.attach.reset();
		ftc.module.image.flickr.reset();
		ftc.module.image.newsbank.reset();
		
		this.selected = 0;
		this.image = null;
	}
	
	this.getImageInfo = function() {
		var module = this.modules[this.selected];
		var img = { src : '', type : '', icon : '' };
		
		if (module == 'IMAGE_ATTACH') {
			img.src = ftj('#ft_image_upload_preview').attr('src').replace('?width=240&height=180&method=fit', '');
			img.type = this.modules[this.selected];
			img.icon = this.icon;
		}
		else if (module == 'IMAGE_FLICKR') {
			current = ftc.module.image.flickr.current.photo;
			img.src = current.farm + '|' + current.server + '|' + current.id + '|' + current.secret + '|' + current.owner + '|' + current.title;
			img.type = module;
			img.icon = ftc.module.image.flickr.icon;
		}
		else if (module == 'IMAGE_NEWSBANK') {
			current = ftc.module.image.newsbank.current.photo;
			img.src = current.farm + '|' + current.server + '|' + current.id + '|' + current.secret + '|' + current.owner + '|' + current.title;
			img.type = module;
			img.icon = ftc.module.image.newsbank.icon;
		}
		
		return img;
	}; 
}

// ftc.module.image.flickr
ftc.module.image.flickr = new function() {
	this.photos = [];
	this.page = {};
	this.last_text = '';
	this.current = { page:0, index:-1, photo: {} };
	this.order = 'relevance';
	this.icon = 'http://image.tcomment.com/plugin/icon/attach_image_flickr.gif';
	
	this.search = function(page) {
		var term_input = ftj('#ft_popup_image_flickr_text');
		var term = term_input.val();
		var sort = this.order;
		
		if (page) {
			this.current.page = 1;
		}
		
		if (term == '') {
			ftc.popup.showModal(ftc.strings.FLICKR_NEED_TEXT, ftc.strings.ERROR_TITLE, {
				onOk: function() {
					if (ftc.module.image.flickr.last_text) {
						ftj('#ft_popup_image_flickr_text').val(ftc.module.image.flickr.last_text).focus();
					}
				}
			});
			
			
			
			return false;
		}
		else {
				if (term != this.last_text) {
				this.photos = [];
				this.page = {};
				this.current = { page:0, index:-1, photo: {} };
				this.last_text = term;
			}
			
			var progress = ftc.progress.showRound('#ft_popup_image_flickr_result', '이미지를 검색하는중...');
			
			ftc.request.jsonp(ftc.urls.FLICKR_SEARCH, { text : term, sort : sort, page : page }, {
				onSuccess: function(response) {
					var photos = response.photos;
					
					if (photos.total > 0) {
						ftc.module.image.flickr.page = {
							current : photos.page,
							total : photos.pages,
							item_per_page : photos.perpage,
							total_items : photos.total
						}
						
						//alert(photos.page);
						ftc.module.image.flickr.photos[photos.page] = items = photos.photo;
						
						ftj('#ft_popup_image_flickr_result').replaceWith(ftc.markup.POPUP_IMAGE_FLICKR_RESULT);
						var list = ftj('#ft_popup_image_flickr_result .ft_popup_image_flickr_result_list').first();
						
						for (var i in items) {
							var item = items[i];
							
							if (typeof(item) == 'object') {							
								//alert( 'page: ' + photos.page + ', index: ' + (i + 1) + ', farm_id : ' + item.farm + ', server_id: ' + item.server + ', id: ' + item.id + ', secret: ' + item.secret );
								var item_markup = ftc.utils.format(ftc.markup.POPUP_IMAGE_FLICKR_ITEM, { page: photos.page, index: i, farm_id : item.farm, server_id: item.server, id: item.id, secret: item.secret });
								
								ftj(item_markup).appendTo(list);
							}
						}
						
						num_page = 10;
						page_no = photos.page;
						max_page = photos.pages;
						
						start_page = 0;
						end_page = 0;
						
						start_page = page_no - 5;
						end_page = page_no + 5;
						
						
						if (end_page >= max_page) end_page = max_page;
						if (start_page < 1) start_page = 1;
						
						range = end_page - start_page + 1;
						
						if (range < num_page) {
							right = num_page - range;
							end_page += right;
							
							left = num_page - range;
							start_page -= left;
						}
						
						if (end_page >= max_page) end_page = max_page;
						if (start_page < 1) start_page = 1;
						
						left_pages = page_no - start_page;
						right_pages = end_page - page_no;
												
						markup = '<div class="ft_paginate">';
						for (var i = start_page; i <= end_page; i++) {
							if (i == page_no) {
								markup += '<strong>' + i + '</strong>';
							}
							else {
								markup += '<a href="#flickr_search_page_' + i + '" onclick="ftc.module.image.flickr.search(' + i + '); return false;">' + i + '</a>';
							}
						}
						markup += '</div>';
						
						ftj(markup).insertAfter(list);
					}
					else {
						ftc.popup.showModal(ftc.strings.FLICKR_NO_RESULT, ftc.strings.ERROR_TITLE);
						ftc.module.image.flickr.reset(true);
					}
				},
				onComplete: function() {
					progress.hide();
				}
			});
			
			return false;
		}
	}
	
	this.reset = function() {
		this.photos = [];
		this.page = {};
		this.current = { page:0, index:-1, photo: {} };
		this.last_text = '';
		this.order = 'relevance';
		
		ftj('#ft_popup_image_flickr_text').val('').focus();
		ftj('#ft_popup_image_flickr_result').replaceWith(ftc.markup.POPUP_IMAGE_FLICKR_EMPTY);
	}
	
	this.select = function(elem, page, index) {
		//alert(elem + ', ' + page + ', ' + index);
		this.current.page = page;
		this.current.index = index;
		this.current.photo = this.photos[page][index];
		
		ftj(elem).siblings().removeClass('current');
		ftj(elem).addClass('current');
	}
	
	this.sort = function(sort_value) {
		if (sort_value == 'relevance' ||
			sort_value == 'date-posted-asc' ||
			sort_value == 'interestingness-desc') {
		
			//alert(this.order + ', ' + sort_value);	
			if (this.order != sort_value) {
				this.order = sort_value;
				
				ftj('.ft_module_image_flickr_sort_' + sort_value).siblings().removeClass('current');
				ftj('.ft_module_image_flickr_sort_' + sort_value).addClass('current');
				
				if (ftj('#ft_popup_image_flickr_text').val() != '') {
					this.search();
				}
			}
		}
	}
};

// ftc.module.image.newsbank
ftc.module.image.newsbank = new function() {
	this.photos = [];
	this.page = {};
	this.last_text = '';
	this.current = { page:0, index:-1, photo: {} };
	this.order = 'relevance';
	this.icon = 'http://image.tcomment.com/plugin/icon/attach_image_newsbank.gif';
	
	this.search = function(page) {
		var term_input = ftj('#ft_popup_image_newsbank_text');
		var term = term_input.val();
		var sort = this.order;
		
		if (page) {
			this.current.page = 1;
		}
		
		if (term == '') {
			ftc.popup.showModal(ftc.strings.newsbank_NEED_TEXT, ftc.strings.ERROR_TITLE, {
				onOk: function() {
					if (ftc.module.image.newsbank.last_text) {
						ftj('#ft_popup_image_newsbank_text').val(ftc.module.image.newsbank.last_text).focus();
					}
				}
			});
			
			
			
			return false;
		}
		else {
				if (term != this.last_text) {
				this.photos = [];
				this.page = {};
				this.current = { page:0, index:-1, photo: {} };
				this.last_text = term;
			}
			
			var progress = ftc.progress.showRound('#ft_popup_image_newsbank_result', '이미지를 검색하는중...');
			
			ftc.request.jsonp(ftc.urls.newsbank_SEARCH, { text : term, sort : sort, page : page }, {
				onSuccess: function(response) {
					var photos = response.photos;
					
					if (photos.total > 0) {
						ftc.module.image.newsbank.page = {
							current : photos.page,
							total : photos.pages,
							item_per_page : photos.perpage,
							total_items : photos.total
						}
						
						//alert(photos.page);
						ftc.module.image.newsbank.photos[photos.page] = items = photos.photo;
						
						ftj('#ft_popup_image_newsbank_result').replaceWith(ftc.markup.POPUP_IMAGE_newsbank_RESULT);
						var list = ftj('#ft_popup_image_newsbank_result .ft_popup_image_newsbank_result_list').first();
						
						for (var i in items) {
							var item = items[i];
							
							if (typeof(item) == 'object') {							
								//alert( 'page: ' + photos.page + ', index: ' + (i + 1) + ', farm_id : ' + item.farm + ', server_id: ' + item.server + ', id: ' + item.id + ', secret: ' + item.secret );
								var item_markup = ftc.utils.format(ftc.markup.POPUP_IMAGE_newsbank_ITEM, { page: photos.page, index: i, farm_id : item.farm, server_id: item.server, id: item.id, secret: item.secret });
								
								ftj(item_markup).appendTo(list);
							}
						}
						
						num_page = 10;
						page_no = photos.page;
						max_page = photos.pages;
						
						start_page = 0;
						end_page = 0;
						
						start_page = page_no - 5;
						end_page = page_no + 5;
						
						
						if (end_page >= max_page) end_page = max_page;
						if (start_page < 1) start_page = 1;
						
						range = end_page - start_page + 1;
						
						if (range < num_page) {
							right = num_page - range;
							end_page += right;
							
							left = num_page - range;
							start_page -= left;
						}
						
						if (end_page >= max_page) end_page = max_page;
						if (start_page < 1) start_page = 1;
						
						left_pages = page_no - start_page;
						right_pages = end_page - page_no;
												
						markup = '<div class="ft_paginate">';
						for (var i = start_page; i <= end_page; i++) {
							if (i == page_no) {
								markup += '<strong>' + i + '</strong>';
							}
							else {
								markup += '<a href="#newsbank_search_page_' + i + '" onclick="ftc.module.image.newsbank.search(' + i + '); return false;">' + i + '</a>';
							}
						}
						markup += '</div>';
						
						ftj(markup).insertAfter(list);
					}
					else {
						ftc.popup.showModal(ftc.strings.newsbank_NO_RESULT, ftc.strings.ERROR_TITLE);
						ftc.module.image.newsbank.reset(true);
					}
				},
				onComplete: function() {
					progress.hide();
				}
			});
			
			return false;
		}
	}
	
	this.reset = function() {
		this.photos = [];
		this.page = {};
		this.current = { page:0, index:-1, photo: {} };
		this.last_text = '';
		this.order = 'relevance';
		
		ftj('#ft_popup_image_newsbank_text').val('').focus();
		ftj('#ft_popup_image_newsbank_result').replaceWith(ftc.markup.POPUP_IMAGE_newsbank_EMPTY);
	}
	
	this.select = function(elem, page, index) {
		//alert(elem + ', ' + page + ', ' + index);
		this.current.page = page;
		this.current.index = index;
		this.current.photo = this.photos[page][index];
		
		ftj(elem).siblings().removeClass('current');
		ftj(elem).addClass('current');
	}
	
	this.sort = function(sort_value) {
		if (sort_value == 'relevance' ||
			sort_value == 'date-posted-asc' ||
			sort_value == 'interestingness-desc') {
		
			//alert(this.order + ', ' + sort_value);	
			if (this.order != sort_value) {
				this.order = sort_value;
				
				ftj('.ft_module_image_newsbank_sort_' + sort_value).siblings().removeClass('current');
				ftj('.ft_module_image_newsbank_sort_' + sort_value).addClass('current');
				
				if (ftj('#ft_popup_image_newsbank_text').val() != '') {
					this.search();
				}
			}
		}
	}
};
var fsr = '';

// ftc.module.video
ftc.module.video = new function() {
	this.modules = ['VIDEO_YOUTUBE', 'VIDEO_DAUM']; //, 'VIDEO_MGOON', 'VIDEO_NATE'];
	this.module_names = ['유튜브 비디오', '다음 비디오']; //, '엠군 비디오', '네이트 비디오'];
	this.module_class = ['youtube', 'daum']; //, 'mgoon', 'nate']
	this.module_use = [true, true, false, false];
	
	this.selected = 0;
	this.video = {};
	
	this.tab = function() {
		var tab_list = '<ul class="ft_module_video_tab">\
			<li class="ft_module_video_tab_btn"><a href="#" onclick="ftc.module.video.select_tab(0); return false;" class="youtube">유튜브 비디오</a></li>\
			<li class="ft_module_video_tab_btn"><a href="#" onclick="ftc.module.video.select_tab(1); return false;" class="daum">다음 비디오</a></li>\
		</ul>';
		
		tab_list += ftc.markup.POPUP_VIDEO_YOUTUBE + ftc.markup.POPUP_VIDEO_DAUM;
		
		return tab_list;
	}
	
	this.select_module = function(module) {
		this.selected = module;
	}
	
	this.select_tab = function(tab) {
		ftj('#ft_popup_video .ft_module_video_tab_btn').removeClass('current').eq(tab).addClass('current');
		ftj('#ft_popup_video .ft_module_video_tab_body').hide().eq(tab).show();
		this.selected = tab;
	}
	
	this.get_module_obj = function(module) {
		if (module == 'VIDEO_YOUTUBE') {
			return ftc.module.video.youtube;
		}
		else if (module == 'VIDEO_DAUM') {
			return ftc.module.video.daum;
		}
		else if (module == 'VIDEO_MGOON') {
			return ftc.module.video.mgoon;
		}
		
		return false;
	}
	
	this.get_current_module_obj = function() {
		return this.get_module_obj(this.modules[this.selected]);
	}
	
	this.reset = function() {
		//ftc.module.video.reset();
		for(i = 0; i < this.modules.length; i++) {
			var module_obj = this.get_module_obj(this.modules[i]);
			module_obj.reset();
		}
		
		this.selected = 0;
		this.image = null;
	}
	
	this.getVideoInfo = function() {
		
		var module_obj = this.get_current_module_obj();
		
		var src =  module_obj.current.item.vid + '|' + module_obj.current.item.thumbnail + '|' + module_obj.current.item.title;
		
		return {
			src : src,
			type : this.modules[this.selected]
		};
	}
	
	this.get_element = function() {
		var vid = this.get_vid();
		
		if (vid) {
			var module_obj = this.get_current_module_obj();
			var elem = module_obj.get_element(vid);
			
			if (elem) {
				return elem;
			}
		}
		
		return false;
	}
}

// ftc.module.video.youtube
ftc.module.video.youtube = new function() {
	this.videos = [];
	this.page = {};
	this.last_text = '';
	this.current = { page:0, index:-1, item: {} };
	this.order = 'relevance';
	this.icon = 'http://video.tcomment.com/plugin/icon/attach_video_youtube.gif';
	
	this.search = function(page) {
		var term_input = ftj('#ft_popup_video_youtube_text');
		var term = term_input.val();
		var sort = this.order;
		
	
		// 검색어가 없을 경우
		if (term == '') {
			
			ftc.popup.showModal(ftc.strings.YOUTUBE_NEED_TEXT, ftc.strings.ERROR_TITLE, {
				onOk: function() {
					if (ftc.module.video.youtube.last_text) {
						ftj('#ft_popup_video_youtube_text').val(ftc.module.video.youtube.last_text).focus();
					}
				}
			});
			
			
			return false;
		}
		else {
			// 이전 검색
			if (term != this.last_text) {
				this.videos = [];
				this.page = {};
				this.current = { page:0, index:-1, photo: {} };
				this.last_text = term;
			}
			
			if (!page) page = 1;
			page = ((page - 1) * 6) + 1;
			
			ftj('.ft_popup_video_youtube_preview').children().remove();
			
			var progress = ftc.progress.showRound('#ft_popup_video_youtube_result', '동영상을 검색하는중...');
			
			ftc.urls.YOUTUBE_SEARCH = 'http://gdata.youtube.com/feeds/api/videos';
			
			ftc.request.jsonp_n(ftc.urls.YOUTUBE_SEARCH, { q : term, alt : 'json-in-script', 'max-results': 6, 'start-index': page}, {
				onSuccess: function(response) {
					var result = response.feed;
					
					var videos = [];
					videos.list = result.entry;
					
					if (result.openSearch$totalResults.$t > 0) {
					
						ftc.module.video.youtube.page = {
							current : parseInt(result.openSearch$startIndex.$t / result.openSearch$itemsPerPage.$t) + 1,
							total : parseInt(result.openSearch$totalResults.$t / result.openSearch$itemsPerPage.$t) + 1,
							item_per_page : result.openSearch$itemsPerPage.$t,
							total_items : result.openSearch$totalResults.$t
						};


						videos.page = ftc.module.video.youtube.page.current;
						items = videos.list;
						ftc.module.video.youtube.videos[videos.page] = [];
												
						// 창 초기화
						ftj('#ft_popup_video_youtube_result').replaceWith(ftc.markup.POPUP_VIDEO_YOUTUBE_RESULT);
						
						var list = ftj('#ft_popup_video_youtube_result .ft_popup_video_youtube_result_list').first();
						
						// 아이템 추가
						for (var i in items) {
							var item = items[i];
							
							if (typeof(item) == 'object') {	
								var thumbnail_url = item.media$group.media$thumbnail[0].url;
								
								var temp_item = {
									page : videos.page,
									index : i,
									vid : ftc.module.video.youtube.get_vid(item.link[0].href),
									url : item.link[0].href,
									thumbnail : thumbnail_url,
									title : item.title.$t
								};
	
								var item_markup = ftc.utils.format(ftc.markup.POPUP_VIDEO_YOUTUBE_ITEM, { page: videos.page, index: i, thumbnail_url : temp_item.thumbnail });
								
								ftj(item_markup).appendTo(list);
								
								ftc.module.video.youtube.videos[videos.page][i] = temp_item;
							}
						}
						
						num_page = 10;
						page_no = ftc.module.video.youtube.page.current;
						max_page = ftc.module.video.youtube.page.total;
						
						start_page = 0;
						end_page = 0;
						
						start_page = page_no - 5;
						end_page = page_no + 5;
						
						
						if (end_page >= max_page) end_page = max_page;
						if (start_page < 1) start_page = 1;
						
						range = end_page - start_page + 1;
						
						if (range < num_page) {
							right = num_page - range;
							end_page += right;
							
							left = num_page - range;
							start_page -= left;
						}
						
						if (end_page >= max_page) end_page = max_page;
						if (start_page < 1) start_page = 1;
						
						left_pages = page_no - start_page;
						right_pages = end_page - page_no;
												
						markup = '<div class="ft_paginate">';
						for (var i = start_page; i <= end_page; i++) {
							if (i == page_no) {
								markup += '<strong>' + i + '</strong>';
							}
							else {
								markup += '<a href="#youtube_search_page_' + i + '" onclick="ftc.module.video.youtube.search(' + i + '); return false;">' + i + '</a>';
							}
						}
						markup += '</div>';
						
						ftj(markup).insertAfter('#ft_popup_video_youtube_result .ft_popup_video_youtube_preview');
					}
					else {
						ftc.popup.showModal(ftc.strings.YOUTUBE_NO_RESULT, ftc.strings.ERROR_TITLE);
						ftc.module.video.youtube.reset(true);
					}
				},
				onComplete: function() {
					progress.hide();
				}
			}, 'callback'
			);
			
			return false;
		}
	}
	
	this.reset = function() {
		this.videos = [];
		this.page = {};
		this.current = { page:0, index:-1, item: {} };
		this.last_text = '';
		this.order = 'relevance';
		
		ftj('#ft_popup_video_youtube_text').val('').focus();
		ftj('#ft_popup_video_youtube_result').replaceWith(ftc.markup.POPUP_VIDEO_YOUTUBE_EMPTY);
	}
	
	this.select = function(elem, page, index) {
		//alert(elem + ', ' + page + ', ' + index);
		// 선택 정보 저장
		this.current.page = page;
		this.current.index = index;
		this.current.item = this.videos[page][index];
		
		var src = this.get_element(this.current.item.vid);
		
		var preview = ftj('.ft_popup_video_youtube_preview').first();

		preview.children().remove();
		preview.append(src);
		//ftj(src).appendTo(preview);
		//console.log(this.current.item.vid);
		//console.log(src);
		
		// 엘리먼트 선택 표시
		ftj(elem).siblings().removeClass('current');
		ftj(elem).addClass('current');
	}
	
	this.sort = function(sort_value) {
		if (sort_value == 'relevance' ||
			sort_value == 'date-posted-asc' ||
			sort_value == 'interestingness-desc') {
		
			//alert(this.order + ', ' + sort_value);	
			if (this.order != sort_value) {
				this.order = sort_value;
				
				ftj('.ft_module_video_youtube_sort_' + sort_value).siblings().removeClass('current');
				ftj('.ft_module_video_youtube_sort_' + sort_value).addClass('current');
				
				if (ftj('#ft_popup_video_youtube_text').val() != '') {
					this.search();
				}
			}
		}
	}
	
	this.get_vid = function(src) {
		var extracted = src.match(/v=([\w-]+)/);
		
		if (extracted) {
			var vid = extracted[1];
			
			if (vid)
				return vid;
		}
		
		return false;
	}
	
	this.get_element = function(vid) {
		var html = '<object width="210" height="196" type="application/x-shockwave-flash" data="http://www.youtube.com/v/' + vid + '"><param name="movie" value="http://www.youtube.com/v/' + vid + '" /></object>';
		return html;
	}
}

// ftc.module.video.daum
ftc.module.video.daum = new function() {
	this.videos = [];
	this.page = {};
	this.last_text = '';
	this.current = { page:0, index:-1, item: {} };
	this.order = 'exact';
	this.icon = 'http://video.tcomment.com/plugin/icon/attach_video_daum.gif';
	
	this.search = function(page) {
		var term_input = ftj('#ft_popup_video_daum_text');
		var term = term_input.val();
		var sort = this.order;
		
		// 검색어가 없을 경우
		if (term == '') {
			
			ftc.popup.showModal(ftc.strings.DAUM_NEED_TEXT, ftc.strings.ERROR_TITLE, {
				onOk: function() {
					if (ftc.module.video.daum.last_text) {
						ftj('#ft_popup_video_daum_text').val(ftc.module.video.daum.last_text).focus();
					}
				}
			});
			
			
			return false;
		}
		else {
			// 이전 검색
			if (term != this.last_text) {
				this.videos = [];
				this.page = {};
				this.current = { page:0, index:-1, photo: {} };
				this.last_text = term;
			}
			
			if (!page) page = 1;
			
			ftj('.ft_popup_video_daum_preview').children().remove();
			
			var progress = ftc.progress.showRound('#ft_popup_video_daum_result', '동영상을 검색하는중...');
			
			ftc.urls.DAUM_SEARCH = 'http://apis.daum.net/search/vclip';
						
			ftc.request.jsonp_n(ftc.urls.DAUM_SEARCH, { q : term, 'result': 6, 'pageno': page, 'sort': this.order, output: 'json', 'apikey': 'a44d772f371eedf3847c580e727b224c1800c2de'}, {
				onSuccess: function(response) {
					var result = response.channel;
					
					var videos = [];
					videos.list = result.item;
					
					if (result.totalCount > 0) {
					
						ftc.module.video.daum.page = {
							current : result.pageno,
							total : parseInt(result.totalCount / result.result) + 1,
							item_per_page : result.result,
							total_items : result.totalCount
						};
						
						videos.page = ftc.module.video.daum.page.current;
						items = videos.list;
						ftc.module.video.daum.videos[videos.page] = [];
												
						// 창 초기화
						ftj('#ft_popup_video_daum_result').replaceWith(ftc.markup.POPUP_VIDEO_DAUM_RESULT);
						
						var list = ftj('#ft_popup_video_daum_result .ft_popup_video_daum_result_list').first();
						
						// 아이템 추가
						for (var i in items) {
							var item = items[i];
							
							if (typeof(item) == 'object') {	
								var thumbnail_url = item.thumbnail;
								
								var temp_item = {
									page : videos.page,
									index : i,
									vid : ftc.module.video.daum.get_vid(item.player_url),
									url : item.player_url,
									thumbnail : thumbnail_url,
									title : item.title
								};
								
								var item_markup = ftc.utils.format(ftc.markup.POPUP_VIDEO_DAUM_ITEM, { page: videos.page, index: i, thumbnail_url : temp_item.thumbnail });
								
								ftj(item_markup).appendTo(list);
								
								ftc.module.video.daum.videos[videos.page][i] = temp_item;
							}
						}
						
						num_page = 10;
						page_no = parseInt(ftc.module.video.daum.page.current);
						max_page = parseInt(ftc.module.video.daum.page.total);
						
						start_page = 0;
						end_page = 0;
						
						start_page = page_no - 5;
						end_page = page_no + 5;
						
						
						if (end_page >= max_page) end_page = max_page;
						if (start_page < 1) start_page = 1;
						
						range = end_page - start_page + 1;
						
						if (range < num_page) {
							right = num_page - range;
							end_page += right;
							
							left = num_page - range;
							start_page -= left;
						}
						
						if (end_page >= max_page) end_page = max_page;
						if (start_page < 1) start_page = 1;
						
						left_pages = page_no - start_page;
						right_pages = end_page - page_no;
												
						markup = '<div class="ft_paginate">';
						for (var i = start_page; i <= end_page; i++) {
							if (i == page_no) {
								markup += '<strong>' + i + '</strong>';
							}
							else {
								markup += '<a href="#daum_search_page_' + i + '" onclick="ftc.module.video.daum.search(' + i + '); return false;">' + i + '</a>';
							}
						}
						markup += '</div>';
						
						ftj(markup).insertAfter('#ft_popup_video_daum_result .ft_popup_video_daum_preview');
					}
					else {
						ftc.popup.showModal(ftc.strings.DAUM_NO_RESULT, ftc.strings.ERROR_TITLE);
						ftc.module.video.daum.reset(true);
					}
				},
				onComplete: function() {
					progress.hide();
				}
			}, 'callback'
			);
			
			return false;
		}
	}
	
	this.reset = function() {
		this.videos = [];
		this.page = {};
		this.current = { page:0, index:-1, item: {} };
		this.last_text = '';
		this.order = 'exact';
		
		ftj('#ft_popup_video_daum_text').val('').focus();
		ftj('#ft_popup_video_daum_result').replaceWith(ftc.markup.POPUP_VIDEO_DAUM_EMPTY);
	}
	
	this.select = function(elem, page, index) {
		//alert(elem + ', ' + page + ', ' + index);
		// 선택 정보 저장
		this.current.page = page;
		this.current.index = index;
		this.current.item = this.videos[page][index];
		
		var src = this.get_element(this.current.item.vid);
		
		var preview = ftj('.ft_popup_video_daum_preview').first();

		preview.children().remove();
		preview.append(src);
		//ftj(src).appendTo(preview);
		//console.log(this.current.item.vid);
		//console.log(src);
		
		// 엘리먼트 선택 표시
		ftj(elem).siblings().removeClass('current');
		ftj(elem).addClass('current');
	}
	
	this.sort = function(sort_value) {
		if (sort_value == 'exact' ||
			sort_value == 'date' ||
			sort_value == 'recommend') {
		
			//alert(this.order + ', ' + sort_value);	
			if (this.order != sort_value) {
				this.order = sort_value;
				
				ftj('.ft_module_video_daum_sort_' + sort_value).siblings().removeClass('current');
				ftj('.ft_module_video_daum_sort_' + sort_value).addClass('current');
				
				if (ftj('#ft_popup_video_daum_text').val() != '') {
					this.search();
				}
			}
		}
	}
	
	this.get_vid = function(src) {
		var extracted = src.match(/vid=([\w-]+)/);
		
		if (extracted) {
			var vid = extracted[1] + '$';
			
			if (vid)
				return vid;
		}
		
		return false;
	}
	
	this.get_element = function(vid) {
		var html = '<object type="application/x-shockwave-flash" width="210px" height="196px" align="middle" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=8,0,0,0"><param name="movie" value="http://flvs.daum.net/flvPlayer.swf?vid=' + vid + '" /><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="true" /><param name="bgcolor" value="#000000" /><embed src="http://flvs.daum.net/flvPlayer.swf?vid=' + vid + '" width="210px" height="196px" allowScriptAccess="always" type="application/x-shockwave-flash" allowFullScreen="true" bgcolor="#000000" ></embed></object>';
		return html;
	}
}

// ftc.module.video.mgoon
ftc.module.video.mgoon = new function() {
	this.list = [];
	this.page = {};
	this.last_text = '';
	this.current = { page:0, index:-1, item: {} };
	this.order = 'relevance';
	this.icon = 'http://video.tcomment.com/plugin/icon/attach_video_mgoon.gif';
	
	this.reset = function() {
		this.list = [];
		this.page = {};
		this.current = { page:0, index:-1, photo: {} };
		this.last_text = '';
		this.order = 'relevance';
	}
	
	this.get_vid = function(src) {
		var extracted = src.match(/id=([\w-]+)/);

		if (extracted) {
			var vid = extracted[1];

			if (vid)
				return vid;
		}
		else {
			var vid = src.replace('http://video.mgoon.com/', '');
			
			if (vid)
				return vid;
		}
		
		return false;
	}
	
	this.get_element = function(vid) {
		var html = '<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0" width="240" height="180" id="viewpage" align="middle"> <param name="allowScriptAccess" value="always"> <param name="allowFullScreen" value="true"> <param name="movie" value="http://play.mgoon.com/Video/V' + vid + '/"> <param name="FlashVars" value="viral=N"><param name="quality" value="high"> <param name="wmode" value="transparent"><embed src="http://play.mgoon.com/Video/V' + vid + '/" flashvars="viral=N" wmode="transparent" quality="high" width="240" height="180" allowfullscreen="true" name="viewplayer" id="viewplayer" align="middle" allowscriptaccess="always" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer"></object>';
		
		return html;
	}
};

ftc.module.realname = new function() {
	
}



ftc.module.realname.phone = new function() {
	
	this.begin = function() {
		//this.reset();
		this.step = 1;
		
		var module_form = ftj('#ft_realname_phone');
		if (module_form.length > 0) {
			var soc_no1		= module_form.find('input[name=soc_no1]').val().trim();
			var soc_no2		= module_form.find('input[name=soc_no2]').val().trim();
			var phone_comp	= module_form.find('select[name=phone_comp]').val().trim();
			var phone_no1	= module_form.find('select[name=phone_no1]').val().trim();
			var phone_no2	= module_form.find('input[name=phone_no2]').val().trim();
			var phone_no3	= module_form.find('input[name=phone_no3]').val().trim();
			var user_name	= module_form.find('input[name=user_realname]').val().trim();
			
			if (!user_name) { alert('이름을 입력하세요.'); module_form.find('input[name=user_realname]').focus(); return false; }
			if (!soc_no1 || isNaN(soc_no1)) { alert('주민등록번호를 입력하세요.'); module_form.find('input[name=soc_no1]').focus(); return false; }
			if (!soc_no2 || isNaN(soc_no2)) { alert('주민등록번호를 입력하세요.'); module_form.find('input[name=soc_no2]').focus(); return false; }
			if (!phone_comp || isNaN(phone_comp)) { alert('통신사를 선택하세요.'); module_form.find('select[name=phone_comp]').focus(); return false; }
			if (!phone_no1 || isNaN(phone_no1)) { alert('전화번호를 입력하세요.'); module_form.find('select[name=phone_no1]').focus(); return false; }
			if (!phone_no2 || isNaN(phone_no2)) { alert('전화번호를 입력하세요.'); module_form.find('input[name=phone_no2]').focus(); return false; }
			if (!phone_no3 || isNaN(phone_no3)) { alert('전화번호를 입력하세요.'); module_form.find('input[name=phone_no3]').focus(); return false; }
					
			this.soc_no = soc_no1 + soc_no2;
			this.phone_comp = phone_comp;
			this.phone_no = phone_no1 + phone_no2 + phone_no3;
			this.user_name = user_name;
			
			module_form.find('input[name=user_realname]').attr('readonly', 'readonly').addClass('disabled');
			module_form.find('input[name=soc_no1]').attr('readonly', 'readonly').addClass('disabled');
			module_form.find('input[name=soc_no2]').attr('readonly', 'readonly').addClass('disabled');
			module_form.find('select[name=phone_comp]').attr('readonly', 'readonly').addClass('disabled');
			module_form.find('select[name=phone_no1]').attr('readonly', 'readonly').addClass('disabled');
			module_form.find('input[name=phone_no2]').attr('readonly', 'readonly').addClass('disabled');
			module_form.find('input[name=phone_no3]').attr('readonly', 'readonly').addClass('disabled');
			module_form.find('#ft_realname_phone_get_auth_no').text("인증코드 다시 받기");
			
			var data = { soc_no: this.soc_no, phone_comp: this.phone_comp, phone_no: this.phone_no, user_name: this.user_name };
			var api_url = ftc.urls.WWW_HOST + '/realname/phone/begin';
			var _this = this;
			
			ftc.request.jsonp(api_url, data, {
				onSuccess: function(response) {
					_this.req_id = response.req_id;
					_this.res_id = response.res_id;
					
					alert('인증코드를 휴대폰으로 전송 하였습니다.');
					
					// 인증코드 입력창에 포커스
					module_form.find('input[name=auth_no]').val('').attr('readonly', '').removeClass('disabled');
					module_form.find('input[name=auth_no]').focus();					
				},
				onFail: function(response) {
					alert('휴대폰 인증 코드를 요청할 수 없습니다.\n오류코드 : ' + response.code + '\n오류내용 : ' +  response.msg);
				}
			});
		}
	}
	
	this.check = function() {
		
		if (this.finished == true) {
			alert('이미 인증 되었습니다.');
			return false;
		}
		else if (this.step == 0) {
			alert('인증 코드를 요청해주세요.');
			return false;
		}
		else if (this.step == 1) {
			this.step = 2;
		}
		else if (this.step == 2) {
			alert('인증코드를 확인하는 중입니다...');
			return false;
		}
		
		var module_form = ftj('#ft_realname_phone');
		if (module_form.length > 0) {
			var auth_no		= module_form.find('input[name=auth_no]').val().trim();
			
			if (!auth_no || isNaN(auth_no)) { alert('인증코드를 입력하세요.'); module_form.find('input[name=user_realname]').focus(); return false; }
					
			this.auth_no = auth_no;
			
			module_form.find('input[name=auth_no]').attr('readonly', 'readonly').addClass('disabled');
			module_form.find('#ft_realname_phone_get_auth_check').text("인증코드 확인중...");
			
			var data = { soc_no: this.soc_no, auth_no: this.auth_no, req_id: this.req_id, res_id: this.res_id };
			var api_url = ftc.urls.WWW_HOST + '/realname/phone/check';
			var _this = this;
			
			ftc.request.jsonp(api_url, data, {
				onSuccess: function(response) {
					alert('인증 코드가 정상적으로 확인 되었습니다..');
					module_form.find('#ft_realname_phone_get_auth_check').text("인증코드 확인 완료");
					
					// 인증 후 할일 처리
					_this.finished = true;
					
					ftc.topenid.finishAuth('phone', _this.req_id, _this.res_id);
				},
				onFail: function(response) {
					alert('휴대폰 인증 코드를 확인할 수 없습니다.\n오류코드 : ' + response.code + '\n오류내용 : ' +  response.msg);
					
					_this.step = 1;
					// 폼 활성화
					module_form.find('input[name=auth_no]').attr('readonly', '').removeClass('disabled').focus();
					module_form.find('#ft_realname_phone_get_auth_check').text("인증코드 확인");
				}
			});

		}
	}
	
	this.reset = function() {
		this.req_id = '';
		this.res_id = '';
		this.auth_no = '';
		this.soc_no = '';
		this.user_name = '';
		this.phone_no = '';
		this.phone_comp = '';
		this.step = 0;
		this.finished = false;
		
		var module_form = ftj('#ft_realname_phone');
		if (module_form.length > 0) {
						module_form.find('input[name=soc_no1]').val('').attr('readonly', '').removeClass('disabled');
			module_form.find('input[name=soc_no2]').val('').attr('readonly', '').removeClass('disabled');
			module_form.find('select[name=phone_comp]').val('').attr('readonly', '').removeClass('disabled');
			module_form.find('select[name=phone_no1]').val('').attr('readonly', '').removeClass('disabled');
			module_form.find('input[name=phone_no2]').val('').attr('readonly', '').removeClass('disabled');
			module_form.find('input[name=phone_no3]').val('').attr('readonly', '').removeClass('disabled');
			module_form.find('input[name=user_realname]').val('').attr('readonly', '').removeClass('disabled');
			module_form.find('input[name=auth_no]').val('').attr('readonly', 'readonly').addClass('disabled');
			module_form.find('#ft_realname_phone_get_auth_no').text("인증코드 받기");
			module_form.find('#ft_realname_phone_get_auth_check').text("인증코드 확인");
		}
	}
}


ftc.module.realname.ipin = new function() {
	this.begin = function() {
		var api_url = ftc.urls.WWW_HOST + '/realname/ipin/begin';
		
		this.popup_ipin = window.open(api_url, 'popupIPIN2', 'width=450,height=550,top=100,left=100,fullscreen=no,menubar=no,status=no,toolbar=no,titlebar=yes,location=no,scrollbar=no');
		
		ftc.module.realname.ipin.wait();
	}
	
	this.wait = function() {
		if (!ftc.module.realname.ipin.popup_ipin.closed) {
			clearTimeout(ftc.module.realname.ipin._timeout);
			ftc.module.realname.ipin._timeout = setTimeout(ftc.module.realname.ipin.wait, 500);
		}
		else {
			clearTimeout(ftc.module.realname.ipin._timeout);
			ftc.module.realname.ipin.check();
		}
	}
	
	this.check = function() {
		var api_url = ftc.urls.WWW_HOST + '/realname/ipin/check';
		var _this = this;
		
		ftc.request.jsonp(api_url, {}, {
			onSuccess: function(response) {
				alert('IPIN 인증이 완료되었습니다.');
				var module_form = ftj('#ft_realname_phone');
				module_form.find('#ft_realname_phone_get_auth_check').text("인증코드 확인 완료").attr('disabled', 'disabled');
				
								ftj('#ft_realname_ipin input[name=user_realname]').val(response.name);
				ftc.topenid.finishAuth('ipin', response.req_id, response.enc_data);
			},
			onFail: function(response) {
				alert('IPIN 인증을 확인할 수 없습니다.');
				_this.reset();
			}
		});
	}
	
	this.reset = function() {
		ftj('#ft_realname_ipin input[name=user_realname]').val('');
	}
	
	
};

ftc.urls.TWITTER_MODULE_CONNECT = 'http://plugin.tcomment.com/osu/twitter/connect';
ftc.urls.TWITTER_MODULE_CHECK_FINISH = 'http://plugin.tcomment.com/osu/twitter/check_finish';
ftc.urls.TWITTER_MODULE_DISCONNECT = 'http://plugin.tcomment.com/osu/twitter/disconnect';
ftc.urls.TWITTER_MODULE_RT_CMT = 'http://plugin.tcomment.com/osu/twitter/rt_cmt';
ftc.urls.TWITTER_MODULE_RT_POST = 'http://plugin.tcomment.com/osu/twitter/rt_post';

// ftc.module.twitter
ftc.module.twitter = new function() {
	this.rt_cmt_flag = false;
	
	// 연결
	this.connect = function(pos) {
		var _this = this;
		var params = 'location=0,status=0,width=800,height=650,scrolling=yes';
		var check = ftj('input[name=twitter_connection]');
		ftc.popup.osu_login.close();
		
		this.window = window.open(ftc.urls.TWITTER_MODULE_CONNECT, 'twitterWindow', params);
		this.interval = window.setInterval(function() {
			if (ftc.module.twitter.window.closed) {
				ftc.user.checkAuth();
				ftc.popup.osu_login.close();
				window.clearInterval(ftc.module.twitter.interval);

        if(ft_site_key == '73cc98ea400d58289d32dfde7050c8c382adeab8' || ft_site_key == '19a83daed111969f376762beff9fac6af0c965d7' || ft_site_key == 'e815465c30b6949c5c02a0592b2ea56b0f9f8c74'){  // 넥스브레인 KT 이벤트

        window.open('http://twitter.com/','twitter_ttalk');
        }

			}
		}, 1000);
	}
	
	// 
	this.disconnect = function() {
		var check = ftj('input[name=twitter_connection]');
		
		ftc.request.jsonp(ftc.urls.TWITTER_MODULE_DISCONNECT, {}, {
			onSuccess: function(response) {
				var is_connected = response.connected;
				if (check.length) {
					check.attr('checked', '');
					ftj('#ft_profile_twitter_status').text('트위터에 연결하시려면 왼쪽 체크박스에 선택하세요.');
					ftc.popup.showModal('트위터 연결을 해제하였습니다.', ftc.strings.ERROR_TITLE);
				}
			},
			onFail: function(response) {
				ftc.popup.showModal(response.msg, ftc.strings.ERROR_TITLE);
			}
		});
	}
	
	// 
	this.rt_cmt = function(comment_no) {
		if (this.rt_cmt_flag == true) {
			alert('지금 댓글을 리트윗 하는 중입니다...');
			return false;
		}
		
		this.rt_cmt_flag = true;
		
		ftc.request.jsonp(ftc.urls.TWITTER_MODULE_RT_CMT, {comment_no : comment_no}, {
			onSuccess: function(response) {
				alert('댓글을 리트윗 하였습니다.');
			},
			onFail: function(response) {
				alert('댓글을 리트윗 할 수 없습니다.\nERROR : ' + response.msg);
			},
			onComplete: function() {
				ftc.module.twitter.rt_cmt_flag = false;
			}
		});
	}
	
	// 
	this.rt_post = function() {
	
	}
};
ftc.urls.FACEBOOK_CONNECT = 'http://plugin.tcomment.com/osu/facebook/connect';
ftc.urls.FACEBOOK_CHECK_FINISH = 'http://plugin.tcomment.com/osu/facebook/check_finish';
ftc.urls.FACEBOOK_DISCONNECT = 'http://plugin.tcomment.com/osu/facebook/disconnect';

// ftc.module.facebook
ftc.module.facebook = new function() {
	
	// 연결
	this.connect = function(pos) {
		var _this = this;
		var params = 'location=0,status=0,width=964,height=565';
		var check = ftj('input[name=facebook_connection]');
		ftc.popup.osu_login.close();
		
		this.window = window.open(ftc.urls.FACEBOOK_CONNECT, 'facebookWindow', params);
		this.interval = window.setInterval(function() {
			if (ftc.module.facebook.window.closed) {
				ftc.user.checkAuth();
				ftc.popup.osu_login.close();
				window.clearInterval(ftc.module.facebook.interval);

        if(ft_site_key == '73cc98ea400d58289d32dfde7050c8c382adeab8' || ft_site_key == '19a83daed111969f376762beff9fac6af0c965d7' || ft_site_key == 'e815465c30b6949c5c02a0592b2ea56b0f9f8c74'){  // 넥스브레인 KT 이벤트

        window.open('http://www.facebook.com/','facebook_ttalk');
        }
			}
		}, 1000);
	}
	
	this.disconnect = function() {
		var check = ftj('input[name=facebook_connection]');
		
		ftc.request.jsonp(ftc.urls.FACEBOOK_DISCONNECT, {}, {
			onSuccess: function(response) {
				var is_connected = response.connected;
				if (check.length) {
					check.attr('checked', '');
					ftj('#ft_profile_facebook_status').text('페이스북에 연결하시려면 왼쪽 체크박스에 선택하세요.');
					ftc.popup.showModal('페이스북 연결을 해제하였습니다.', ftc.strings.ERROR_TITLE);
				}
			},
			onFail: function(response) {
				ftc.popup.showModal(response.msg, ftc.strings.ERROR_TITLE);
			}
		});
	}
};
ftc.urls.GOOGLE_CONNECT = 'http://plugin.tcomment.com/osu/google/connect';
ftc.urls.GOOGLE_CHECK_FINISH = 'http://plugin.tcomment.com/osu/google/check_finish';
ftc.urls.GOOGLE_DISCONNECT = 'http://plugin.tcomment.com/osu/google/disconnect';

// ftc.module.me2day
ftc.module.google = new function() {

	// 연결
	this.connect = function(pos) {
		var _this = this;
		var params = 'location=0,status=0,width=300,height=250';
		ftc.popup.osu_login.close();

		this.window = window.open(ftc.urls.GOOGLE_CONNECT, 'googleWindow', params);
		this.interval = window.setInterval(function() {
			if (ftc.module.google.window.closed) {
				ftc.user.checkAuth();
				ftc.popup.osu_login.close();
				window.clearInterval(ftc.module.google.interval);
			}
		}, 1000);
	}
};
ftc.urls.ME2DAY_CONNECT = 'http://plugin.tcomment.com/osu/me2day/connect';
ftc.urls.ME2DAY_CHECK_FINISH = 'http://plugin.tcomment.com/osu/me2day/check_finish';
ftc.urls.ME2DAY_DISCONNECT = 'http://plugin.tcomment.com/osu/me2day/disconnect';

// ftc.module.me2day
ftc.module.me2day = new function() {

	// 연결
	this.connect = function(pos) {
		var _this = this;
		var params = 'location=0,status=0,width=980,height=570';
		ftc.popup.osu_login.close();

		this.window = window.open(ftc.urls.ME2DAY_CONNECT, 'me2dayWindow', params);
		this.interval = window.setInterval(function() {
			if (ftc.module.me2day.window.closed) {
				ftc.user.checkAuth();
				ftc.popup.osu_login.close();
				window.clearInterval(ftc.module.me2day.interval);
        
		if(ft_site_key == '73cc98ea400d58289d32dfde7050c8c382adeab8' || ft_site_key == '19a83daed111969f376762beff9fac6af0c965d7' || ft_site_key == 'e815465c30b6949c5c02a0592b2ea56b0f9f8c74'){  // 넥스브레인 KT 이벤트

        	window.open('http://me2day.net/','me2day_ttalk');
        }
			}
		}, 1000);
	}
};
ftc.urls.YAHOO_CONNECT = 'http://plugin.tcomment.com/osu/yahoo/connect';
ftc.urls.YAHOO_CHECK_FINISH = 'http://plugin.tcomment.com/osu/yahoo/check_finish';
ftc.urls.YAHOO_DISCONNECT = 'http://plugin.tcomment.com/osu/yahoo/disconnect';

// ftc.module.yahoo
ftc.module.yahoo = new function() {
	// 연결
	this.connect = function(pos) {
		var _this = this;
		var params = 'location=0,status=0,width=500,height=530';
		var check = ftj('input[name=yahoo_connection]');
		ftc.popup.osu_login.close();
		
		this.window = window.open(ftc.urls.YAHOO_CONNECT, 'yahooWindow', params);
		this.interval = window.setInterval(function() {
			if (ftc.module.yahoo.window.closed) {
				ftc.user.checkAuth();
				ftc.popup.osu_login.close();
				window.clearInterval(ftc.module.yahoo.interval);
			}
		}, 1000);
	}
	
	this.disconnect = function() {
		var check = ftj('input[name=yahoo_connection]');
		
		ftc.request.jsonp(ftc.urls.YAHOO_DISCONNECT, {}, {
			onSuccess: function(response) {
				var is_connected = response.connected;
				if (check.length) {
					check.attr('checked', '');
					ftj('#ft_profile_yahoo_status').text('트위터에 연결하시려면 왼쪽 체크박스에 선택하세요.');
					ftc.popup.showModal('트위터 연결을 해제하였습니다.', ftc.strings.ERROR_TITLE);
				}
			},
			onFail: function(response) {
				ftc.popup.showModal(response.msg, ftc.strings.ERROR_TITLE);
			}
		});
	}
};

// ftc.partner
ftc.partner = new function() {

}

// ftc.partner.plain
ftc.partner.plain = new function() {
	this.init = function() {
		ftc.user.checkAuth();
	}
	
	this.logout = function() {
		ftc.user.logout();
	}
}

//ftc.partner.twitter
ftc.partner.twitter = new function() {
	
	this.toggleCmt = function(elem) {
		var check = ftj(elem);
		
		var _this = this;

		if (check.is(':checked')) {
			ftc.request.jsonp(ftc.urls.TWITTER_CHECK, {}, {
				onSuccess: function(response) {
					var is_connected = response.connected;

					if (is_connected) {
						check.attr('checked', 'checked');
					}
					else {
						check.attr('checked', '');
						_this.connect();
					}
				},
				onFail: function(response) {
					check.attr('checked', '');
					if (ftc_user.no > 0) {
						ftc.popup.showModal(response.msg + '<br/>트위터에 연결하시려면 <a href="#" onclick="ftc.popup.close(#{key}); ftc.popup.manage_profile.show(); return false;">프로필 관리창</a>에서 연결해주세요!', ftc.strings.ERROR_TITLE);
					}
					else {
						ftc.showLogin('트위터에 연결 하시려면 로그인 하셔야 합니다.');
					}
				}
			});
		}
		else {
			check.attr('checked', '');
		}
		
		return false;
	}
	
	this.toggleConnect = function(elem) {
		var check = ftj(elem);
		
		if (check.is(':checked')) {
			this.connect();
		}
		else {
			this.disconnect();
		}
		
		return false;
	}
	
	this.checkConnect = function() {
		var check = ftj('input[name=twitter_connection]');
		
		ftc.request.jsonp(ftc.urls.TWITTER_CHECK, {}, {
			onSuccess: function(response) {
				var is_connected = response.connected;

				if (is_connected) {
					check.attr('checked', 'checked');
					ftj('#ft_profile_twitter_status').text('"' + response.nick + '" 으로 트위터에 연결되어 있습니다.');
				}
				else {
					check.attr('checked', '');
					ftj('#ft_profile_twitter_status').text('트위터에 연결하시려면 왼쪽 체크박스에 선택하세요.');
				}
			},
			onFail: function(response) {
				check.attr('checked', '');
				ftj('#ft_profile_twitter_status').text('트위터에 연결하시려면 왼쪽 체크박스에 선택하세요.');
			}
		});
	}
	
	this.connect = function(pos) {
		var params = 'location=0,status=0,width=800,height=450';
		var check = ftj('input[name=twitter_connection]');
		
		this.window = window.open(ftc.urls.TWITTER_CONNECT, 'twitterWindow', params);
		this.interval = window.setInterval(function() {
			if (!ftc.partner.twitter.window.closed) { return; }
			window.clearInterval(ftc.partner.twitter.interval);
			
			ftc.request.jsonp(ftc.urls.TWITTER_CHECK, {}, {
				onSuccess: function(response) {
					var is_connected = response.connected;
					var check = ftj('input[name=twitter_connection]');
						
					if (is_connected) {
						ftc.popup.showModal('트위터에 연결하였습니다.', ftc.strings.ERROR_TITLE);
						
						if (check.length) {
							check.attr('checked', 'checked');
							ftj('#ft_profile_twitter_status').text('"' + response.nick + '" 으로 트위터에 연결되어 있습니다.');
						}
					}
					else {						
						check.attr('checked', '');
					}
				},
				onFail: function(response) {
					check.attr('checked', '');
				}
			});
		}, 1000);
	}
	
	this.disconnect = function() {
		var check = ftj('input[name=twitter_connection]');
		
		ftc.request.jsonp(ftc.urls.TWITTER_DISCONNECT, {}, {
			onSuccess: function(response) {
				var is_connected = response.connected;
				if (check.length) {
					check.attr('checked', '');
					ftj('#ft_profile_twitter_status').text('트위터에 연결하시려면 왼쪽 체크박스에 선택하세요.');
					ftc.popup.showModal('트위터 연결을 해제하였습니다.', ftc.strings.ERROR_TITLE);
				}
			},
			onFail: function(response) {
				ftc.popup.showModal(response.msg, ftc.strings.ERROR_TITLE);
			}
		});
	}
}

ftc.partner.hani = new function() {
	this.name = "한겨례.";
	this.id = 'hani';
	this.is_connected = false;
	this.need_connection = false;
	this.connect_direction = null;
	this.is_login = false;
	this.cookie_options = { domain: '.hani.co.kr', path : '/' };
	this.realname_policy_url = "";
	
	this.btn = null;
	this.modules = null;
	this.cmtbox_attached = false;
	
	this.option = {
		use_email_notify : true,
		use_twitter_notify : true,
		use_attach_image : true,
		use_attach_video: true,
		use_ccash : true
	}
	
	this.init = function() {
		//ftc.partner = ftc.partner.hani;

		ftc.popup.topenid = ftc.partner.hani.showPopup;
		
		// append style
		ftj('head').append('<style type="text/css"> \
		.ft_cmtbox_topinfo .partner_hani { background: url(' + ftc.urls.PLUGIN_HOST + '/images/partners/hani/btn_login.gif) no-repeat left top; width: 72px; } \
		#ft_partner_hani_popup table { width: 500px !important; } \
		#ft_partner_hani_popup span.tail { left: 342px; } \
		</style>');
		
		if (ftc.partner.hani.cmtbox_attached == false) {
			ftc.partner.hani.cmtbox_attached = true;
			
			ftj('<div class="ft_hani_before">블로그에 트랙백 보내기 <img src="http://plugin.tcomment.com/images/skin/hani/hani_before_arrow.gif" /> <a href="#" onclick="window.open(\'http://opinion1.hani.co.kr/popup/show_tb.hani?kisasn=431962\',\'poptb\',\'width=345, height=120\'); return false;"><img src="http://plugin.tcomment.com/images/skin/hani/btn_trackback_copy.gif" /></a> <a href="http://feeltong.hani.co.kr/feeltong/guide.html?GN=14" target="_blank"><img src="http://plugin.tcomment.com/images/skin/hani/btn_trackback_help.gif"/></a></div><div class="ft_hani_trackback"><strong>기사의견 보기</strong> | <a href="http://opinion1.hani.co.kr/view/show4track.hani?kisasn='+ft_post_key+'">트랙백 보기</a></div>').insertBefore('.ft_wrapper_table');
			
			ftc.markup.COMMENTBOX = ftc.markup.COMMENTBOX.replace('</div></td><td class="e">', '</div>'+
			'<ul class="ft_hani_list"><li><em>의견쓰기와 블로그에 트랙백 보내기</em>는 로그인후에 가능합니다.</li><li>욕설 등 인신공격성 글은 삭제될 수 있으며 댓글 서비스 이용시 제한조치를 받으실 수 있습니다. <a href="#" onclick="(window.open(\'http://www.hani.co.kr/opinion2005/pop_rule.html\',\'\',\'width=510,height=650\')); return false;"><em>[운영원칙]</em></a></li></ul>'
			+'</td><td class="e">');
			
		}
				
		// check login
		if (this.checkLogin()) {
			//alert(1);
			var islogin = ftc.cookie.get('tplatform_hani_login');
			var show_connect = ftc.cookie.get('tplatform_hani_show_conn');
			//alert(islogin);
			if (islogin == null || islogin == false) {
				//alert(1.1);
				ftc.cookie.set('tplatform_hani_login', true, this.cookie_options );
				this.checkConnection();
			}
			else {
				//alert(1.2);
				this.checkConnection();
				ftc.cookie.set('tplatform_hani_login', true, this.cookie_options );
				ftc.cmtbox.update();
			}
		}
		else {
			//alert(2);
			var islogin = ftc.cookie.get('tplatform_hani_login');
	
			var data = this.getCookie();
			if (data == false || data.user_key == -1) {
				//alert(islogin);
				
				if (islogin) {
					ftc.cookie.remove('tplatform_hani_login', this.cookie_options );
					//ftc.cookie.remove('SID', { domain: '.tcomment.com', path : '/' });
					ftc.user.logout(false);
				}
				else {
					ftc.user.checkAuth();
				}
			}
			else {
				ftc.user.checkAuth();
			}
		};
		
		// check connect
		//ftc.popup.profile.toggle = function() {return false;}; 
	}
	
	this.checkLogin = function () {
		var data = this.getCookie();
		
		if (data == false || data.user_key < 0 || data.user_secret < 0) {
			return false;
		}
		
		return true;
	}
	
	this.checkCmtSubmit = function() {
		if (ftj('input[name=extra1]:checked').length == 1) {
			return true;
		}
		
		return false;
	}
	
	this.login = function() {
		var join_url = 'http://bridge.hani.co.kr/login/input.jsp?site=news&next_url='+location.href + '#ft_container_hani';
		
		location.href = join_url;
	}
	
	this.logout = function() {
		ftc.user.logout(false);
		
		setTimeout( (function() {
			document.location.href = 'http://bridge.hani.co.kr/login/logout.jsp?next_url=' + encodeURIComponent(document.location.href);
		}), 300);
		
		
	}
	
	this.join = function() {
		
	}

	this.getCookie = function() {
		var cookies = ftc.cookie.get('CLTCOOKINFO');
		
		if (cookies != null && typeof(cookies) != 'undefined') {
			cookies = unescape(cookies);
			cookies = cookies.split(':', 4);
			var secret = escape(cookies[1]+':'+cookies[2]+':'+cookies[3]);
		
			if (typeof(cookies) != 'undefined' || cookies != null) {
				return { 'partner_key': 'f3c7ab3fcc939b3cf6caeaeb00796a645d354ba0', 'user_key': cookies[0], 'user_secret': secret, 'auth_key': 'no' };
			}
		}
		
		return false;
	}
	
	this.connect = function(direction) {
		if (typeof(direction) == 'undefined' || direction == null) {
			return false;
		}
		
		var data = this.getCookie();
		
		data.direction = direction;
		
		data.user_key_hani = ftc.cookie.get('haniuserid');
		
		if (direction == 0) {
			data.id = ftj('#ft_partner_hani_popup input[name=id]').val();
			data.passwd = ftj('#ft_partner_hani_popup input[name=passwd]').val();
		}
		
		ftj('#ft_partner_hani_popup input').attr('disabled', 'disabled').addClass('disabled');
		ftj('#ft_partner_hani_popup .button button').text('연결중...').attr('disabled', 'disabled').addClass('disabled');
		
		ftc.request.jsonp( ftc.urls.PLUGIN_HOST + '/partner/connect/hani', data, {
			onSuccess : function(response) {
				is_connected = response.result;
				
				//alert(response.msg);
				if (is_connected == true) {
					ftc.partner.hani.need_connection = false;
					ftc.partner.hani.is_connected = true;
					ftc.user.checkAuth();
					ftc.partner.hani.closePopup();
				}
				
				//alert(response.msg);
			},
			onFail : function(response) {
				ftj('#ft_partner_hani_popup input').removeAttr('disabled').removeClass('disabled');
				ftj('#ft_partner_hani_popup .button button').text('연결하기').removeAttr("disabled").removeClass('disabled');
				
				alert(response.msg);
			},
			onComplete : function() {
			}
		});
	}
	
	this.checkConnection = function(hidePopup) {
		//ftc.partner.hani.is_connected = true;
		
		var data = this.getCookie();

		ftc.request.jsonp( ftc.urls.PLUGIN_HOST + '/partner/check/hani', data, {
			onSuccess : function(response) {
				data = response.data;
				
				if (data.is_connected == true) {
					ftc.partner.hani.need_connection = false;
					ftc.partner.hani.is_connected = true;
					ftc.user.checkAuth();
				}
				else {
					ftc.partner.hani.connect(0);
					/*
					if (data.type == 0 || data.type == 1 ) {
						ftc.partner.hani.connect_direction = data.type;
						ftc.partner.hani.need_connection = true;
						if (hidePopup != true) {
							ftc.partner.hani.showConnectPopup(data.type);
						}
					}*/
				}
			},
			onFail : function(response) {
				ftc.partner.hani.need_connection = false;
				//ftc.partner.hani.connect(0);
			},
			onComplete : function() {
				;
			}
		});	
	}
	
	this.showConnectPopup = function() {
		var direction = this.connect_direction;
		
		if (typeof(direction) == 'undefined' || direction == null) {
			return false;
		}
		
		ftc.overlay.show();
		var ft_partner_hani_popup = ftj('#ft_partner_hani_popup');
		
		var data = this.getCookie();
		var tplatform_partner_key = data.partner_key;
		var tplatform_user_key = data.user_key;
		var tplatform_user_secret = data.user_secret;
		
		if (ft_partner_hani_popup.length <= 0) {
			if (direction == 0) {
				ftj('body').append('<div id="ft_partner_hani_popup" class="ft_popup"> \
					<table class="ft_popup_table"><tr><td class="nw"></td><td class="n"><span class="tail"></span></td><td class="ne"></td></tr><tr><td class="w"></td><td class="c"><div class="ft_popup_c"><div class="ft_popup_title"> \
						<span class="ft_popup_title_inside">한겨례 아이디로 T오픈아이디에 연결하기</span>\
					<a href="#close" onclick="ftc.partner.hani.closePopup(); return false;" class="btn_close">Close</a></div>\
						<form action="' + ftc.urls.PLUGIN_HOST + '/partners/connect/hani/" method="post">\
							<div class="ft_popup_content">\
								<div class="ft_popup_info">한겨례 댓글 서비스를 이용하려면 T오픈아이디로 서비스 연결이 필요합니다.<br/>한번 연결하면 다음부터는 다시 연결할 필요가 없습니다.</div> \
								<p class="center"><img src="' + ftc.urls.IMG_ROOT + '/partners/hani/logo_connect.gif" /><img src="' + ftc.urls.IMG_ROOT + '/connect_from.gif" /><img src="' + ftc.urls.IMG_ROOT + '/logo_connect.gif" /></p> \
								<p class="center">연결할 T오픈아이디를 입력해주세요. 없다면 계정을 생성해주세요.</p> \
							 \
								<input type="hidden" name="partner_key" value="' + tplatform_partner_key + '" /> \
								<input type="hidden" name="user_key" value="' + tplatform_user_key + '" /> \
								<input type="hidden" name="user_secret" value="' + tplatform_user_secret + '" /> \
								<input type="hidden" name="return_url" value="' + location.href + '" /> \
								<dl> \
									<dt><label>T오픈아이디</label></dt> \
									<dd><input type="text" name="id" class="rb"/></dd> \
									<dt><label>비밀번호</label></dt> \
									<dd><input type="password" name="passwd" class="rb"/></dd> \
									<dt><label class="hide">전송</label></dt> \
									<dd><span class="button"><button type="submit" onclick="ftc.partner.hani.connect(0); return false;">연결하기</button></span></dd> \
								</dl>\
							</div>\
						</form>\
						<div class="ft_popup_links"><a href="#">비밀번호 분실?</a>\
							<a href="#">T오픈아이디 만들기</a>\
						</div>\
					</div></td><td class="e"></td></tr><tr><td class="sw"></td><td class="s"></td><td class="se"></td></tr></table> \
				</div>');
			}
			else {
				ftj('body').append('<div id="ft_partner_hani_popup" class="ft_popup"> \
					<table class="ft_popup_table"><tr><td class="nw"></td><td class="n"><span class="tail"></span></td><td class="ne"></td></tr><tr><td class="w"></td><td class="c"><div class="ft_popup_c"><div class="ft_popup_title"><span class="ft_popup_title_inside">T오픈아이디로 서비스 연결하기</span>\
					<a href="#close" onclick="ftc.partner.hani.closePopup(); return false;" class="btn_close">Close</a></div><div class="ft_popup_content"> \
							<p>한겨례 댓글 서비스를 이용하려면 T오픈아이디로 서비스 연결이 필요합니다.<br/>한번 연결하면 다음부터는 다시 연결할 필요가 없습니다.</p> \
							<p class="center"><img src="' + ftc.urls.IMG_ROOT + '/logo_connect.gif" /><img src="' + ftc.urls.IMG_ROOT + '/connect_to.gif" /><img src="' + ftc.urls.IMG_ROOT + '/partners/hani/logo_connect.gif" /></p>\
							</div>\
							<div class="ft_popup_buttons"><span class="button"><button onclick="ftc.partner.hani.connect(1); return false;">연결하기</button></span></div> \
							<div class="ft_popup_links"><a href="#">T오픈아이디란?</a>\
								<a href="#">T오픈아이디 이용약관</a>\
							</div>\
						</div> \
					</div></td><td class="e"></td></tr><tr><td class="sw"></td><td class="s"></td><td class="se"></td></tr></table> \
				</div>');
			}
			
			ft_partner_hani_popup = ftj('#ft_partner_hani_popup').hide();
		}
		
		ftc.partner.hani.repositionPopup();
		ftj(window).bind('resize', ftc.partner.hani.repositionPopup);
		
		ftj('#ft_partner_hani_popup').show();
		ftc.utils.scrollTo('.ft_wrapper_table');
	}
	
	// LOGIN or JOIN popup
	this.showLoginPopup = function() {
		//alert(this.need_connection);
		if (this.need_connection) {
			return this.showConnectPopup();
		}
		
		ftc.overlay.show();
		var ft_partner_hani_popup = ftj('#ft_partner_hani_popup');
		
		if (ft_partner_hani_popup.length <= 0) {
			ftj('body').append(this.markup.login_popup);
			
			ft_partner_hani_popup = ftj('#ft_partner_hani_popup').hide();
		}
			
		ftc.partner.hani.repositionPopup();
		ftj(window).bind('resize', ftc.partner.hani.repositionPopup);
		
		ft_partner_hani_popup.hide().fadeIn(200);
		
		ftc.utils.scrollToVisible(ft_partner_hani_popup);
	}
	
	this.formCheck = function(method) {
		if (method == 'login') {
			var bid = ftj('#ft_form_hani_login input[name=bid]').val().trim();
			var bpw = ftj('#ft_form_hani_login input[name=bpw]').val().trim();
						
			if (bid == '' || bid == null) {
				ftc.popup.showModal('한겨례 아이디를 입력해주세요.', '안내');
				return false;
			}
			
			if (bpw == '' || bpw == null) {
				ftc.popup.showModal('비밀번호를 입력해주세요.', '안내');
				return false;
			}
			
			return true;
		}
		
		return false;
	}
		
	this.closePopup = function(event) {
		ftc.overlay.hide();
		ftj('#ft_partner_hani_popup').fadeOut(200, function() {
			ftj(this).remove();
		});
	}
	
	this.repositionPopup = function() {
		var ft_partner_hani_popup = ftj('#ft_partner_hani_popup');
		var target = ftj('.ft_cmtbox_topinfo .partner_hani');

		var left = ft_container.offset().left + ft_container.width() - ft_partner_hani_popup.width() - 10;
		
		ft_partner_hani_popup.css({
			'position': 'absolute',
			'top': target.offset().top + target.height() + 12 + 'px',
			'left': left + 'px'
		});
		
		var tail = target.offset().left - ft_container.offset().left + (target.width() / 2);
		ft_partner_hani_popup.find('span.tail').first().css({'left' : tail + 'px'});
	}
	
	this.checkExtra = function(val) {
		if (val >= 1 && val <= 5) {
			
		}
	}	
}

ftc.partner.hani.markup = new function() {
	this.login_popup = '<div id="ft_partner_hani_popup" class="ft_popup">\
		<table class="ft_popup_table"><tr><td class="nw"></td><td class="n"><span class="tail"></span></td><td class="ne"></td></tr><tr><td class="w"></td><td class="c"><div class="ft_popup_c"><div class="ft_popup_title">\
			<span class="ft_popup_title_inside"><img src="' + ftc.urls.IMG_ROOT + '/partners/hani/logo.gif" /> 한겨례 아이디로 로그인하기</span>\
		<a href="#close" onclick="ftc.partner.hani.closePopup(); return false;" class="btn_close">Close</a></div>\
				<form action="https://bridge.hani.co.kr/login/login_NM.jsp?site=ttalk&next_url=' + escape(location.href + '#ft_container_hani') + '" method="post" onsubmit="return ftc.partner.hani.formCheck(\'login\'); " name="ft_form_hani_login" id="ft_form_hani_login">\
				<div class="ft_popup_content">\
				<div class="ft_popup_info">한겨례 아이디로 로그인하시면 댓글 서비스와 함께<br/>한겨례에서 제공하는 다양한 서비스를 누리실수 있습니다.</div>\
					<input type="hidden" name="gourl" value="' + location.href + '#ft_container_hani" />\
					<ol class="form">\
						<li><div class="h"><label>한겨례 아이디</label></div>\
						<div class="i"><input type="text" name="username" class="rb"/></div></li>\
						<li><div class="h"><label>비밀번호</label></div>\
						<div class="i"><input type="password" name="password" class="rb"/></div></li>\
						<li><div class="i"><input type="checkbox" id="secure_login" checked="checked" /> <label for="secure_login">보안접속</label></div></li>\
					</ol>\
				</div>\
				<div class="ft_popup_buttons"><span class="button"><input type="submit" value="로그인" /></span></div>\
				<div class="ft_popup_links">\
					<a href="http://bridge.hani.co.kr/login/member_join_confirm.html">한겨례 회원가입</a>\
					<a href="http://bridge.hani.co.kr/login/sms/member_findid_step1.jsp?site=ttalk">ID 확인</a>\
					<a href="http://bridge.hani.co.kr/login/sms/member_findpw_step1.jsp?site=ttalk">비밀번호 찾기</a>\
				</div>\
				</form> \
		</div></td><td class="e"></td></tr><tr><td class="sw"></td><td class="s"></td><td class="se"></td></tr></table> \
	</div>';
};
